function Pa(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))g(b);new MutationObserver(b=>{for(const x of b)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&g(y)}).observe(document,{childList:!0,subtree:!0});function h(b){const x={};return b.integrity&&(x.integrity=b.integrity),b.referrerPolicy&&(x.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?x.credentials="include":b.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function g(b){if(b.ep)return;b.ep=!0;const x=h(b);fetch(b.href,x)}})();var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bt={exports:{}},ns;function Wr(){return ns||(ns=1,typeof self<"u"?bt.exports=self:typeof window<"u"?bt.exports=window:bt.exports=Function("return this")()),bt.exports}var oi,os;function Nr(){if(os)return oi;os=1;var e=Wr();return oi=function(){return typeof St!="object"||!St||St.Math!==Math||St.Array!==Array?e:St},oi}Nr();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pi(e){const t=Object.create(null);for(const h of e.split(","))t[h]=1;return h=>h in t}const me={},ut=[],Ue=()=>{},Ur=()=>!1,Zt=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ii=e=>e.startsWith("onUpdate:"),ye=Object.assign,Hi=(e,t)=>{const h=e.indexOf(t);h>-1&&e.splice(h,1)},$r=Object.prototype.hasOwnProperty,pe=(e,t)=>$r.call(e,t),le=Array.isArray,Et=e=>Qt(e)==="[object Map]",jr=e=>Qt(e)==="[object Set]",he=e=>typeof e=="function",we=e=>typeof e=="string",gt=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",Fs=e=>(Ce(e)||he(e))&&he(e.then)&&he(e.catch),zr=Object.prototype.toString,Qt=e=>zr.call(e),Kr=e=>Qt(e).slice(8,-1),qr=e=>Qt(e)==="[object Object]",Fi=e=>we(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xt=Pi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ei=e=>{const t=Object.create(null);return h=>t[h]||(t[h]=e(h))},Vr=/-(\w)/g,et=ei(e=>e.replace(Vr,(t,h)=>h?h.toUpperCase():"")),Gr=/\B([A-Z])/g,lt=ei(e=>e.replace(Gr,"-$1").toLowerCase()),Ws=ei(e=>e.charAt(0).toUpperCase()+e.slice(1)),ai=ei(e=>e?"on".concat(Ws(e)):""),at=(e,t)=>!Object.is(e,t),ci=(e,...t)=>{for(let h=0;h<e.length;h++)e[h](...t)},Ns=(e,t,h,g=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:g,value:h})},Xr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let as;const ti=()=>as||(as=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wi(e){if(le(e)){const t={};for(let h=0;h<e.length;h++){const g=e[h],b=we(g)?Qr(g):Wi(g);if(b)for(const x in b)t[x]=b[x]}return t}else if(we(e)||Ce(e))return e}const Jr=/;(?![^(]*\))/g,Yr=/:([^]+)/,Zr=/\/\*[^]*?\*\//g;function Qr(e){const t={};return e.replace(Zr,"").split(Jr).forEach(h=>{if(h){const g=h.split(Yr);g.length>1&&(t[g[0].trim()]=g[1].trim())}}),t}function Ni(e){let t="";if(we(e))t=e;else if(le(e))for(let h=0;h<e.length;h++){const g=Ni(e[h]);g&&(t+=g+" ")}else if(Ce(e))for(const h in e)e[h]&&(t+=h+" ");return t.trim()}const en="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tn=Pi(en);function Us(e){return!!e||e===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Be;class sn{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Be,!t&&Be&&(this.index=(Be.scopes||(Be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,h;if(this.scopes)for(t=0,h=this.scopes.length;t<h;t++)this.scopes[t].pause();for(t=0,h=this.effects.length;t<h;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,h;if(this.scopes)for(t=0,h=this.scopes.length;t<h;t++)this.scopes[t].resume();for(t=0,h=this.effects.length;t<h;t++)this.effects[t].resume()}}run(t){if(this._active){const h=Be;try{return Be=this,t()}finally{Be=h}}}on(){Be=this}off(){Be=this.parent}stop(t){if(this._active){this._active=!1;let h,g;for(h=0,g=this.effects.length;h<g;h++)this.effects[h].stop();for(this.effects.length=0,h=0,g=this.cleanups.length;h<g;h++)this.cleanups[h]();if(this.cleanups.length=0,this.scopes){for(h=0,g=this.scopes.length;h<g;h++)this.scopes[h].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const b=this.parent.scopes.pop();b&&b!==this&&(this.parent.scopes[this.index]=b,b.index=this.index)}this.parent=void 0}}}function rn(){return Be}let ge;const li=new WeakSet;class $s{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Be&&Be.active&&Be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,li.has(this)&&(li.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zs(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cs(this),Ks(this);const t=ge,h=Pe;ge=this,Pe=!0;try{return this.fn()}finally{qs(this),ge=t,Pe=h,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ji(t);this.deps=this.depsTail=void 0,cs(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?li.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yi(this)&&this.run()}get dirty(){return yi(this)}}let js=0,Lt,kt;function zs(e,t=!1){if(e.flags|=8,t){e.next=kt,kt=e;return}e.next=Lt,Lt=e}function Ui(){js++}function $i(){if(--js>0)return;if(kt){let t=kt;for(kt=void 0;t;){const h=t.next;t.next=void 0,t.flags&=-9,t=h}}let e;for(;Lt;){let t=Lt;for(Lt=void 0;t;){const h=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(g){e||(e=g)}t=h}}if(e)throw e}function Ks(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function qs(e){let t,h=e.depsTail,g=h;for(;g;){const b=g.prevDep;g.version===-1?(g===h&&(h=b),ji(g),nn(g)):t=g,g.dep.activeLink=g.prevActiveLink,g.prevActiveLink=void 0,g=b}e.deps=t,e.depsTail=h}function yi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Vs(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Vs(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Bt))return;e.globalVersion=Bt;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!yi(e)){e.flags&=-3;return}const h=ge,g=Pe;ge=e,Pe=!0;try{Ks(e);const b=e.fn(e._value);(t.version===0||at(b,e._value))&&(e._value=b,t.version++)}catch(b){throw t.version++,b}finally{ge=h,Pe=g,qs(e),e.flags&=-3}}function ji(e,t=!1){const{dep:h,prevSub:g,nextSub:b}=e;if(g&&(g.nextSub=b,e.prevSub=void 0),b&&(b.prevSub=g,e.nextSub=void 0),h.subs===e&&(h.subs=g,!g&&h.computed)){h.computed.flags&=-5;for(let x=h.computed.deps;x;x=x.nextDep)ji(x,!0)}!t&&!--h.sc&&h.map&&h.map.delete(h.key)}function nn(e){const{prevDep:t,nextDep:h}=e;t&&(t.nextDep=h,e.prevDep=void 0),h&&(h.prevDep=t,e.nextDep=void 0)}let Pe=!0;const Gs=[];function tt(){Gs.push(Pe),Pe=!1}function it(){const e=Gs.pop();Pe=e===void 0?!0:e}function cs(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const h=ge;ge=void 0;try{t()}finally{ge=h}}}let Bt=0;class on{constructor(t,h){this.sub=t,this.dep=h,this.version=h.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Xs{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ge||!Pe||ge===this.computed)return;let h=this.activeLink;if(h===void 0||h.sub!==ge)h=this.activeLink=new on(ge,this),ge.deps?(h.prevDep=ge.depsTail,ge.depsTail.nextDep=h,ge.depsTail=h):ge.deps=ge.depsTail=h,Js(h);else if(h.version===-1&&(h.version=this.version,h.nextDep)){const g=h.nextDep;g.prevDep=h.prevDep,h.prevDep&&(h.prevDep.nextDep=g),h.prevDep=ge.depsTail,h.nextDep=void 0,ge.depsTail.nextDep=h,ge.depsTail=h,ge.deps===h&&(ge.deps=g)}return h}trigger(t){this.version++,Bt++,this.notify(t)}notify(t){Ui();try{for(let h=this.subs;h;h=h.prevSub)h.sub.notify()&&h.sub.dep.notify()}finally{$i()}}}function Js(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let g=t.deps;g;g=g.nextDep)Js(g)}const h=e.dep.subs;h!==e&&(e.prevSub=h,h&&(h.nextSub=e)),e.dep.subs=e}}const Ei=new WeakMap,ct=Symbol(""),xi=Symbol(""),Mt=Symbol("");function Ee(e,t,h){if(Pe&&ge){let g=Ei.get(e);g||Ei.set(e,g=new Map);let b=g.get(h);b||(g.set(h,b=new Xs),b.map=g,b.key=h),b.track()}}function Ve(e,t,h,g,b,x){const y=Ei.get(e);if(!y){Bt++;return}const s=a=>{a&&a.trigger()};if(Ui(),t==="clear")y.forEach(s);else{const a=le(e),d=a&&Fi(h);if(a&&h==="length"){const u=Number(g);y.forEach((c,f)=>{(f==="length"||f===Mt||!gt(f)&&f>=u)&&s(c)})}else switch((h!==void 0||y.has(void 0))&&s(y.get(h)),d&&s(y.get(Mt)),t){case"add":a?d&&s(y.get("length")):(s(y.get(ct)),Et(e)&&s(y.get(xi)));break;case"delete":a||(s(y.get(ct)),Et(e)&&s(y.get(xi)));break;case"set":Et(e)&&s(y.get(ct));break}}$i()}function ht(e){const t=ve(e);return t===e?t:(Ee(t,"iterate",Mt),$e(e)?t:t.map(Me))}function zi(e){return Ee(e=ve(e),"iterate",Mt),e}const an={__proto__:null,[Symbol.iterator](){return hi(this,Symbol.iterator,Me)},concat(...e){return ht(this).concat(...e.map(t=>le(t)?ht(t):t))},entries(){return hi(this,"entries",e=>(e[1]=Me(e[1]),e))},every(e,t){return ze(this,"every",e,t,void 0,arguments)},filter(e,t){return ze(this,"filter",e,t,h=>h.map(Me),arguments)},find(e,t){return ze(this,"find",e,t,Me,arguments)},findIndex(e,t){return ze(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ze(this,"findLast",e,t,Me,arguments)},findLastIndex(e,t){return ze(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ze(this,"forEach",e,t,void 0,arguments)},includes(...e){return di(this,"includes",e)},indexOf(...e){return di(this,"indexOf",e)},join(e){return ht(this).join(e)},lastIndexOf(...e){return di(this,"lastIndexOf",e)},map(e,t){return ze(this,"map",e,t,void 0,arguments)},pop(){return Ct(this,"pop")},push(...e){return Ct(this,"push",e)},reduce(e,...t){return ls(this,"reduce",e,t)},reduceRight(e,...t){return ls(this,"reduceRight",e,t)},shift(){return Ct(this,"shift")},some(e,t){return ze(this,"some",e,t,void 0,arguments)},splice(...e){return Ct(this,"splice",e)},toReversed(){return ht(this).toReversed()},toSorted(e){return ht(this).toSorted(e)},toSpliced(...e){return ht(this).toSpliced(...e)},unshift(...e){return Ct(this,"unshift",e)},values(){return hi(this,"values",Me)}};function hi(e,t,h){const g=zi(e),b=g[t]();return g!==e&&!$e(e)&&(b._next=b.next,b.next=()=>{const x=b._next();return x.value&&(x.value=h(x.value)),x}),b}const cn=Array.prototype;function ze(e,t,h,g,b,x){const y=zi(e),s=y!==e&&!$e(e),a=y[t];if(a!==cn[t]){const c=a.apply(e,x);return s?Me(c):c}let d=h;y!==e&&(s?d=function(c,f){return h.call(this,Me(c),f,e)}:h.length>2&&(d=function(c,f){return h.call(this,c,f,e)}));const u=a.call(y,d,g);return s&&b?b(u):u}function ls(e,t,h,g){const b=zi(e);let x=h;return b!==e&&($e(e)?h.length>3&&(x=function(y,s,a){return h.call(this,y,s,a,e)}):x=function(y,s,a){return h.call(this,y,Me(s),a,e)}),b[t](x,...g)}function di(e,t,h){const g=ve(e);Ee(g,"iterate",Mt);const b=g[t](...h);return(b===-1||b===!1)&&Gi(h[0])?(h[0]=ve(h[0]),g[t](...h)):b}function Ct(e,t,h=[]){tt(),Ui();const g=ve(e)[t].apply(e,h);return $i(),it(),g}const ln=Pi("__proto__,__v_isRef,__isVue"),Ys=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(gt));function hn(e){gt(e)||(e=String(e));const t=ve(this);return Ee(t,"has",e),t.hasOwnProperty(e)}class Zs{constructor(t=!1,h=!1){this._isReadonly=t,this._isShallow=h}get(t,h,g){if(h==="__v_skip")return t.__v_skip;const b=this._isReadonly,x=this._isShallow;if(h==="__v_isReactive")return!b;if(h==="__v_isReadonly")return b;if(h==="__v_isShallow")return x;if(h==="__v_raw")return g===(b?x?bn:ir:x?tr:er).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(g)?t:void 0;const y=le(t);if(!b){let a;if(y&&(a=an[h]))return a;if(h==="hasOwnProperty")return hn}const s=Reflect.get(t,h,Re(t)?t:g);return(gt(h)?Ys.has(h):ln(h))||(b||Ee(t,"get",h),x)?s:Re(s)?y&&Fi(h)?s:s.value:Ce(s)?b?sr(s):qi(s):s}}class Qs extends Zs{constructor(t=!1){super(!1,t)}set(t,h,g,b){let x=t[h];if(!this._isShallow){const a=pt(x);if(!$e(g)&&!pt(g)&&(x=ve(x),g=ve(g)),!le(t)&&Re(x)&&!Re(g))return a?!1:(x.value=g,!0)}const y=le(t)&&Fi(h)?Number(h)<t.length:pe(t,h),s=Reflect.set(t,h,g,Re(t)?t:b);return t===ve(b)&&(y?at(g,x)&&Ve(t,"set",h,g):Ve(t,"add",h,g)),s}deleteProperty(t,h){const g=pe(t,h);t[h];const b=Reflect.deleteProperty(t,h);return b&&g&&Ve(t,"delete",h,void 0),b}has(t,h){const g=Reflect.has(t,h);return(!gt(h)||!Ys.has(h))&&Ee(t,"has",h),g}ownKeys(t){return Ee(t,"iterate",le(t)?"length":ct),Reflect.ownKeys(t)}}class dn extends Zs{constructor(t=!1){super(!0,t)}set(t,h){return!0}deleteProperty(t,h){return!0}}const un=new Qs,fn=new dn,_n=new Qs(!0);const Li=e=>e,Nt=e=>Reflect.getPrototypeOf(e);function pn(e,t,h){return function(...g){const b=this.__v_raw,x=ve(b),y=Et(x),s=e==="entries"||e===Symbol.iterator&&y,a=e==="keys"&&y,d=b[e](...g),u=h?Li:t?ki:Me;return!t&&Ee(x,"iterate",a?xi:ct),{next(){const{value:c,done:f}=d.next();return f?{value:c,done:f}:{value:s?[u(c[0]),u(c[1])]:u(c),done:f}},[Symbol.iterator](){return this}}}}function Ut(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vn(e,t){const h={get(b){const x=this.__v_raw,y=ve(x),s=ve(b);e||(at(b,s)&&Ee(y,"get",b),Ee(y,"get",s));const{has:a}=Nt(y),d=t?Li:e?ki:Me;if(a.call(y,b))return d(x.get(b));if(a.call(y,s))return d(x.get(s));x!==y&&x.get(b)},get size(){const b=this.__v_raw;return!e&&Ee(ve(b),"iterate",ct),Reflect.get(b,"size",b)},has(b){const x=this.__v_raw,y=ve(x),s=ve(b);return e||(at(b,s)&&Ee(y,"has",b),Ee(y,"has",s)),b===s?x.has(b):x.has(b)||x.has(s)},forEach(b,x){const y=this,s=y.__v_raw,a=ve(s),d=t?Li:e?ki:Me;return!e&&Ee(a,"iterate",ct),s.forEach((u,c)=>b.call(x,d(u),d(c),y))}};return ye(h,e?{add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear")}:{add(b){!t&&!$e(b)&&!pt(b)&&(b=ve(b));const x=ve(this);return Nt(x).has.call(x,b)||(x.add(b),Ve(x,"add",b,b)),this},set(b,x){!t&&!$e(x)&&!pt(x)&&(x=ve(x));const y=ve(this),{has:s,get:a}=Nt(y);let d=s.call(y,b);d||(b=ve(b),d=s.call(y,b));const u=a.call(y,b);return y.set(b,x),d?at(x,u)&&Ve(y,"set",b,x):Ve(y,"add",b,x),this},delete(b){const x=ve(this),{has:y,get:s}=Nt(x);let a=y.call(x,b);a||(b=ve(b),a=y.call(x,b)),s&&s.call(x,b);const d=x.delete(b);return a&&Ve(x,"delete",b,void 0),d},clear(){const b=ve(this),x=b.size!==0,y=b.clear();return x&&Ve(b,"clear",void 0,void 0),y}}),["keys","values","entries",Symbol.iterator].forEach(b=>{h[b]=pn(b,e,t)}),h}function Ki(e,t){const h=vn(e,t);return(g,b,x)=>b==="__v_isReactive"?!e:b==="__v_isReadonly"?e:b==="__v_raw"?g:Reflect.get(pe(h,b)&&b in g?h:g,b,x)}const gn={get:Ki(!1,!1)},mn={get:Ki(!1,!0)},Sn={get:Ki(!0,!1)};const er=new WeakMap,tr=new WeakMap,ir=new WeakMap,bn=new WeakMap;function Cn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wn(e){return e.__v_skip||!Object.isExtensible(e)?0:Cn(Kr(e))}function qi(e){return pt(e)?e:Vi(e,!1,un,gn,er)}function yn(e){return Vi(e,!1,_n,mn,tr)}function sr(e){return Vi(e,!0,fn,Sn,ir)}function Vi(e,t,h,g,b){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const x=b.get(e);if(x)return x;const y=wn(e);if(y===0)return e;const s=new Proxy(e,y===2?g:h);return b.set(e,s),s}function Dt(e){return pt(e)?Dt(e.__v_raw):!!(e&&e.__v_isReactive)}function pt(e){return!!(e&&e.__v_isReadonly)}function $e(e){return!!(e&&e.__v_isShallow)}function Gi(e){return e?!!e.__v_raw:!1}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function En(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&Ns(e,"__v_skip",!0),e}const Me=e=>Ce(e)?qi(e):e,ki=e=>Ce(e)?sr(e):e;function Re(e){return e?e.__v_isRef===!0:!1}function xn(e){return Re(e)?e.value:e}const Ln={get:(e,t,h)=>t==="__v_raw"?e:xn(Reflect.get(e,t,h)),set:(e,t,h,g)=>{const b=e[t];return Re(b)&&!Re(h)?(b.value=h,!0):Reflect.set(e,t,h,g)}};function rr(e){return Dt(e)?e:new Proxy(e,Ln)}class kn{constructor(t,h,g){this.fn=t,this.setter=h,this._value=void 0,this.dep=new Xs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!h,this.isSSR=g}notify(){if(this.flags|=16,!(this.flags&8)&&ge!==this)return zs(this,!0),!0}get value(){const t=this.dep.track();return Vs(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Dn(e,t,h=!1){let g,b;return he(e)?g=e:(g=e.get,b=e.set),new kn(g,b,h)}const $t={},qt=new WeakMap;let nt;function Rn(e,t=!1,h=nt){if(h){let g=qt.get(h);g||qt.set(h,g=[]),g.push(e)}}function An(e,t,h=me){const{immediate:g,deep:b,once:x,scheduler:y,augmentJob:s,call:a}=h,d=l=>b?l:$e(l)||b===!1||b===0?Ze(l,1):Ze(l);let u,c,f,v,C=!1,_=!1;if(Re(e)?(c=()=>e.value,C=$e(e)):Dt(e)?(c=()=>d(e),C=!0):le(e)?(_=!0,C=e.some(l=>Dt(l)||$e(l)),c=()=>e.map(l=>{if(Re(l))return l.value;if(Dt(l))return d(l);if(he(l))return a?a(l,2):l()})):he(e)?t?c=a?()=>a(e,2):e:c=()=>{if(f){tt();try{f()}finally{it()}}const l=nt;nt=u;try{return a?a(e,3,[v]):e(v)}finally{nt=l}}:c=Ue,t&&b){const l=c,m=b===!0?1/0:b;c=()=>Ze(l(),m)}const n=rn(),o=()=>{u.stop(),n&&n.active&&Hi(n.effects,u)};if(x&&t){const l=t;t=(...m)=>{l(...m),o()}}let i=_?new Array(e.length).fill($t):$t;const r=l=>{if(!(!(u.flags&1)||!u.dirty&&!l))if(t){const m=u.run();if(b||C||(_?m.some((S,w)=>at(S,i[w])):at(m,i))){f&&f();const S=nt;nt=u;try{const w=[m,i===$t?void 0:_&&i[0]===$t?[]:i,v];a?a(t,3,w):t(...w),i=m}finally{nt=S}}}else u.run()};return s&&s(r),u=new $s(c),u.scheduler=y?()=>y(r,!1):r,v=l=>Rn(l,!1,u),f=u.onStop=()=>{const l=qt.get(u);if(l){if(a)a(l,4);else for(const m of l)m();qt.delete(u)}},t?g?r(!0):i=u.run():y?y(r.bind(null,!0),!0):u.run(),o.pause=u.pause.bind(u),o.resume=u.resume.bind(u),o.stop=o,o}function Ze(e,t=1/0,h){if(t<=0||!Ce(e)||e.__v_skip||(h=h||new Set,h.has(e)))return e;if(h.add(e),t--,Re(e))Ze(e.value,t,h);else if(le(e))for(let g=0;g<e.length;g++)Ze(e[g],t,h);else if(jr(e)||Et(e))e.forEach(g=>{Ze(g,t,h)});else if(qr(e)){for(const g in e)Ze(e[g],t,h);for(const g of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,g)&&Ze(e[g],t,h)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ft(e,t,h,g){try{return g?e(...g):e()}catch(b){ii(b,t,h)}}function je(e,t,h,g){if(he(e)){const b=Ft(e,t,h,g);return b&&Fs(b)&&b.catch(x=>{ii(x,t,h)}),b}if(le(e)){const b=[];for(let x=0;x<e.length;x++)b.push(je(e[x],t,h,g));return b}}function ii(e,t,h,g=!0){const b=t?t.vnode:null,{errorHandler:x,throwUnhandledErrorInProduction:y}=t&&t.appContext.config||me;if(t){let s=t.parent;const a=t.proxy,d="https://vuejs.org/error-reference/#runtime-".concat(h);for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,d)===!1)return}s=s.parent}if(x){tt(),Ft(x,null,10,[e,a,d]),it();return}}Tn(e,h,b,g,y)}function Tn(e,t,h,g=!0,b=!1){if(b)throw e;console.error(e)}const ke=[];let Fe=-1;const ft=[];let Je=null,dt=0;const nr=Promise.resolve();let Vt=null;function Bn(e){const t=Vt||nr;return e?t.then(this?e.bind(this):e):t}function Mn(e){let t=Fe+1,h=ke.length;for(;t<h;){const g=t+h>>>1,b=ke[g],x=Ot(b);x<e||x===e&&b.flags&2?t=g+1:h=g}return t}function Xi(e){if(!(e.flags&1)){const t=Ot(e),h=ke[ke.length-1];!h||!(e.flags&2)&&t>=Ot(h)?ke.push(e):ke.splice(Mn(t),0,e),e.flags|=1,or()}}function or(){Vt||(Vt=nr.then(cr))}function On(e){le(e)?ft.push(...e):Je&&e.id===-1?Je.splice(dt+1,0,e):e.flags&1||(ft.push(e),e.flags|=1),or()}function hs(e,t,h=Fe+1){for(;h<ke.length;h++){const g=ke[h];if(g&&g.flags&2){if(e&&g.id!==e.uid)continue;ke.splice(h,1),h--,g.flags&4&&(g.flags&=-2),g(),g.flags&4||(g.flags&=-2)}}}function ar(e){if(ft.length){const t=[...new Set(ft)].sort((h,g)=>Ot(h)-Ot(g));if(ft.length=0,Je){Je.push(...t);return}for(Je=t,dt=0;dt<Je.length;dt++){const h=Je[dt];h.flags&4&&(h.flags&=-2),h.flags&8||h(),h.flags&=-2}Je=null,dt=0}}const Ot=e=>e.id==null?e.flags&2?-1:1/0:e.id;function cr(e){try{for(Fe=0;Fe<ke.length;Fe++){const t=ke[Fe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ft(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Fe<ke.length;Fe++){const t=ke[Fe];t&&(t.flags&=-2)}Fe=-1,ke.length=0,ar(),Vt=null,(ke.length||ft.length)&&cr()}}let Ne=null,lr=null;function Gt(e){const t=Ne;return Ne=e,lr=e&&e.type.__scopeId||null,t}function Pn(e,t=Ne,h){if(!t||e._n)return e;const g=(...b)=>{g._d&&ms(-1);const x=Gt(t);let y;try{y=e(...b)}finally{Gt(x),g._d&&ms(1)}return y};return g._n=!0,g._c=!0,g._d=!0,g}function st(e,t,h,g){const b=e.dirs,x=t&&t.dirs;for(let y=0;y<b.length;y++){const s=b[y];x&&(s.oldValue=x[y].value);let a=s.dir[g];a&&(tt(),je(a,h,8,[e.el,s,e,t]),it())}}const In=Symbol("_vte"),Hn=e=>e.__isTeleport;function Ji(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ji(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function hr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Xt(e,t,h,g,b=!1){if(le(e)){e.forEach((C,_)=>Xt(C,t&&(le(t)?t[_]:t),h,g,b));return}if(Rt(g)&&!b){g.shapeFlag&512&&g.type.__asyncResolved&&g.component.subTree.component&&Xt(e,t,h,g.component.subTree);return}const x=g.shapeFlag&4?is(g.component):g.el,y=b?null:x,{i:s,r:a}=e,d=t&&t.r,u=s.refs===me?s.refs={}:s.refs,c=s.setupState,f=ve(c),v=c===me?()=>!1:C=>pe(f,C);if(d!=null&&d!==a&&(we(d)?(u[d]=null,v(d)&&(c[d]=null)):Re(d)&&(d.value=null)),he(a))Ft(a,s,12,[y,u]);else{const C=we(a),_=Re(a);if(C||_){const n=()=>{if(e.f){const o=C?v(a)?c[a]:u[a]:a.value;b?le(o)&&Hi(o,x):le(o)?o.includes(x)||o.push(x):C?(u[a]=[x],v(a)&&(c[a]=u[a])):(a.value=[x],e.k&&(u[e.k]=a.value))}else C?(u[a]=y,v(a)&&(c[a]=y)):_&&(a.value=y,e.k&&(u[e.k]=y))};y?(n.id=-1,Te(n,h)):n()}}}ti().requestIdleCallback;ti().cancelIdleCallback;const Rt=e=>!!e.type.__asyncLoader,dr=e=>e.type.__isKeepAlive;function Fn(e,t){ur(e,"a",t)}function Wn(e,t){ur(e,"da",t)}function ur(e,t,h=De){const g=e.__wdc||(e.__wdc=()=>{let b=h;for(;b;){if(b.isDeactivated)return;b=b.parent}return e()});if(si(t,g,h),h){let b=h.parent;for(;b&&b.parent;)dr(b.parent.vnode)&&Nn(g,t,h,b),b=b.parent}}function Nn(e,t,h,g){const b=si(t,e,g,!0);Yi(()=>{Hi(g[t],b)},h)}function si(e,t,h=De,g=!1){if(h){const b=h[e]||(h[e]=[]),x=t.__weh||(t.__weh=(...y)=>{tt();const s=Wt(h),a=je(t,h,e,y);return s(),it(),a});return g?b.unshift(x):b.push(x),x}}const Xe=e=>(t,h=De)=>{(!Ht||e==="sp")&&si(e,(...g)=>t(...g),h)},Un=Xe("bm"),fr=Xe("m"),$n=Xe("bu"),jn=Xe("u"),zn=Xe("bum"),Yi=Xe("um"),Kn=Xe("sp"),qn=Xe("rtg"),Vn=Xe("rtc");function Gn(e,t=De){si("ec",e,t)}const Xn=Symbol.for("v-ndc"),Di=e=>e?Pr(e)?is(e):Di(e.parent):null,At=ye(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Di(e.parent),$root:e=>Di(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Zi(e),$forceUpdate:e=>e.f||(e.f=()=>{Xi(e.update)}),$nextTick:e=>e.n||(e.n=Bn.bind(e.proxy)),$watch:e=>mo.bind(e)}),ui=(e,t)=>e!==me&&!e.__isScriptSetup&&pe(e,t),Jn={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:h,setupState:g,data:b,props:x,accessCache:y,type:s,appContext:a}=e;let d;if(t[0]!=="$"){const v=y[t];if(v!==void 0)switch(v){case 1:return g[t];case 2:return b[t];case 4:return h[t];case 3:return x[t]}else{if(ui(g,t))return y[t]=1,g[t];if(b!==me&&pe(b,t))return y[t]=2,b[t];if((d=e.propsOptions[0])&&pe(d,t))return y[t]=3,x[t];if(h!==me&&pe(h,t))return y[t]=4,h[t];Ri&&(y[t]=0)}}const u=At[t];let c,f;if(u)return t==="$attrs"&&Ee(e.attrs,"get",""),u(e);if((c=s.__cssModules)&&(c=c[t]))return c;if(h!==me&&pe(h,t))return y[t]=4,h[t];if(f=a.config.globalProperties,pe(f,t))return f[t]},set({_:e},t,h){const{data:g,setupState:b,ctx:x}=e;return ui(b,t)?(b[t]=h,!0):g!==me&&pe(g,t)?(g[t]=h,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(x[t]=h,!0)},has({_:{data:e,setupState:t,accessCache:h,ctx:g,appContext:b,propsOptions:x}},y){let s;return!!h[y]||e!==me&&pe(e,y)||ui(t,y)||(s=x[0])&&pe(s,y)||pe(g,y)||pe(At,y)||pe(b.config.globalProperties,y)},defineProperty(e,t,h){return h.get!=null?e._.accessCache[t]=0:pe(h,"value")&&this.set(e,t,h.value,null),Reflect.defineProperty(e,t,h)}};function ds(e){return le(e)?e.reduce((t,h)=>(t[h]=null,t),{}):e}let Ri=!0;function Yn(e){const t=Zi(e),h=e.proxy,g=e.ctx;Ri=!1,t.beforeCreate&&us(t.beforeCreate,e,"bc");const{data:b,computed:x,methods:y,watch:s,provide:a,inject:d,created:u,beforeMount:c,mounted:f,beforeUpdate:v,updated:C,activated:_,deactivated:n,beforeDestroy:o,beforeUnmount:i,destroyed:r,unmounted:l,render:m,renderTracked:S,renderTriggered:w,errorCaptured:p,serverPrefetch:E,expose:T,inheritAttrs:O,components:I,directives:R,filters:N}=t;if(d&&Zn(d,g,null),y)for(const Y in y){const z=y[Y];he(z)&&(g[Y]=z.bind(h))}if(b){const Y=b.call(h,h);Ce(Y)&&(e.data=qi(Y))}if(Ri=!0,x)for(const Y in x){const z=x[Y],L=he(z)?z.bind(h,h):he(z.get)?z.get.bind(h,h):Ue,A=!he(z)&&he(z.set)?z.set.bind(h):Ue,B=Uo({get:L,set:A});Object.defineProperty(g,Y,{enumerable:!0,configurable:!0,get:()=>B.value,set:P=>B.value=P})}if(s)for(const Y in s)_r(s[Y],g,h,Y);if(a){const Y=he(a)?a.call(h):a;Reflect.ownKeys(Y).forEach(z=>{ro(z,Y[z])})}u&&us(u,e,"c");function q(Y,z){le(z)?z.forEach(L=>Y(L.bind(h))):z&&Y(z.bind(h))}if(q(Un,c),q(fr,f),q($n,v),q(jn,C),q(Fn,_),q(Wn,n),q(Gn,p),q(Vn,S),q(qn,w),q(zn,i),q(Yi,l),q(Kn,E),le(T))if(T.length){const Y=e.exposed||(e.exposed={});T.forEach(z=>{Object.defineProperty(Y,z,{get:()=>h[z],set:L=>h[z]=L})})}else e.exposed||(e.exposed={});m&&e.render===Ue&&(e.render=m),O!=null&&(e.inheritAttrs=O),I&&(e.components=I),R&&(e.directives=R),E&&hr(e)}function Zn(e,t,h=Ue){le(e)&&(e=Ai(e));for(const g in e){const b=e[g];let x;Ce(b)?"default"in b?x=jt(b.from||g,b.default,!0):x=jt(b.from||g):x=jt(b),Re(x)?Object.defineProperty(t,g,{enumerable:!0,configurable:!0,get:()=>x.value,set:y=>x.value=y}):t[g]=x}}function us(e,t,h){je(le(e)?e.map(g=>g.bind(t.proxy)):e.bind(t.proxy),t,h)}function _r(e,t,h,g){let b=g.includes(".")?Dr(h,g):()=>h[g];if(we(e)){const x=t[e];he(x)&&_i(b,x)}else if(he(e))_i(b,e.bind(h));else if(Ce(e))if(le(e))e.forEach(x=>_r(x,t,h,g));else{const x=he(e.handler)?e.handler.bind(h):t[e.handler];he(x)&&_i(b,x,e)}}function Zi(e){const t=e.type,{mixins:h,extends:g}=t,{mixins:b,optionsCache:x,config:{optionMergeStrategies:y}}=e.appContext,s=x.get(t);let a;return s?a=s:!b.length&&!h&&!g?a=t:(a={},b.length&&b.forEach(d=>Jt(a,d,y,!0)),Jt(a,t,y)),Ce(t)&&x.set(t,a),a}function Jt(e,t,h,g=!1){const{mixins:b,extends:x}=t;x&&Jt(e,x,h,!0),b&&b.forEach(y=>Jt(e,y,h,!0));for(const y in t)if(!(g&&y==="expose")){const s=Qn[y]||h&&h[y];e[y]=s?s(e[y],t[y]):t[y]}return e}const Qn={data:fs,props:_s,emits:_s,methods:yt,computed:yt,beforeCreate:Le,created:Le,beforeMount:Le,mounted:Le,beforeUpdate:Le,updated:Le,beforeDestroy:Le,beforeUnmount:Le,destroyed:Le,unmounted:Le,activated:Le,deactivated:Le,errorCaptured:Le,serverPrefetch:Le,components:yt,directives:yt,watch:to,provide:fs,inject:eo};function fs(e,t){return t?e?function(){return ye(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function eo(e,t){return yt(Ai(e),Ai(t))}function Ai(e){if(le(e)){const t={};for(let h=0;h<e.length;h++)t[e[h]]=e[h];return t}return e}function Le(e,t){return e?[...new Set([].concat(e,t))]:t}function yt(e,t){return e?ye(Object.create(null),e,t):t}function _s(e,t){return e?le(e)&&le(t)?[...new Set([...e,...t])]:ye(Object.create(null),ds(e),ds(t!=null?t:{})):t}function to(e,t){if(!e)return t;if(!t)return e;const h=ye(Object.create(null),e);for(const g in t)h[g]=Le(e[g],t[g]);return h}function pr(){return{app:null,config:{isNativeTag:Ur,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let io=0;function so(e,t){return function(g,b=null){he(g)||(g=ye({},g)),b!=null&&!Ce(b)&&(b=null);const x=pr(),y=new WeakSet,s=[];let a=!1;const d=x.app={_uid:io++,_component:g,_props:b,_container:null,_context:x,_instance:null,version:$o,get config(){return x.config},set config(u){},use(u,...c){return y.has(u)||(u&&he(u.install)?(y.add(u),u.install(d,...c)):he(u)&&(y.add(u),u(d,...c))),d},mixin(u){return x.mixins.includes(u)||x.mixins.push(u),d},component(u,c){return c?(x.components[u]=c,d):x.components[u]},directive(u,c){return c?(x.directives[u]=c,d):x.directives[u]},mount(u,c,f){if(!a){const v=d._ceVNode||Qe(g,b);return v.appContext=x,f===!0?f="svg":f===!1&&(f=void 0),c&&t?t(v,u):e(v,u,f),a=!0,d._container=u,u.__vue_app__=d,is(v.component)}},onUnmount(u){s.push(u)},unmount(){a&&(je(s,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,c){return x.provides[u]=c,d},runWithContext(u){const c=_t;_t=d;try{return u()}finally{_t=c}}};return d}}let _t=null;function ro(e,t){if(De){let h=De.provides;const g=De.parent&&De.parent.provides;g===h&&(h=De.provides=Object.create(g)),h[e]=t}}function jt(e,t,h=!1){const g=De||Ne;if(g||_t){const b=_t?_t._context.provides:g?g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides:void 0;if(b&&e in b)return b[e];if(arguments.length>1)return h&&he(t)?t.call(g&&g.proxy):t}}const vr={},gr=()=>Object.create(vr),mr=e=>Object.getPrototypeOf(e)===vr;function no(e,t,h,g=!1){const b={},x=gr();e.propsDefaults=Object.create(null),Sr(e,t,b,x);for(const y in e.propsOptions[0])y in b||(b[y]=void 0);h?e.props=g?b:yn(b):e.type.props?e.props=b:e.props=x,e.attrs=x}function oo(e,t,h,g){const{props:b,attrs:x,vnode:{patchFlag:y}}=e,s=ve(b),[a]=e.propsOptions;let d=!1;if((g||y>0)&&!(y&16)){if(y&8){const u=e.vnode.dynamicProps;for(let c=0;c<u.length;c++){let f=u[c];if(ri(e.emitsOptions,f))continue;const v=t[f];if(a)if(pe(x,f))v!==x[f]&&(x[f]=v,d=!0);else{const C=et(f);b[C]=Ti(a,s,C,v,e,!1)}else v!==x[f]&&(x[f]=v,d=!0)}}}else{Sr(e,t,b,x)&&(d=!0);let u;for(const c in s)(!t||!pe(t,c)&&((u=lt(c))===c||!pe(t,u)))&&(a?h&&(h[c]!==void 0||h[u]!==void 0)&&(b[c]=Ti(a,s,c,void 0,e,!0)):delete b[c]);if(x!==s)for(const c in x)(!t||!pe(t,c))&&(delete x[c],d=!0)}d&&Ve(e.attrs,"set","")}function Sr(e,t,h,g){const[b,x]=e.propsOptions;let y=!1,s;if(t)for(let a in t){if(xt(a))continue;const d=t[a];let u;b&&pe(b,u=et(a))?!x||!x.includes(u)?h[u]=d:(s||(s={}))[u]=d:ri(e.emitsOptions,a)||(!(a in g)||d!==g[a])&&(g[a]=d,y=!0)}if(x){const a=ve(h),d=s||me;for(let u=0;u<x.length;u++){const c=x[u];h[c]=Ti(b,a,c,d[c],e,!pe(d,c))}}return y}function Ti(e,t,h,g,b,x){const y=e[h];if(y!=null){const s=pe(y,"default");if(s&&g===void 0){const a=y.default;if(y.type!==Function&&!y.skipFactory&&he(a)){const{propsDefaults:d}=b;if(h in d)g=d[h];else{const u=Wt(b);g=d[h]=a.call(null,t),u()}}else g=a;b.ce&&b.ce._setProp(h,g)}y[0]&&(x&&!s?g=!1:y[1]&&(g===""||g===lt(h))&&(g=!0))}return g}const ao=new WeakMap;function br(e,t,h=!1){const g=h?ao:t.propsCache,b=g.get(e);if(b)return b;const x=e.props,y={},s=[];let a=!1;if(!he(e)){const u=c=>{a=!0;const[f,v]=br(c,t,!0);ye(y,f),v&&s.push(...v)};!h&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!x&&!a)return Ce(e)&&g.set(e,ut),ut;if(le(x))for(let u=0;u<x.length;u++){const c=et(x[u]);ps(c)&&(y[c]=me)}else if(x)for(const u in x){const c=et(u);if(ps(c)){const f=x[u],v=y[c]=le(f)||he(f)?{type:f}:ye({},f),C=v.type;let _=!1,n=!0;if(le(C))for(let o=0;o<C.length;++o){const i=C[o],r=he(i)&&i.name;if(r==="Boolean"){_=!0;break}else r==="String"&&(n=!1)}else _=he(C)&&C.name==="Boolean";v[0]=_,v[1]=n,(_||pe(v,"default"))&&s.push(c)}}const d=[y,s];return Ce(e)&&g.set(e,d),d}function ps(e){return e[0]!=="$"&&!xt(e)}const Cr=e=>e[0]==="_"||e==="$stable",Qi=e=>le(e)?e.map(We):[We(e)],co=(e,t,h)=>{if(t._n)return t;const g=Pn((...b)=>Qi(t(...b)),h);return g._c=!1,g},wr=(e,t,h)=>{const g=e._ctx;for(const b in e){if(Cr(b))continue;const x=e[b];if(he(x))t[b]=co(b,x,g);else if(x!=null){const y=Qi(x);t[b]=()=>y}}},yr=(e,t)=>{const h=Qi(t);e.slots.default=()=>h},Er=(e,t,h)=>{for(const g in t)(h||g!=="_")&&(e[g]=t[g])},lo=(e,t,h)=>{const g=e.slots=gr();if(e.vnode.shapeFlag&32){const b=t._;b?(Er(g,t,h),h&&Ns(g,"_",b,!0)):wr(t,g)}else t&&yr(e,t)},ho=(e,t,h)=>{const{vnode:g,slots:b}=e;let x=!0,y=me;if(g.shapeFlag&32){const s=t._;s?h&&s===1?x=!1:Er(b,t,h):(x=!t.$stable,wr(t,b)),y=t}else t&&(yr(e,t),y={default:1});if(x)for(const s in b)!Cr(s)&&y[s]==null&&delete b[s]},Te=xo;function uo(e){return fo(e)}function fo(e,t){const h=ti();h.__VUE__=!0;const{insert:g,remove:b,patchProp:x,createElement:y,createText:s,createComment:a,setText:d,setElementText:u,parentNode:c,nextSibling:f,setScopeId:v=Ue,insertStaticContent:C}=e,_=(D,M,F,j=null,W=null,V=null,te=void 0,Q=null,Z=!!M.dynamicChildren)=>{if(D===M)return;D&&!wt(D,M)&&(j=H(D),P(D,W,V,!0),D=null),M.patchFlag===-2&&(Z=!1,M.dynamicChildren=null);const{type:J,ref:ne,shapeFlag:se}=M;switch(J){case ni:n(D,M,F,j);break;case Pt:o(D,M,F,j);break;case vi:D==null&&i(M,F,j,te);break;case qe:I(D,M,F,j,W,V,te,Q,Z);break;default:se&1?m(D,M,F,j,W,V,te,Q,Z):se&6?R(D,M,F,j,W,V,te,Q,Z):(se&64||se&128)&&J.process(D,M,F,j,W,V,te,Q,Z,$)}ne!=null&&W&&Xt(ne,D&&D.ref,V,M||D,!M)},n=(D,M,F,j)=>{if(D==null)g(M.el=s(M.children),F,j);else{const W=M.el=D.el;M.children!==D.children&&d(W,M.children)}},o=(D,M,F,j)=>{D==null?g(M.el=a(M.children||""),F,j):M.el=D.el},i=(D,M,F,j)=>{[D.el,D.anchor]=C(D.children,M,F,j,D.el,D.anchor)},r=({el:D,anchor:M},F,j)=>{let W;for(;D&&D!==M;)W=f(D),g(D,F,j),D=W;g(M,F,j)},l=({el:D,anchor:M})=>{let F;for(;D&&D!==M;)F=f(D),b(D),D=F;b(M)},m=(D,M,F,j,W,V,te,Q,Z)=>{M.type==="svg"?te="svg":M.type==="math"&&(te="mathml"),D==null?S(M,F,j,W,V,te,Q,Z):E(D,M,W,V,te,Q,Z)},S=(D,M,F,j,W,V,te,Q)=>{let Z,J;const{props:ne,shapeFlag:se,transition:re,dirs:ce}=D;if(Z=D.el=y(D.type,V,ne&&ne.is,ne),se&8?u(Z,D.children):se&16&&p(D.children,Z,null,j,W,fi(D,V),te,Q),ce&&st(D,null,j,"created"),w(Z,D,D.scopeId,te,j),ne){for(const ue in ne)ue!=="value"&&!xt(ue)&&x(Z,ue,null,ne[ue],V,j);"value"in ne&&x(Z,"value",null,ne.value,V),(J=ne.onVnodeBeforeMount)&&He(J,j,D)}ce&&st(D,null,j,"beforeMount");const de=_o(W,re);de&&re.beforeEnter(Z),g(Z,M,F),((J=ne&&ne.onVnodeMounted)||de||ce)&&Te(()=>{J&&He(J,j,D),de&&re.enter(Z),ce&&st(D,null,j,"mounted")},W)},w=(D,M,F,j,W)=>{if(F&&v(D,F),j)for(let V=0;V<j.length;V++)v(D,j[V]);if(W){let V=W.subTree;if(M===V||Ar(V.type)&&(V.ssContent===M||V.ssFallback===M)){const te=W.vnode;w(D,te,te.scopeId,te.slotScopeIds,W.parent)}}},p=(D,M,F,j,W,V,te,Q,Z=0)=>{for(let J=Z;J<D.length;J++){const ne=D[J]=Q?Ye(D[J]):We(D[J]);_(null,ne,M,F,j,W,V,te,Q)}},E=(D,M,F,j,W,V,te)=>{const Q=M.el=D.el;let{patchFlag:Z,dynamicChildren:J,dirs:ne}=M;Z|=D.patchFlag&16;const se=D.props||me,re=M.props||me;let ce;if(F&&rt(F,!1),(ce=re.onVnodeBeforeUpdate)&&He(ce,F,M,D),ne&&st(M,D,F,"beforeUpdate"),F&&rt(F,!0),(se.innerHTML&&re.innerHTML==null||se.textContent&&re.textContent==null)&&u(Q,""),J?T(D.dynamicChildren,J,Q,F,j,fi(M,W),V):te||z(D,M,Q,null,F,j,fi(M,W),V,!1),Z>0){if(Z&16)O(Q,se,re,F,W);else if(Z&2&&se.class!==re.class&&x(Q,"class",null,re.class,W),Z&4&&x(Q,"style",se.style,re.style,W),Z&8){const de=M.dynamicProps;for(let ue=0;ue<de.length;ue++){const _e=de[ue],Se=se[_e],be=re[_e];(be!==Se||_e==="value")&&x(Q,_e,Se,be,W,F)}}Z&1&&D.children!==M.children&&u(Q,M.children)}else!te&&J==null&&O(Q,se,re,F,W);((ce=re.onVnodeUpdated)||ne)&&Te(()=>{ce&&He(ce,F,M,D),ne&&st(M,D,F,"updated")},j)},T=(D,M,F,j,W,V,te)=>{for(let Q=0;Q<M.length;Q++){const Z=D[Q],J=M[Q],ne=Z.el&&(Z.type===qe||!wt(Z,J)||Z.shapeFlag&70)?c(Z.el):F;_(Z,J,ne,null,j,W,V,te,!0)}},O=(D,M,F,j,W)=>{if(M!==F){if(M!==me)for(const V in M)!xt(V)&&!(V in F)&&x(D,V,M[V],null,W,j);for(const V in F){if(xt(V))continue;const te=F[V],Q=M[V];te!==Q&&V!=="value"&&x(D,V,Q,te,W,j)}"value"in F&&x(D,"value",M.value,F.value,W)}},I=(D,M,F,j,W,V,te,Q,Z)=>{const J=M.el=D?D.el:s(""),ne=M.anchor=D?D.anchor:s("");let{patchFlag:se,dynamicChildren:re,slotScopeIds:ce}=M;ce&&(Q=Q?Q.concat(ce):ce),D==null?(g(J,F,j),g(ne,F,j),p(M.children||[],F,ne,W,V,te,Q,Z)):se>0&&se&64&&re&&D.dynamicChildren?(T(D.dynamicChildren,re,F,W,V,te,Q),(M.key!=null||W&&M===W.subTree)&&xr(D,M,!0)):z(D,M,F,ne,W,V,te,Q,Z)},R=(D,M,F,j,W,V,te,Q,Z)=>{M.slotScopeIds=Q,D==null?M.shapeFlag&512?W.ctx.activate(M,F,j,te,Z):N(M,F,j,W,V,te,Z):U(D,M,Z)},N=(D,M,F,j,W,V,te)=>{const Q=D.component=Po(D,j,W);if(dr(D)&&(Q.ctx.renderer=$),Io(Q,!1,te),Q.asyncDep){if(W&&W.registerDep(Q,q,te),!D.el){const Z=Q.subTree=Qe(Pt);o(null,Z,M,F)}}else q(Q,D,M,F,W,V,te)},U=(D,M,F)=>{const j=M.component=D.component;if(yo(D,M,F))if(j.asyncDep&&!j.asyncResolved){Y(j,M,F);return}else j.next=M,j.update();else M.el=D.el,j.vnode=M},q=(D,M,F,j,W,V,te)=>{const Q=()=>{if(D.isMounted){let{next:se,bu:re,u:ce,parent:de,vnode:ue}=D;{const xe=Lr(D);if(xe){se&&(se.el=ue.el,Y(D,se,te)),xe.asyncDep.then(()=>{D.isUnmounted||Q()});return}}let _e=se,Se;rt(D,!1),se?(se.el=ue.el,Y(D,se,te)):se=ue,re&&ci(re),(Se=se.props&&se.props.onVnodeBeforeUpdate)&&He(Se,de,se,ue),rt(D,!0);const be=pi(D),fe=D.subTree;D.subTree=be,_(fe,be,c(fe.el),H(fe),D,W,V),se.el=be.el,_e===null&&Eo(D,be.el),ce&&Te(ce,W),(Se=se.props&&se.props.onVnodeUpdated)&&Te(()=>He(Se,de,se,ue),W)}else{let se;const{el:re,props:ce}=M,{bm:de,m:ue,parent:_e,root:Se,type:be}=D,fe=Rt(M);if(rt(D,!1),de&&ci(de),!fe&&(se=ce&&ce.onVnodeBeforeMount)&&He(se,_e,M),rt(D,!0),re&&K){const xe=()=>{D.subTree=pi(D),K(re,D.subTree,D,W,null)};fe&&be.__asyncHydrate?be.__asyncHydrate(re,D,xe):xe()}else{Se.ce&&Se.ce._injectChildStyle(be);const xe=D.subTree=pi(D);_(null,xe,F,j,D,W,V),M.el=xe.el}if(ue&&Te(ue,W),!fe&&(se=ce&&ce.onVnodeMounted)){const xe=M;Te(()=>He(se,_e,xe),W)}(M.shapeFlag&256||_e&&Rt(_e.vnode)&&_e.vnode.shapeFlag&256)&&D.a&&Te(D.a,W),D.isMounted=!0,M=F=j=null}};D.scope.on();const Z=D.effect=new $s(Q);D.scope.off();const J=D.update=Z.run.bind(Z),ne=D.job=Z.runIfDirty.bind(Z);ne.i=D,ne.id=D.uid,Z.scheduler=()=>Xi(ne),rt(D,!0),J()},Y=(D,M,F)=>{M.component=D;const j=D.vnode.props;D.vnode=M,D.next=null,oo(D,M.props,j,F),ho(D,M.children,F),tt(),hs(D),it()},z=(D,M,F,j,W,V,te,Q,Z=!1)=>{const J=D&&D.children,ne=D?D.shapeFlag:0,se=M.children,{patchFlag:re,shapeFlag:ce}=M;if(re>0){if(re&128){A(J,se,F,j,W,V,te,Q,Z);return}else if(re&256){L(J,se,F,j,W,V,te,Q,Z);return}}ce&8?(ne&16&&ae(J,W,V),se!==J&&u(F,se)):ne&16?ce&16?A(J,se,F,j,W,V,te,Q,Z):ae(J,W,V,!0):(ne&8&&u(F,""),ce&16&&p(se,F,j,W,V,te,Q,Z))},L=(D,M,F,j,W,V,te,Q,Z)=>{D=D||ut,M=M||ut;const J=D.length,ne=M.length,se=Math.min(J,ne);let re;for(re=0;re<se;re++){const ce=M[re]=Z?Ye(M[re]):We(M[re]);_(D[re],ce,F,null,W,V,te,Q,Z)}J>ne?ae(D,W,V,!0,!1,se):p(M,F,j,W,V,te,Q,Z,se)},A=(D,M,F,j,W,V,te,Q,Z)=>{let J=0;const ne=M.length;let se=D.length-1,re=ne-1;for(;J<=se&&J<=re;){const ce=D[J],de=M[J]=Z?Ye(M[J]):We(M[J]);if(wt(ce,de))_(ce,de,F,null,W,V,te,Q,Z);else break;J++}for(;J<=se&&J<=re;){const ce=D[se],de=M[re]=Z?Ye(M[re]):We(M[re]);if(wt(ce,de))_(ce,de,F,null,W,V,te,Q,Z);else break;se--,re--}if(J>se){if(J<=re){const ce=re+1,de=ce<ne?M[ce].el:j;for(;J<=re;)_(null,M[J]=Z?Ye(M[J]):We(M[J]),F,de,W,V,te,Q,Z),J++}}else if(J>re)for(;J<=se;)P(D[J],W,V,!0),J++;else{const ce=J,de=J,ue=new Map;for(J=de;J<=re;J++){const Ae=M[J]=Z?Ye(M[J]):We(M[J]);Ae.key!=null&&ue.set(Ae.key,J)}let _e,Se=0;const be=re-de+1;let fe=!1,xe=0;const mt=new Array(be);for(J=0;J<be;J++)mt[J]=0;for(J=ce;J<=se;J++){const Ae=D[J];if(Se>=be){P(Ae,W,V,!0);continue}let Ie;if(Ae.key!=null)Ie=ue.get(Ae.key);else for(_e=de;_e<=re;_e++)if(mt[_e-de]===0&&wt(Ae,M[_e])){Ie=_e;break}Ie===void 0?P(Ae,W,V,!0):(mt[Ie-de]=J+1,Ie>=xe?xe=Ie:fe=!0,_(Ae,M[Ie],F,null,W,V,te,Q,Z),Se++)}const ss=fe?po(mt):ut;for(_e=ss.length-1,J=be-1;J>=0;J--){const Ae=de+J,Ie=M[Ae],rs=Ae+1<ne?M[Ae+1].el:j;mt[J]===0?_(null,Ie,F,rs,W,V,te,Q,Z):fe&&(_e<0||J!==ss[_e]?B(Ie,F,rs,2):_e--)}}},B=(D,M,F,j,W=null)=>{const{el:V,type:te,transition:Q,children:Z,shapeFlag:J}=D;if(J&6){B(D.component.subTree,M,F,j);return}if(J&128){D.suspense.move(M,F,j);return}if(J&64){te.move(D,M,F,$);return}if(te===qe){g(V,M,F);for(let se=0;se<Z.length;se++)B(Z[se],M,F,j);g(D.anchor,M,F);return}if(te===vi){r(D,M,F);return}if(j!==2&&J&1&&Q)if(j===0)Q.beforeEnter(V),g(V,M,F),Te(()=>Q.enter(V),W);else{const{leave:se,delayLeave:re,afterLeave:ce}=Q,de=()=>g(V,M,F),ue=()=>{se(V,()=>{de(),ce&&ce()})};re?re(V,de,ue):ue()}else g(V,M,F)},P=(D,M,F,j=!1,W=!1)=>{const{type:V,props:te,ref:Q,children:Z,dynamicChildren:J,shapeFlag:ne,patchFlag:se,dirs:re,cacheIndex:ce}=D;if(se===-2&&(W=!1),Q!=null&&Xt(Q,null,F,D,!0),ce!=null&&(M.renderCache[ce]=void 0),ne&256){M.ctx.deactivate(D);return}const de=ne&1&&re,ue=!Rt(D);let _e;if(ue&&(_e=te&&te.onVnodeBeforeUnmount)&&He(_e,M,D),ne&6)oe(D.component,F,j);else{if(ne&128){D.suspense.unmount(F,j);return}de&&st(D,null,M,"beforeUnmount"),ne&64?D.type.remove(D,M,F,$,j):J&&!J.hasOnce&&(V!==qe||se>0&&se&64)?ae(J,M,F,!1,!0):(V===qe&&se&384||!W&&ne&16)&&ae(Z,M,F),j&&G(D)}(ue&&(_e=te&&te.onVnodeUnmounted)||de)&&Te(()=>{_e&&He(_e,M,D),de&&st(D,null,M,"unmounted")},F)},G=D=>{const{type:M,el:F,anchor:j,transition:W}=D;if(M===qe){ee(F,j);return}if(M===vi){l(D);return}const V=()=>{b(F),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(D.shapeFlag&1&&W&&!W.persisted){const{leave:te,delayLeave:Q}=W,Z=()=>te(F,V);Q?Q(D.el,V,Z):Z()}else V()},ee=(D,M)=>{let F;for(;D!==M;)F=f(D),b(D),D=F;b(M)},oe=(D,M,F)=>{const{bum:j,scope:W,job:V,subTree:te,um:Q,m:Z,a:J}=D;vs(Z),vs(J),j&&ci(j),W.stop(),V&&(V.flags|=8,P(te,D,M,F)),Q&&Te(Q,M),Te(()=>{D.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},ae=(D,M,F,j=!1,W=!1,V=0)=>{for(let te=V;te<D.length;te++)P(D[te],M,F,j,W)},H=D=>{if(D.shapeFlag&6)return H(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const M=f(D.anchor||D.el),F=M&&M[In];return F?f(F):M};let k=!1;const X=(D,M,F)=>{D==null?M._vnode&&P(M._vnode,null,null,!0):_(M._vnode||null,D,M,null,null,null,F),M._vnode=D,k||(k=!0,hs(),ar(),k=!1)},$={p:_,um:P,m:B,r:G,mt:N,mc:p,pc:z,pbc:T,n:H,o:e};let ie,K;return{render:X,hydrate:ie,createApp:so(X,ie)}}function fi({type:e,props:t},h){return h==="svg"&&e==="foreignObject"||h==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:h}function rt({effect:e,job:t},h){h?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function _o(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function xr(e,t,h=!1){const g=e.children,b=t.children;if(le(g)&&le(b))for(let x=0;x<g.length;x++){const y=g[x];let s=b[x];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=b[x]=Ye(b[x]),s.el=y.el),!h&&s.patchFlag!==-2&&xr(y,s)),s.type===ni&&(s.el=y.el)}}function po(e){const t=e.slice(),h=[0];let g,b,x,y,s;const a=e.length;for(g=0;g<a;g++){const d=e[g];if(d!==0){if(b=h[h.length-1],e[b]<d){t[g]=b,h.push(g);continue}for(x=0,y=h.length-1;x<y;)s=x+y>>1,e[h[s]]<d?x=s+1:y=s;d<e[h[x]]&&(x>0&&(t[g]=h[x-1]),h[x]=g)}}for(x=h.length,y=h[x-1];x-- >0;)h[x]=y,y=t[y];return h}function Lr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Lr(t)}function vs(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const vo=Symbol.for("v-scx"),go=()=>jt(vo);function _i(e,t,h){return kr(e,t,h)}function kr(e,t,h=me){const{immediate:g,deep:b,flush:x,once:y}=h,s=ye({},h),a=t&&g||!t&&x!=="post";let d;if(Ht){if(x==="sync"){const v=go();d=v.__watcherHandles||(v.__watcherHandles=[])}else if(!a){const v=()=>{};return v.stop=Ue,v.resume=Ue,v.pause=Ue,v}}const u=De;s.call=(v,C,_)=>je(v,u,C,_);let c=!1;x==="post"?s.scheduler=v=>{Te(v,u&&u.suspense)}:x!=="sync"&&(c=!0,s.scheduler=(v,C)=>{C?v():Xi(v)}),s.augmentJob=v=>{t&&(v.flags|=4),c&&(v.flags|=2,u&&(v.id=u.uid,v.i=u))};const f=An(e,t,s);return Ht&&(d?d.push(f):a&&f()),f}function mo(e,t,h){const g=this.proxy,b=we(e)?e.includes(".")?Dr(g,e):()=>g[e]:e.bind(g,g);let x;he(t)?x=t:(x=t.handler,h=t);const y=Wt(this),s=kr(b,x.bind(g),h);return y(),s}function Dr(e,t){const h=t.split(".");return()=>{let g=e;for(let b=0;b<h.length&&g;b++)g=g[h[b]];return g}}const So=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e["".concat(t,"Modifiers")]||e["".concat(et(t),"Modifiers")]||e["".concat(lt(t),"Modifiers")];function bo(e,t,...h){if(e.isUnmounted)return;const g=e.vnode.props||me;let b=h;const x=t.startsWith("update:"),y=x&&So(g,t.slice(7));y&&(y.trim&&(b=h.map(u=>we(u)?u.trim():u)),y.number&&(b=h.map(Xr)));let s,a=g[s=ai(t)]||g[s=ai(et(t))];!a&&x&&(a=g[s=ai(lt(t))]),a&&je(a,e,6,b);const d=g[s+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,je(d,e,6,b)}}function Rr(e,t,h=!1){const g=t.emitsCache,b=g.get(e);if(b!==void 0)return b;const x=e.emits;let y={},s=!1;if(!he(e)){const a=d=>{const u=Rr(d,t,!0);u&&(s=!0,ye(y,u))};!h&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!x&&!s?(Ce(e)&&g.set(e,null),null):(le(x)?x.forEach(a=>y[a]=null):ye(y,x),Ce(e)&&g.set(e,y),y)}function ri(e,t){return!e||!Zt(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,lt(t))||pe(e,t))}function pi(e){const{type:t,vnode:h,proxy:g,withProxy:b,propsOptions:[x],slots:y,attrs:s,emit:a,render:d,renderCache:u,props:c,data:f,setupState:v,ctx:C,inheritAttrs:_}=e,n=Gt(e);let o,i;try{if(h.shapeFlag&4){const l=b||g,m=l;o=We(d.call(m,l,u,c,v,f,C)),i=s}else{const l=t;o=We(l.length>1?l(c,{attrs:s,slots:y,emit:a}):l(c,null)),i=t.props?s:Co(s)}}catch(l){Tt.length=0,ii(l,e,1),o=Qe(Pt)}let r=o;if(i&&_!==!1){const l=Object.keys(i),{shapeFlag:m}=r;l.length&&m&7&&(x&&l.some(Ii)&&(i=wo(i,x)),r=vt(r,i,!1,!0))}return h.dirs&&(r=vt(r,null,!1,!0),r.dirs=r.dirs?r.dirs.concat(h.dirs):h.dirs),h.transition&&Ji(r,h.transition),o=r,Gt(n),o}const Co=e=>{let t;for(const h in e)(h==="class"||h==="style"||Zt(h))&&((t||(t={}))[h]=e[h]);return t},wo=(e,t)=>{const h={};for(const g in e)(!Ii(g)||!(g.slice(9)in t))&&(h[g]=e[g]);return h};function yo(e,t,h){const{props:g,children:b,component:x}=e,{props:y,children:s,patchFlag:a}=t,d=x.emitsOptions;if(t.dirs||t.transition)return!0;if(h&&a>=0){if(a&1024)return!0;if(a&16)return g?gs(g,y,d):!!y;if(a&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const f=u[c];if(y[f]!==g[f]&&!ri(d,f))return!0}}}else return(b||s)&&(!s||!s.$stable)?!0:g===y?!1:g?y?gs(g,y,d):!0:!!y;return!1}function gs(e,t,h){const g=Object.keys(t);if(g.length!==Object.keys(e).length)return!0;for(let b=0;b<g.length;b++){const x=g[b];if(t[x]!==e[x]&&!ri(h,x))return!0}return!1}function Eo({vnode:e,parent:t},h){for(;t;){const g=t.subTree;if(g.suspense&&g.suspense.activeBranch===e&&(g.el=e.el),g===e)(e=t.vnode).el=h,t=t.parent;else break}}const Ar=e=>e.__isSuspense;function xo(e,t){t&&t.pendingBranch?le(e)?t.effects.push(...e):t.effects.push(e):On(e)}const qe=Symbol.for("v-fgt"),ni=Symbol.for("v-txt"),Pt=Symbol.for("v-cmt"),vi=Symbol.for("v-stc"),Tt=[];let Oe=null;function Tr(e=!1){Tt.push(Oe=e?null:[])}function Lo(){Tt.pop(),Oe=Tt[Tt.length-1]||null}let It=1;function ms(e,t=!1){It+=e,e<0&&Oe&&t&&(Oe.hasOnce=!0)}function Br(e){return e.dynamicChildren=It>0?Oe||ut:null,Lo(),It>0&&Oe&&Oe.push(e),e}function ko(e,t,h,g,b,x){return Br(es(e,t,h,g,b,x,!0))}function Do(e,t,h,g,b){return Br(Qe(e,t,h,g,b,!0))}function Mr(e){return e?e.__v_isVNode===!0:!1}function wt(e,t){return e.type===t.type&&e.key===t.key}const Or=({key:e})=>e!=null?e:null,zt=({ref:e,ref_key:t,ref_for:h})=>(typeof e=="number"&&(e=""+e),e!=null?we(e)||Re(e)||he(e)?{i:Ne,r:e,k:t,f:!!h}:e:null);function es(e,t=null,h=null,g=0,b=null,x=e===qe?0:1,y=!1,s=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Or(t),ref:t&&zt(t),scopeId:lr,slotScopeIds:null,children:h,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:g,dynamicProps:b,dynamicChildren:null,appContext:null,ctx:Ne};return s?(ts(a,h),x&128&&e.normalize(a)):h&&(a.shapeFlag|=we(h)?8:16),It>0&&!y&&Oe&&(a.patchFlag>0||x&6)&&a.patchFlag!==32&&Oe.push(a),a}const Qe=Ro;function Ro(e,t=null,h=null,g=0,b=null,x=!1){if((!e||e===Xn)&&(e=Pt),Mr(e)){const s=vt(e,t,!0);return h&&ts(s,h),It>0&&!x&&Oe&&(s.shapeFlag&6?Oe[Oe.indexOf(e)]=s:Oe.push(s)),s.patchFlag=-2,s}if(No(e)&&(e=e.__vccOpts),t){t=Ao(t);let{class:s,style:a}=t;s&&!we(s)&&(t.class=Ni(s)),Ce(a)&&(Gi(a)&&!le(a)&&(a=ye({},a)),t.style=Wi(a))}const y=we(e)?1:Ar(e)?128:Hn(e)?64:Ce(e)?4:he(e)?2:0;return es(e,t,h,g,b,y,x,!0)}function Ao(e){return e?Gi(e)||mr(e)?ye({},e):e:null}function vt(e,t,h=!1,g=!1){const{props:b,ref:x,patchFlag:y,children:s,transition:a}=e,d=t?Bo(b||{},t):b,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Or(d),ref:t&&t.ref?h&&x?le(x)?x.concat(zt(t)):[x,zt(t)]:zt(t):x,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==qe?y===-1?16:y|16:y,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vt(e.ssContent),ssFallback:e.ssFallback&&vt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&g&&Ji(u,a.clone(u)),u}function To(e=" ",t=0){return Qe(ni,null,e,t)}function We(e){return e==null||typeof e=="boolean"?Qe(Pt):le(e)?Qe(qe,null,e.slice()):Mr(e)?Ye(e):Qe(ni,null,String(e))}function Ye(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vt(e)}function ts(e,t){let h=0;const{shapeFlag:g}=e;if(t==null)t=null;else if(le(t))h=16;else if(typeof t=="object")if(g&65){const b=t.default;b&&(b._c&&(b._d=!1),ts(e,b()),b._c&&(b._d=!0));return}else{h=32;const b=t._;!b&&!mr(t)?t._ctx=Ne:b===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:Ne},h=32):(t=String(t),g&64?(h=16,t=[To(t)]):h=8);e.children=t,e.shapeFlag|=h}function Bo(...e){const t={};for(let h=0;h<e.length;h++){const g=e[h];for(const b in g)if(b==="class")t.class!==g.class&&(t.class=Ni([t.class,g.class]));else if(b==="style")t.style=Wi([t.style,g.style]);else if(Zt(b)){const x=t[b],y=g[b];y&&x!==y&&!(le(x)&&x.includes(y))&&(t[b]=x?[].concat(x,y):y)}else b!==""&&(t[b]=g[b])}return t}function He(e,t,h,g=null){je(e,t,7,[h,g])}const Mo=pr();let Oo=0;function Po(e,t,h){const g=e.type,b=(t?t.appContext:e.appContext)||Mo,x={uid:Oo++,vnode:e,type:g,parent:t,appContext:b,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new sn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(b.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:br(g,b),emitsOptions:Rr(g,b),emit:null,emitted:null,propsDefaults:me,inheritAttrs:g.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:h,suspenseId:h?h.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=t?t.root:x,x.emit=bo.bind(null,x),e.ce&&e.ce(x),x}let De=null,Yt,Bi;{const e=ti(),t=(h,g)=>{let b;return(b=e[h])||(b=e[h]=[]),b.push(g),x=>{b.length>1?b.forEach(y=>y(x)):b[0](x)}};Yt=t("__VUE_INSTANCE_SETTERS__",h=>De=h),Bi=t("__VUE_SSR_SETTERS__",h=>Ht=h)}const Wt=e=>{const t=De;return Yt(e),e.scope.on(),()=>{e.scope.off(),Yt(t)}},Ss=()=>{De&&De.scope.off(),Yt(null)};function Pr(e){return e.vnode.shapeFlag&4}let Ht=!1;function Io(e,t=!1,h=!1){t&&Bi(t);const{props:g,children:b}=e.vnode,x=Pr(e);no(e,g,x,t),lo(e,b,h);const y=x?Ho(e,t):void 0;return t&&Bi(!1),y}function Ho(e,t){const h=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Jn);const{setup:g}=h;if(g){tt();const b=e.setupContext=g.length>1?Wo(e):null,x=Wt(e),y=Ft(g,e,0,[e.props,b]),s=Fs(y);if(it(),x(),(s||e.sp)&&!Rt(e)&&hr(e),s){if(y.then(Ss,Ss),t)return y.then(a=>{bs(e,a,t)}).catch(a=>{ii(a,e,0)});e.asyncDep=y}else bs(e,y,t)}else Ir(e,t)}function bs(e,t,h){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=rr(t)),Ir(e,h)}let Cs;function Ir(e,t,h){const g=e.type;if(!e.render){if(!t&&Cs&&!g.render){const b=g.template||Zi(e).template;if(b){const{isCustomElement:x,compilerOptions:y}=e.appContext.config,{delimiters:s,compilerOptions:a}=g,d=ye(ye({isCustomElement:x,delimiters:s},y),a);g.render=Cs(b,d)}}e.render=g.render||Ue}{const b=Wt(e);tt();try{Yn(e)}finally{it(),b()}}}const Fo={get(e,t){return Ee(e,"get",""),e[t]}};function Wo(e){const t=h=>{e.exposed=h||{}};return{attrs:new Proxy(e.attrs,Fo),slots:e.slots,emit:e.emit,expose:t}}function is(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(rr(En(e.exposed)),{get(t,h){if(h in t)return t[h];if(h in At)return At[h](e)},has(t,h){return h in t||h in At}})):e.proxy}function No(e){return he(e)&&"__vccOpts"in e}const Uo=(e,t)=>Dn(e,t,Ht),$o="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mi;const ws=typeof window<"u"&&window.trustedTypes;if(ws)try{Mi=ws.createPolicy("vue",{createHTML:e=>e})}catch(e){}const Hr=Mi?e=>Mi.createHTML(e):e=>e,jo="http://www.w3.org/2000/svg",zo="http://www.w3.org/1998/Math/MathML",Ke=typeof document<"u"?document:null,ys=Ke&&Ke.createElement("template"),Ko={insert:(e,t,h)=>{t.insertBefore(e,h||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,h,g)=>{const b=t==="svg"?Ke.createElementNS(jo,e):t==="mathml"?Ke.createElementNS(zo,e):h?Ke.createElement(e,{is:h}):Ke.createElement(e);return e==="select"&&g&&g.multiple!=null&&b.setAttribute("multiple",g.multiple),b},createText:e=>Ke.createTextNode(e),createComment:e=>Ke.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ke.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,h,g,b,x){const y=h?h.previousSibling:t.lastChild;if(b&&(b===x||b.nextSibling))for(;t.insertBefore(b.cloneNode(!0),h),!(b===x||!(b=b.nextSibling)););else{ys.innerHTML=Hr(g==="svg"?"<svg>".concat(e,"</svg>"):g==="mathml"?"<math>".concat(e,"</math>"):e);const s=ys.content;if(g==="svg"||g==="mathml"){const a=s.firstChild;for(;a.firstChild;)s.appendChild(a.firstChild);s.removeChild(a)}t.insertBefore(s,h)}return[y?y.nextSibling:t.firstChild,h?h.previousSibling:t.lastChild]}},qo=Symbol("_vtc");function Vo(e,t,h){const g=e[qo];g&&(t=(t?[t,...g]:[...g]).join(" ")),t==null?e.removeAttribute("class"):h?e.setAttribute("class",t):e.className=t}const Es=Symbol("_vod"),Go=Symbol("_vsh"),Xo=Symbol(""),Jo=/(^|;)\s*display\s*:/;function Yo(e,t,h){const g=e.style,b=we(h);let x=!1;if(h&&!b){if(t)if(we(t))for(const y of t.split(";")){const s=y.slice(0,y.indexOf(":")).trim();h[s]==null&&Kt(g,s,"")}else for(const y in t)h[y]==null&&Kt(g,y,"");for(const y in h)y==="display"&&(x=!0),Kt(g,y,h[y])}else if(b){if(t!==h){const y=g[Xo];y&&(h+=";"+y),g.cssText=h,x=Jo.test(h)}}else t&&e.removeAttribute("style");Es in e&&(e[Es]=x?g.display:"",e[Go]&&(g.display="none"))}const xs=/\s*!important$/;function Kt(e,t,h){if(le(h))h.forEach(g=>Kt(e,t,g));else if(h==null&&(h=""),t.startsWith("--"))e.setProperty(t,h);else{const g=Zo(e,t);xs.test(h)?e.setProperty(lt(g),h.replace(xs,""),"important"):e[g]=h}}const Ls=["Webkit","Moz","ms"],gi={};function Zo(e,t){const h=gi[t];if(h)return h;let g=et(t);if(g!=="filter"&&g in e)return gi[t]=g;g=Ws(g);for(let b=0;b<Ls.length;b++){const x=Ls[b]+g;if(x in e)return gi[t]=x}return t}const ks="http://www.w3.org/1999/xlink";function Ds(e,t,h,g,b,x=tn(t)){g&&t.startsWith("xlink:")?h==null?e.removeAttributeNS(ks,t.slice(6,t.length)):e.setAttributeNS(ks,t,h):h==null||x&&!Us(h)?e.removeAttribute(t):e.setAttribute(t,x?"":gt(h)?String(h):h)}function Rs(e,t,h,g,b){if(t==="innerHTML"||t==="textContent"){h!=null&&(e[t]=t==="innerHTML"?Hr(h):h);return}const x=e.tagName;if(t==="value"&&x!=="PROGRESS"&&!x.includes("-")){const s=x==="OPTION"?e.getAttribute("value")||"":e.value,a=h==null?e.type==="checkbox"?"on":"":String(h);(s!==a||!("_value"in e))&&(e.value=a),h==null&&e.removeAttribute(t),e._value=h;return}let y=!1;if(h===""||h==null){const s=typeof e[t];s==="boolean"?h=Us(h):h==null&&s==="string"?(h="",y=!0):s==="number"&&(h=0,y=!0)}try{e[t]=h}catch(s){}y&&e.removeAttribute(b||t)}function Qo(e,t,h,g){e.addEventListener(t,h,g)}function ea(e,t,h,g){e.removeEventListener(t,h,g)}const As=Symbol("_vei");function ta(e,t,h,g,b=null){const x=e[As]||(e[As]={}),y=x[t];if(g&&y)y.value=g;else{const[s,a]=ia(t);if(g){const d=x[t]=na(g,b);Qo(e,s,d,a)}else y&&(ea(e,s,y,a),x[t]=void 0)}}const Ts=/(?:Once|Passive|Capture)$/;function ia(e){let t;if(Ts.test(e)){t={};let g;for(;g=e.match(Ts);)e=e.slice(0,e.length-g[0].length),t[g[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):lt(e.slice(2)),t]}let mi=0;const sa=Promise.resolve(),ra=()=>mi||(sa.then(()=>mi=0),mi=Date.now());function na(e,t){const h=g=>{if(!g._vts)g._vts=Date.now();else if(g._vts<=h.attached)return;je(oa(g,h.value),t,5,[g])};return h.value=e,h.attached=ra(),h}function oa(e,t){if(le(t)){const h=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{h.call(e),e._stopped=!0},t.map(g=>b=>!b._stopped&&g&&g(b))}else return t}const Bs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,aa=(e,t,h,g,b,x)=>{const y=b==="svg";t==="class"?Vo(e,g,y):t==="style"?Yo(e,h,g):Zt(t)?Ii(t)||ta(e,t,h,g,x):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ca(e,t,g,y))?(Rs(e,t,g),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ds(e,t,g,y,x,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!we(g))?Rs(e,et(t),g,x,t):(t==="true-value"?e._trueValue=g:t==="false-value"&&(e._falseValue=g),Ds(e,t,g,y))};function ca(e,t,h,g){if(g)return!!(t==="innerHTML"||t==="textContent"||t in e&&Bs(t)&&he(h));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const b=e.tagName;if(b==="IMG"||b==="VIDEO"||b==="CANVAS"||b==="SOURCE")return!1}return Bs(t)&&we(h)?!1:t in e}const la=ye({patchProp:aa},Ko);let Ms;function ha(){return Ms||(Ms=uo(la))}const da=(...e)=>{const t=ha().createApp(...e),{mount:h}=t;return t.mount=g=>{const b=fa(g);if(!b)return;const x=t._component;!he(x)&&!x.render&&!x.template&&(x.template=b.innerHTML),b.nodeType===1&&(b.textContent="");const y=h(b,!1,ua(b));return b instanceof Element&&(b.removeAttribute("v-cloak"),b.setAttribute("data-v-app","")),y},t};function ua(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function fa(e){return we(e)?document.querySelector(e):e}var Si={exports:{}},Os;function _a(){return Os||(Os=1,function(e,t){(function(h,g){e.exports=g()})(globalThis,()=>(()=>{var h={4567:function(y,s,a){var d=this&&this.__decorate||function(i,r,l,m){var S,w=arguments.length,p=w<3?r:m===null?m=Object.getOwnPropertyDescriptor(r,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(i,r,l,m);else for(var E=i.length-1;E>=0;E--)(S=i[E])&&(p=(w<3?S(p):w>3?S(r,l,p):S(r,l))||p);return w>3&&p&&Object.defineProperty(r,l,p),p},u=this&&this.__param||function(i,r){return function(l,m){r(l,m,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const c=a(9042),f=a(9924),v=a(844),C=a(4725),_=a(2585),n=a(3656);let o=s.AccessibilityManager=class extends v.Disposable{constructor(i,r,l,m){super(),this._terminal=i,this._coreBrowserService=l,this._renderService=m,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,v.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(i){for(let r=0;r<i;r++)this._handleChar(" ")}_handleChar(i){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i==="\n"&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(i){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(i)||this._charsToConsume.push(i)}_refreshRows(i,r){this._liveRegionDebouncer.refresh(i,r,this._terminal.rows)}_renderRows(i,r){const l=this._terminal.buffer,m=l.lines.length.toString();for(let S=i;S<=r;S++){const w=l.lines.get(l.ydisp+S),p=[],E=(w==null?void 0:w.translateToString(!0,void 0,void 0,p))||"",T=(l.ydisp+S+1).toString(),O=this._rowElements[S];O&&(E.length===0?(O.innerText=" ",this._rowColumns.set(O,[0,1])):(O.textContent=E,this._rowColumns.set(O,p)),O.setAttribute("aria-posinset",T),O.setAttribute("aria-setsize",m))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(i,r){const l=i.target,m=this._rowElements[r===0?1:this._rowElements.length-2];if(l.getAttribute("aria-posinset")===(r===0?"1":"".concat(this._terminal.buffer.lines.length))||i.relatedTarget!==m)return;let S,w;if(r===0?(S=l,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(S=this._rowElements.shift(),w=l,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){const p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{const p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}_handleSelectionChange(){var E,T;if(this._rowElements.length===0)return;const i=document.getSelection();if(!i)return;if(i.isCollapsed)return void(this._rowContainer.contains(i.anchorNode)&&this._terminal.clearSelection());if(!i.anchorNode||!i.focusNode)return void console.error("anchorNode and/or focusNode are null");let r={node:i.anchorNode,offset:i.anchorOffset},l={node:i.focusNode,offset:i.focusOffset};if((r.node.compareDocumentPosition(l.node)&Node.DOCUMENT_POSITION_PRECEDING||r.node===l.node&&r.offset>l.offset)&&([r,l]=[l,r]),r.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(r={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(r.node))return;const m=this._rowElements.slice(-1)[0];if(l.node.compareDocumentPosition(m)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(l={node:m,offset:(T=(E=m.textContent)==null?void 0:E.length)!=null?T:0}),!this._rowContainer.contains(l.node))return;const S=({node:O,offset:I})=>{const R=O instanceof Text?O.parentNode:O;let N=parseInt(R==null?void 0:R.getAttribute("aria-posinset"),10)-1;if(isNaN(N))return console.warn("row is invalid. Race condition?"),null;const U=this._rowColumns.get(R);if(!U)return console.warn("columns is null. Race condition?"),null;let q=I<U.length?U[I]:U.slice(-1)[0]+1;return q>=this._terminal.cols&&(++N,q=0),{row:N,column:q}},w=S(r),p=S(l);if(w&&p){if(w.row>p.row||w.row===p.row&&w.column>=p.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(p.row-w.row)*this._terminal.cols-w.column+p.column)}}_handleResize(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const i=this._coreBrowserService.mainDocument.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width="".concat(this._renderService.dimensions.css.canvas.width,"px"),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}}_refreshRowDimensions(i){i.style.height="".concat(this._renderService.dimensions.css.cell.height,"px")}};s.AccessibilityManager=o=d([u(1,_.IInstantiationService),u(2,C.ICoreBrowserService),u(3,C.IRenderService)],o)},3614:(y,s)=>{function a(f){return f.replace(/\r?\n/g,"\r")}function d(f,v){return v?"\x1B[200~"+f+"\x1B[201~":f}function u(f,v,C,_){f=d(f=a(f),C.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(f,!0),v.value=""}function c(f,v,C){const _=C.getBoundingClientRect(),n=f.clientX-_.left-10,o=f.clientY-_.top-10;v.style.width="20px",v.style.height="20px",v.style.left="".concat(n,"px"),v.style.top="".concat(o,"px"),v.style.zIndex="1000",v.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=d,s.copyHandler=function(f,v){f.clipboardData&&f.clipboardData.setData("text/plain",v.selectionText),f.preventDefault()},s.handlePasteEvent=function(f,v,C,_){f.stopPropagation(),f.clipboardData&&u(f.clipboardData.getData("text/plain"),v,C,_)},s.paste=u,s.moveTextAreaUnderMouseCursor=c,s.rightClickHandler=function(f,v,C,_,n){c(f,v,C),n&&_.rightClickSelect(f),v.value=_.selectionText,v.select()}},7239:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const d=a(1505);s.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(u,c,f){this._css.set(u,c,f)}getCss(u,c){return this._css.get(u,c)}setColor(u,c,f){this._color.set(u,c,f)}getColor(u,c){return this._color.get(u,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,u,c){a.addEventListener(d,u,c);let f=!1;return{dispose:()=>{f||(f=!0,a.removeEventListener(d,u,c))}}}},3551:function(y,s,a){var d=this&&this.__decorate||function(o,i,r,l){var m,S=arguments.length,w=S<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,r):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,i,r,l);else for(var p=o.length-1;p>=0;p--)(m=o[p])&&(w=(S<3?m(w):S>3?m(i,r,w):m(i,r))||w);return S>3&&w&&Object.defineProperty(i,r,w),w},u=this&&this.__param||function(o,i){return function(r,l){i(r,l,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;const c=a(3656),f=a(8460),v=a(844),C=a(2585),_=a(4725);let n=s.Linkifier=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(o,i,r,l,m){super(),this._element=o,this._mouseService=i,this._renderService=r,this._bufferService=l,this._linkProviderService=m,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new f.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new f.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{var S;this._lastMouseEvent=void 0,(S=this._activeProviderReplies)==null||S.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){this._lastMouseEvent=o;const i=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;const r=o.composedPath();for(let l=0;l<r.length;l++){const m=r[l];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,i){var l,m;this._activeProviderReplies&&i||((l=this._activeProviderReplies)==null||l.forEach(S=>{S==null||S.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let r=!1;for(const[S,w]of this._linkProviderService.linkProviders.entries())i?(m=this._activeProviderReplies)!=null&&m.get(S)&&(r=this._checkLinkProviderResult(S,o,r)):w.provideLinks(o.y,p=>{var T,O;if(this._isMouseOut)return;const E=p==null?void 0:p.map(I=>({link:I}));(T=this._activeProviderReplies)==null||T.set(S,E),r=this._checkLinkProviderResult(S,o,r),((O=this._activeProviderReplies)==null?void 0:O.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,i){const r=new Set;for(let l=0;l<i.size;l++){const m=i.get(l);if(m)for(let S=0;S<m.length;S++){const w=m[S],p=w.link.range.start.y<o?0:w.link.range.start.x,E=w.link.range.end.y>o?this._bufferService.cols:w.link.range.end.x;for(let T=p;T<=E;T++){if(r.has(T)){m.splice(S--,1);break}r.add(T)}}}}_checkLinkProviderResult(o,i,r){var S;if(!this._activeProviderReplies)return r;const l=this._activeProviderReplies.get(o);let m=!1;for(let w=0;w<o;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(m=!0);if(!m&&l){const w=l.find(p=>this._linkAtPosition(p.link,i));w&&(r=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let w=0;w<this._activeProviderReplies.size;w++){const p=(S=this._activeProviderReplies.get(w))==null?void 0:S.find(E=>this._linkAtPosition(E.link,i));if(p){r=!0,this._handleNewLink(p);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._currentLink)return;const i=this._positionFromMouseEvent(o,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,i){this._currentLink&&this._lastMouseEvent&&(!o||!i||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._lastMouseEvent)return;const i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(o.link,i)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var r,l;return(l=(r=this._currentLink)==null?void 0:r.state)==null?void 0:l.decorations.pointerCursor},set:r=>{var l;(l=this._currentLink)!=null&&l.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>{var r,l;return(l=(r=this._currentLink)==null?void 0:r.state)==null?void 0:l.decorations.underline},set:r=>{var l,m,S;(l=this._currentLink)!=null&&l.state&&((S=(m=this._currentLink)==null?void 0:m.state)==null?void 0:S.decorations.underline)!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;const l=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(l,m),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(o,i,r){var l;(l=this._currentLink)!=null&&l.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(r,i.text)}_fireUnderlineEvent(o,i){const r=o.range,l=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-l-1,r.end.x,r.end.y-l-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(o,i,r){var l;(l=this._currentLink)!=null&&l.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(r,i.text)}_linkAtPosition(o,i){const r=o.range.start.y*this._bufferService.cols+o.range.start.x,l=o.range.end.y*this._bufferService.cols+o.range.end.x,m=i.y*this._bufferService.cols+i.x;return r<=m&&m<=l}_positionFromMouseEvent(o,i,r){const l=r.getCoords(o,i,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,i,r,l,m){return{x1:o,y1:i,x2:r,y2:l,cols:this._bufferService.cols,fg:m}}};s.Linkifier=n=d([u(1,_.IMouseService),u(2,_.IRenderService),u(3,C.IBufferService),u(4,_.ILinkProviderService)],n)},9042:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(y,s,a){var d=this&&this.__decorate||function(_,n,o,i){var r,l=arguments.length,m=l<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(_,n,o,i);else for(var S=_.length-1;S>=0;S--)(r=_[S])&&(m=(l<3?r(m):l>3?r(n,o,m):r(n,o))||m);return l>3&&m&&Object.defineProperty(n,o,m),m},u=this&&this.__param||function(_,n){return function(o,i){n(o,i,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const c=a(511),f=a(2585);let v=s.OscLinkProvider=class{constructor(_,n,o){this._bufferService=_,this._optionsService=n,this._oscLinkService=o}provideLinks(_,n){var E;const o=this._bufferService.buffer.lines.get(_-1);if(!o)return void n(void 0);const i=[],r=this._optionsService.rawOptions.linkHandler,l=new c.CellData,m=o.getTrimmedLength();let S=-1,w=-1,p=!1;for(let T=0;T<m;T++)if(w!==-1||o.hasContent(T)){if(o.loadCell(T,l),l.hasExtendedAttrs()&&l.extended.urlId){if(w===-1){w=T,S=l.extended.urlId;continue}p=l.extended.urlId!==S}else w!==-1&&(p=!0);if(p||w!==-1&&T===m-1){const O=(E=this._oscLinkService.getLinkData(S))==null?void 0:E.uri;if(O){const I={start:{x:w+1,y:_},end:{x:T+(p||T!==m-1?0:1),y:_}};let R=!1;if(!(r!=null&&r.allowNonHttpProtocols))try{const N=new URL(O);["http:","https:"].includes(N.protocol)||(R=!0)}catch(N){R=!0}R||i.push({text:O,range:I,activate:(N,U)=>r?r.activate(N,U,I):C(0,U),hover:(N,U)=>{var q;return(q=r==null?void 0:r.hover)==null?void 0:q.call(r,N,U,I)},leave:(N,U)=>{var q;return(q=r==null?void 0:r.leave)==null?void 0:q.call(r,N,U,I)}})}p=!1,l.hasExtendedAttrs()&&l.extended.urlId?(w=T,S=l.extended.urlId):(w=-1,S=-1)}}n(i)}};function C(_,n){if(confirm("Do you want to navigate to ".concat(n,"?\n\nWARNING: This link could potentially be dangerous"))){const o=window.open();if(o){try{o.opener=null}catch(i){}o.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=v=d([u(0,f.IBufferService),u(1,f.IOptionsService),u(2,f.IOscLinkService)],v)},6193:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,d){this._renderCallback=a,this._coreBrowserService=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,d,u){this._rowCount=u,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},3236:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const d=a(3614),u=a(3656),c=a(3551),f=a(9042),v=a(3730),C=a(1680),_=a(3107),n=a(5744),o=a(2950),i=a(1296),r=a(428),l=a(4269),m=a(5114),S=a(8934),w=a(3230),p=a(9312),E=a(4725),T=a(6731),O=a(8055),I=a(8969),R=a(8460),N=a(844),U=a(6114),q=a(8437),Y=a(2584),z=a(7399),L=a(5941),A=a(9074),B=a(2585),P=a(5435),G=a(4567),ee=a(779);class oe extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=U,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ee.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((k,X)=>this.refresh(k,X))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(k=>this._reportWindowsOptions(k))),this.register(this._inputHandler.onColor(k=>this._handleColorEvent(k))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(k=>this._afterResize(k.cols,k.rows))),this.register((0,N.toDisposable)(()=>{var k,X;this._customKeyEventHandler=void 0,(X=(k=this.element)==null?void 0:k.parentNode)==null||X.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const k of H){let X,$="";switch(k.index){case 256:X="foreground",$="10";break;case 257:X="background",$="11";break;case 258:X="cursor",$="12";break;default:X="ansi",$="4;"+k.index}switch(k.type){case 0:const ie=O.color.toColorRGB(X==="ansi"?this._themeService.colors.ansi[k.index]:this._themeService.colors[X]);this.coreService.triggerDataEvent("".concat(Y.C0.ESC,"]").concat($,";").concat((0,L.toRgbString)(ie)).concat(Y.C1_ESCAPED.ST));break;case 1:if(X==="ansi")this._themeService.modifyColors(K=>K.ansi[k.index]=O.channels.toColor(...k.color));else{const K=X;this._themeService.modifyColors(D=>D[K]=O.channels.toColor(...k.color))}break;case 2:this._themeService.restoreColor(k.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var H;return(H=this.textarea)==null?void 0:H.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,k=this.buffer.lines.get(H);if(!k)return;const X=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,ie=k.getWidth(X),K=this._renderService.dimensions.css.cell.width*ie,D=this.buffer.y*this._renderService.dimensions.css.cell.height,M=X*this._renderService.dimensions.css.cell.width;this.textarea.style.left=M+"px",this.textarea.style.top=D+"px",this.textarea.style.width=K+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",k=>{this.hasSelection()&&(0,d.copyHandler)(k,this._selectionService)}));const H=k=>(0,d.handlePasteEvent)(k,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,u.addDisposableDomListener)(this.element,"paste",H)),U.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",k=>{k.button===2&&(0,d.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",k=>{(0,d.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),U.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",k=>{k.button===1&&(0,d.moveTextAreaUnderMouseCursor)(k,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){var X,$,ie;if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((X=this.element)==null?void 0:X.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const k=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",K=>this.updateCursorStyle(K))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",f.promptLabel),U.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(m.CoreBrowserService,this.textarea,($=H.ownerDocument.defaultView)!=null?$:window,((ie=this._document)!=null?ie:typeof window<"u")?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",K=>this._handleTextAreaFocus(K))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(r.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(l.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(K=>this._onRender.fire(K))),this.onResize(K=>this._renderService.resize(K.cols,K.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(k);try{this._onWillOpen.fire(this.element)}catch(K){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(K=>this.scrollLines(K.amount,K.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(p.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(K=>this.scrollLines(K.amount,K.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(K=>this._renderService.handleSelectionChanged(K.start,K.end,K.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(K=>{this.textarea.value=K,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(K=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",K=>this._selectionService.handleMouseDown(K))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",K=>this._handleScreenReaderModeOptionChange(K))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",K=>{!this._overviewRulerRenderer&&K&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(i.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,k=this.element;function X(K){const D=H._mouseService.getMouseReportCoords(K,H.screenElement);if(!D)return!1;let M,F;switch(K.overrideType||K.type){case"mousemove":F=32,K.buttons===void 0?(M=3,K.button!==void 0&&(M=K.button<3?K.button:3)):M=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":F=0,M=K.button<3?K.button:3;break;case"mousedown":F=1,M=K.button<3?K.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(K)===!1||H.viewport.getLinesScrolled(K)===0)return!1;F=K.deltaY<0?0:1,M=4;break;default:return!1}return!(F===void 0||M===void 0||M>4)&&H.coreMouseService.triggerMouseEvent({col:D.col,row:D.row,x:D.x,y:D.y,button:M,action:F,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ie={mouseup:K=>(X(K),K.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(K)),wheel:K=>(X(K),this.cancel(K,!0)),mousedrag:K=>{K.buttons&&X(K)},mousemove:K=>{K.buttons||X(K)}};this.register(this.coreMouseService.onProtocolChange(K=>{K?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(K)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&K?$.mousemove||(k.addEventListener("mousemove",ie.mousemove),$.mousemove=ie.mousemove):(k.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&K?$.wheel||(k.addEventListener("wheel",ie.wheel,{passive:!1}),$.wheel=ie.wheel):(k.removeEventListener("wheel",$.wheel),$.wheel=null),2&K?$.mouseup||($.mouseup=ie.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&K?$.mousedrag||($.mousedrag=ie.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(k,"mousedown",K=>{if(K.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(K))return X(K),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(K)})),this.register((0,u.addDisposableDomListener)(k,"wheel",K=>{if(!$.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(K)===!1)return!1;if(!this.buffer.hasScrollback){const D=this.viewport.getLinesScrolled(K);if(D===0)return;const M=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B");let F="";for(let j=0;j<Math.abs(D);j++)F+=M;return this.coreService.triggerDataEvent(F,!0),this.cancel(K,!0)}return this.viewport.handleWheel(K)?this.cancel(K):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(k,"touchstart",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(K),this.cancel(K)},{passive:!0})),this.register((0,u.addDisposableDomListener)(k,"touchmove",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(K)?void 0:this.cancel(K)},{passive:!1}))}refresh(H,k){var X;(X=this._renderService)==null||X.refreshRows(H,k)}updateCursorStyle(H){var k;(k=this._selectionService)!=null&&k.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,k,X=0){var $;X===1?(super.scrollLines(H,k,X),this.refresh(0,this.rows-1)):($=this.viewport)==null||$.scrollLines(H)}paste(H){(0,d.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const k=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),k}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,k,X){this._selectionService.setSelection(H,k,X)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var H;(H=this._selectionService)==null||H.clearSelection()}selectAll(){var H;(H=this._selectionService)==null||H.selectAll()}selectLines(H,k){var X;(X=this._selectionService)==null||X.selectLines(H,k)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const k=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!k&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;k||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const X=(0,z.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),X.type===3||X.type===2){const $=this.rows-1;return this.scrollLines(X.type===2?-$:$),this.cancel(H,!0)}return X.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(X.cancel&&this.cancel(H,!0),!X.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(X.key!==Y.C0.ETX&&X.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:X.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(X.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,k){const X=H.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||H.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey||H.isWindows&&k.getModifierState("AltGraph");return k.type==="keypress"?X:X&&(!k.keyCode||k.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let k;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)k=H.charCode;else if(H.which===null||H.which===void 0)k=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;k=H.which}return!(!k||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(k,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const k=H.data;return this.coreService.triggerDataEvent(k,!0),this.cancel(H),!0}return!1}resize(H,k){H!==this.cols||k!==this.rows?super.resize(H,k):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,k){var X,$;(X=this._charSizeService)==null||X.measure(),($=this.viewport)==null||$.syncScrollArea(!0)}clear(){var H;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let k=1;k<this.rows;k++)this.buffer.lines.push(this.buffer.getBlankLine(q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(H=this.viewport)==null||H.reset(),this.refresh(0,this.rows-1)}}reset(){var k,X;this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)==null||k.reset(),this._decorationService.reset(),(X=this.viewport)==null||X.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){var H;(H=this._renderService)==null||H.clearTextureAtlas()}_reportFocus(){var H;(H=this.element)!=null&&H.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const k=this._renderService.dimensions.css.canvas.width.toFixed(0),X=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent("".concat(Y.C0.ESC,"[4;").concat(X,";").concat(k,"t"));break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),ie=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent("".concat(Y.C0.ESC,"[6;").concat(ie,";").concat($,"t"))}}cancel(H,k){if(this.options.cancelEvents||k)return H.preventDefault(),H.stopPropagation(),!1}}s.Terminal=oe},9924:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,d=1e3){this._renderCallback=a,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,d,u){this._rowCount=u,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){const f=c-this._lastRefreshMs,v=this._debounceThresholdMS-f;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d)}}},1680:function(y,s,a){var d=this&&this.__decorate||function(o,i,r,l){var m,S=arguments.length,w=S<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,r):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,i,r,l);else for(var p=o.length-1;p>=0;p--)(m=o[p])&&(w=(S<3?m(w):S>3?m(i,r,w):m(i,r))||w);return S>3&&w&&Object.defineProperty(i,r,w),w},u=this&&this.__param||function(o,i){return function(r,l){i(r,l,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const c=a(3656),f=a(4725),v=a(8460),C=a(844),_=a(2585);let n=s.Viewport=class extends C.Disposable{constructor(o,i,r,l,m,S,w,p){super(),this._viewportElement=o,this._scrollArea=i,this._bufferService=r,this._optionsService=l,this._charSizeService=m,this._renderService=S,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(p.colors),this.register(p.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const i=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==i&&(this._lastRecordedBufferHeight=i,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,i){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&r<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const i=this._getPixelsScrolled(o);return i!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+i:this._smoothScrollState.target+=i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=i,this._bubbleScroll(o,i))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const i=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let i=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i}getBufferElements(o,i){var p;let r,l="";const m=[],S=i!=null?i:this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let E=o;E<S;E++){const T=w.get(E);if(!T)continue;const O=(p=w.get(E+1))==null?void 0:p.isWrapped;if(l+=T.translateToString(!O),!O||E===w.length-1){const I=document.createElement("div");I.textContent=l,m.push(I),l.length>0&&(r=I),l=""}}return{bufferElements:m,cursorElement:r}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let i=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i}_applyScrollModifier(o,i){const r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&i.altKey||r==="ctrl"&&i.ctrlKey||r==="shift"&&i.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const i=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(o,i))}};s.Viewport=n=d([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,f.ICharSizeService),u(5,f.IRenderService),u(6,f.ICoreBrowserService),u(7,f.IThemeService)],n)},3107:function(y,s,a){var d=this&&this.__decorate||function(_,n,o,i){var r,l=arguments.length,m=l<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(_,n,o,i);else for(var S=_.length-1;S>=0;S--)(r=_[S])&&(m=(l<3?r(m):l>3?r(n,o,m):r(n,o))||m);return l>3&&m&&Object.defineProperty(n,o,m),m},u=this&&this.__param||function(_,n){return function(o,i){n(o,i,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const c=a(4725),f=a(844),v=a(2585);let C=s.BufferDecorationRenderer=class extends f.Disposable{constructor(_,n,o,i,r){super(),this._screenElement=_,this._bufferService=n,this._coreBrowserService=o,this._decorationService=i,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const _ of this._decorationService.decorations)this._renderDecoration(_);this._dimensionsChanged=!1}_renderDecoration(_){this._refreshStyle(_),this._dimensionsChanged&&this._refreshXPosition(_)}_createElement(_){var i,r;const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",((i=_==null?void 0:_.options)==null?void 0:i.layer)==="top"),n.style.width="".concat(Math.round((_.options.width||1)*this._renderService.dimensions.css.cell.width),"px"),n.style.height=(_.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(_.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight="".concat(this._renderService.dimensions.css.cell.height,"px");const o=(r=_.options.x)!=null?r:0;return o&&o>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(_,n),n}_refreshStyle(_){const n=_.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)_.element&&(_.element.style.display="none",_.onRenderEmitter.fire(_.element));else{let o=this._decorationElements.get(_);o||(o=this._createElement(_),_.element=o,this._decorationElements.set(_,o),this._container.appendChild(o),_.onDispose(()=>{this._decorationElements.delete(_),o.remove()})),o.style.top=n*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",_.onRenderEmitter.fire(o)}}_refreshXPosition(_,n=_.element){var i;if(!n)return;const o=(i=_.options.x)!=null?i:0;(_.options.anchor||"left")==="right"?n.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(_){var n;(n=this._decorationElements.get(_))==null||n.remove(),this._decorationElements.delete(_),_.dispose()}};s.BufferDecorationRenderer=C=d([u(1,v.IBufferService),u(2,c.ICoreBrowserService),u(3,v.IDecorationService),u(4,c.IRenderService)],C)},5871:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const d of this._zones)if(d.color===a.options.overviewRulerOptions.color&&d.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,a.marker.line))return;if(this._lineAdjacentToZone(d,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(d,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,d){return d>=a.startBufferLine&&d<=a.endBufferLine}_lineAdjacentToZone(a,d,u){return d>=a.startBufferLine-this._linePadding[u||"full"]&&d<=a.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(a,d){a.startBufferLine=Math.min(a.startBufferLine,d),a.endBufferLine=Math.max(a.endBufferLine,d)}}},5744:function(y,s,a){var d=this&&this.__decorate||function(r,l,m,S){var w,p=arguments.length,E=p<3?l:S===null?S=Object.getOwnPropertyDescriptor(l,m):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(r,l,m,S);else for(var T=r.length-1;T>=0;T--)(w=r[T])&&(E=(p<3?w(E):p>3?w(l,m,E):w(l,m))||E);return p>3&&E&&Object.defineProperty(l,m,E),E},u=this&&this.__param||function(r,l){return function(m,S){l(m,S,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const c=a(5871),f=a(4725),v=a(844),C=a(2585),_={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let i=s.OverviewRulerRenderer=class extends v.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(r,l,m,S,w,p,E){var O;super(),this._viewportElement=r,this._screenElement=l,this._bufferService=m,this._decorationService=S,this._renderService=w,this._optionsService=p,this._coreBrowserService=E,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)==null||O.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var I;(I=this._canvas)==null||I.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const r=Math.floor(this._canvas.width/3),l=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=r,n.center=l,n.right=r,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=n.left,o.right=n.left+n.center}_refreshDrawHeightConstants(){_.full=Math.round(2*this._coreBrowserService.dpr);const r=this._canvas.height/this._bufferService.buffer.lines.length,l=Math.round(Math.max(Math.min(r,12),6)*this._coreBrowserService.dpr);_.left=l,_.center=l,_.right=l}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width="".concat(this._width,"px"),this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height="".concat(this._screenElement.clientHeight,"px"),this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const l of this._decorationService.decorations)this._colorZoneStore.addDecoration(l);this._ctx.lineWidth=1;const r=this._colorZoneStore.zones;for(const l of r)l.position!=="full"&&this._renderColorZone(l);for(const l of r)l.position==="full"&&this._renderColorZone(l);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(r){this._ctx.fillStyle=r.color,this._ctx.fillRect(o[r.position||"full"],Math.round((this._canvas.height-1)*(r.startBufferLine/this._bufferService.buffers.active.lines.length)-_[r.position||"full"]/2),n[r.position||"full"],Math.round((this._canvas.height-1)*((r.endBufferLine-r.startBufferLine)/this._bufferService.buffers.active.lines.length)+_[r.position||"full"]))}_queueRefresh(r,l){this._shouldUpdateDimensions=r||this._shouldUpdateDimensions,this._shouldUpdateAnchor=l||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=i=d([u(2,C.IBufferService),u(3,C.IDecorationService),u(4,f.IRenderService),u(5,C.IOptionsService),u(6,f.ICoreBrowserService)],i)},2950:function(y,s,a){var d=this&&this.__decorate||function(_,n,o,i){var r,l=arguments.length,m=l<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(_,n,o,i);else for(var S=_.length-1;S>=0;S--)(r=_[S])&&(m=(l<3?r(m):l>3?r(n,o,m):r(n,o))||m);return l>3&&m&&Object.defineProperty(n,o,m),m},u=this&&this.__param||function(_,n){return function(o,i){n(o,i,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const c=a(4725),f=a(2585),v=a(2584);let C=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,n,o,i,r,l){this._textarea=_,this._compositionView=n,this._bufferService=o,this._optionsService=i,this._coreService=r,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,o=n.replace(_,"");this._dataAlreadySent=o,n.length>_.length?this._coreService.triggerDataEvent(o,!0):n.length<_.length?this._coreService.triggerDataEvent("".concat(v.C0.DEL),!0):n.length===_.length&&n!==_&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const l=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}_||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=C=d([u(2,f.IBufferService),u(3,f.IOptionsService),u(4,f.ICoreService),u(5,c.IRenderService)],C)},9806:(y,s)=>{function a(d,u,c){const f=c.getBoundingClientRect(),v=d.getComputedStyle(c),C=parseInt(v.getPropertyValue("padding-left")),_=parseInt(v.getPropertyValue("padding-top"));return[u.clientX-f.left-C,u.clientY-f.top-_]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(d,u,c,f,v,C,_,n,o){if(!C)return;const i=a(d,u,c);return i?(i[0]=Math.ceil((i[0]+(o?_/2:0))/_),i[1]=Math.ceil(i[1]/n),i[0]=Math.min(Math.max(i[0],1),f+(o?1:0)),i[1]=Math.min(Math.max(i[1],1),v),i):void 0}},9504:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const d=a(2584);function u(n,o,i,r){const l=n-c(n,i),m=o-c(o,i),S=Math.abs(l-m)-function(w,p,E){let T=0;const O=w-c(w,E),I=p-c(p,E);for(let R=0;R<Math.abs(O-I);R++){const N=f(w,p)==="A"?-1:1,U=E.buffer.lines.get(O+N*R);U!=null&&U.isWrapped&&T++}return T}(n,o,i);return _(S,C(f(n,o),r))}function c(n,o){let i=0,r=o.buffer.lines.get(n),l=r==null?void 0:r.isWrapped;for(;l&&n>=0&&n<o.rows;)i++,r=o.buffer.lines.get(--n),l=r==null?void 0:r.isWrapped;return i}function f(n,o){return n>o?"A":"B"}function v(n,o,i,r,l,m){let S=n,w=o,p="";for(;S!==i||w!==r;)S+=l?1:-1,l&&S>m.cols-1?(p+=m.buffer.translateBufferLineToString(w,!1,n,S),S=0,n=0,w++):!l&&S<0&&(p+=m.buffer.translateBufferLineToString(w,!1,0,n+1),S=m.cols-1,n=S,w--);return p+m.buffer.translateBufferLineToString(w,!1,n,S)}function C(n,o){const i=o?"O":"[";return d.C0.ESC+i+n}function _(n,o){n=Math.floor(n);let i="";for(let r=0;r<n;r++)i+=o;return i}s.moveToCellSequence=function(n,o,i,r){const l=i.buffer.x,m=i.buffer.y;if(!i.buffer.hasScrollback)return function(p,E,T,O,I,R){return u(E,O,I,R).length===0?"":_(v(p,E,p,E-c(E,I),!1,I).length,C("D",R))}(l,m,0,o,i,r)+u(m,o,i,r)+function(p,E,T,O,I,R){let N;N=u(E,O,I,R).length>0?O-c(O,I):E;const U=O,q=function(Y,z,L,A,B,P){let G;return G=u(L,A,B,P).length>0?A-c(A,B):z,Y<L&&G<=A||Y>=L&&G<A?"C":"D"}(p,E,T,O,I,R);return _(v(p,N,T,U,q==="C",I).length,C(q,R))}(l,m,n,o,i,r);let S;if(m===o)return S=l>n?"D":"C",_(Math.abs(l-n),C(S,r));S=m>o?"D":"C";const w=Math.abs(m-o);return _(function(p,E){return E.cols-p}(m>o?n:l,i)+(w-1)*i.cols+1+((m>o?l:n)-1),C(S,r))}},1296:function(y,s,a){var d=this&&this.__decorate||function(R,N,U,q){var Y,z=arguments.length,L=z<3?N:q===null?q=Object.getOwnPropertyDescriptor(N,U):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(R,N,U,q);else for(var A=R.length-1;A>=0;A--)(Y=R[A])&&(L=(z<3?Y(L):z>3?Y(N,U,L):Y(N,U))||L);return z>3&&L&&Object.defineProperty(N,U,L),L},u=this&&this.__param||function(R,N){return function(U,q){N(U,q,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const c=a(3787),f=a(2550),v=a(2223),C=a(6171),_=a(6052),n=a(4725),o=a(8055),i=a(8460),r=a(844),l=a(2585),m="xterm-dom-renderer-owner-",S="xterm-rows",w="xterm-fg-",p="xterm-bg-",E="xterm-focus",T="xterm-selection";let O=1,I=s.DomRenderer=class extends r.Disposable{constructor(R,N,U,q,Y,z,L,A,B,P,G,ee,oe){super(),this._terminal=R,this._document=N,this._element=U,this._screenElement=q,this._viewportElement=Y,this._helperContainer=z,this._linkifier2=L,this._charSizeService=B,this._optionsService=P,this._bufferService=G,this._coreBrowserService=ee,this._themeService=oe,this._terminalClass=O++,this._rowElements=[],this._selectionRenderModel=(0,_.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ae=>this._injectCss(ae))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ae=>this._handleLinkHover(ae))),this.register(this._linkifier2.onHideLinkUnderline(ae=>this._handleLinkLeave(ae))),this.register((0,r.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new f.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const U of this._rowElements)U.style.width="".concat(this.dimensions.css.canvas.width,"px"),U.style.height="".concat(this.dimensions.css.cell.height,"px"),U.style.lineHeight="".concat(this.dimensions.css.cell.height,"px"),U.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N="".concat(this._terminalSelector," .").concat(S," span { display: inline-block; height: 100%; vertical-align: top;}");this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width="".concat(this.dimensions.css.canvas.width,"px"),this._screenElement.style.height="".concat(this.dimensions.css.canvas.height,"px")}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N="".concat(this._terminalSelector," .").concat(S," { color: ").concat(R.foreground.css,"; font-family: ").concat(this._optionsService.rawOptions.fontFamily,"; font-size: ").concat(this._optionsService.rawOptions.fontSize,"px; font-kerning: none; white-space: pre}");N+="".concat(this._terminalSelector," .").concat(S," .xterm-dim { color: ").concat(o.color.multiplyOpacity(R.foreground,.5).css,";}"),N+="".concat(this._terminalSelector," span:not(.xterm-bold) { font-weight: ").concat(this._optionsService.rawOptions.fontWeight,";}").concat(this._terminalSelector," span.xterm-bold { font-weight: ").concat(this._optionsService.rawOptions.fontWeightBold,";}").concat(this._terminalSelector," span.xterm-italic { font-style: italic;}");const U="blink_underline_".concat(this._terminalClass),q="blink_bar_".concat(this._terminalClass),Y="blink_block_".concat(this._terminalClass);N+="@keyframes ".concat(U," { 50% {  border-bottom-style: hidden; }}"),N+="@keyframes ".concat(q," { 50% {  box-shadow: none; }}"),N+="@keyframes ".concat(Y," { 0% {  background-color: ").concat(R.cursor.css,";  color: ").concat(R.cursorAccent.css,"; } 50% {  background-color: inherit;  color: ").concat(R.cursor.css,"; }}"),N+="".concat(this._terminalSelector," .").concat(S,".").concat(E," .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ").concat(U," 1s step-end infinite;}").concat(this._terminalSelector," .").concat(S,".").concat(E," .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ").concat(q," 1s step-end infinite;}").concat(this._terminalSelector," .").concat(S,".").concat(E," .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ").concat(Y," 1s step-end infinite;}").concat(this._terminalSelector," .").concat(S," .xterm-cursor.xterm-cursor-block { background-color: ").concat(R.cursor.css,"; color: ").concat(R.cursorAccent.css,";}").concat(this._terminalSelector," .").concat(S," .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ").concat(R.cursor.css," !important; color: ").concat(R.cursorAccent.css," !important;}").concat(this._terminalSelector," .").concat(S," .xterm-cursor.xterm-cursor-outline { outline: 1px solid ").concat(R.cursor.css,"; outline-offset: -1px;}").concat(this._terminalSelector," .").concat(S," .xterm-cursor.xterm-cursor-bar { box-shadow: ").concat(this._optionsService.rawOptions.cursorWidth,"px 0 0 ").concat(R.cursor.css," inset;}").concat(this._terminalSelector," .").concat(S," .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ").concat(R.cursor.css,"; border-bottom-style: solid; height: calc(100% - 1px);}"),N+="".concat(this._terminalSelector," .").concat(T," { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}").concat(this._terminalSelector,".focus .").concat(T," div { position: absolute; background-color: ").concat(R.selectionBackgroundOpaque.css,";}").concat(this._terminalSelector," .").concat(T," div { position: absolute; background-color: ").concat(R.selectionInactiveBackgroundOpaque.css,";}");for(const[z,L]of R.ansi.entries())N+="".concat(this._terminalSelector," .").concat(w).concat(z," { color: ").concat(L.css,"; }").concat(this._terminalSelector," .").concat(w).concat(z,".xterm-dim { color: ").concat(o.color.multiplyOpacity(L,.5).css,"; }").concat(this._terminalSelector," .").concat(p).concat(z," { background-color: ").concat(L.css,"; }");N+="".concat(this._terminalSelector," .").concat(w).concat(v.INVERTED_DEFAULT_COLOR," { color: ").concat(o.color.opaque(R.background).css,"; }").concat(this._terminalSelector," .").concat(w).concat(v.INVERTED_DEFAULT_COLOR,".xterm-dim { color: ").concat(o.color.multiplyOpacity(o.color.opaque(R.background),.5).css,"; }").concat(this._terminalSelector," .").concat(p).concat(v.INVERTED_DEFAULT_COLOR," { background-color: ").concat(R.foreground.css,"; }"),this._themeStyleElement.textContent=N}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing="".concat(R,"px"),this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,N){for(let U=this._rowElements.length;U<=N;U++){const q=this._document.createElement("div");this._rowContainer.appendChild(q),this._rowElements.push(q)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,N){this._refreshRowElements(R,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,N,U){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,N,U),this.renderRows(0,this._bufferService.rows-1),!R||!N)return;this._selectionRenderModel.update(this._terminal,R,N,U);const q=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,z=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(z>=this._bufferService.rows||L<0)return;const A=this._document.createDocumentFragment();if(U){const B=R[0]>N[0];A.appendChild(this._createSelectionElement(z,B?N[0]:R[0],B?R[0]:N[0],L-z+1))}else{const B=q===z?R[0]:0,P=z===Y?N[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(z,B,P));const G=L-z-1;if(A.appendChild(this._createSelectionElement(z+1,0,this._bufferService.cols,G)),z!==L){const ee=Y===L?N[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(L,0,ee))}}this._selectionContainer.appendChild(A)}_createSelectionElement(R,N,U,q=1){const Y=this._document.createElement("div"),z=N*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*(U-N);return z+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-z),Y.style.height=q*this.dimensions.css.cell.height+"px",Y.style.top=R*this.dimensions.css.cell.height+"px",Y.style.left="".concat(z,"px"),Y.style.width="".concat(L,"px"),Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,N){const U=this._bufferService.buffer,q=U.ybase+U.y,Y=Math.min(U.x,this._bufferService.cols-1),z=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=R;B<=N;B++){const P=B+U.ydisp,G=this._rowElements[B],ee=U.lines.get(P);if(!G||!ee)break;G.replaceChildren(...this._rowFactory.createRow(ee,P,P===q,L,A,Y,z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return".".concat(m).concat(this._terminalClass)}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,N,U,q,Y,z){U<0&&(R=0),q<0&&(N=0);const L=this._bufferService.rows-1;U=Math.max(Math.min(U,L),0),q=Math.max(Math.min(q,L),0),Y=Math.min(Y,this._bufferService.cols);const A=this._bufferService.buffer,B=A.ybase+A.y,P=Math.min(A.x,Y-1),G=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let ae=U;ae<=q;++ae){const H=ae+A.ydisp,k=this._rowElements[ae],X=A.lines.get(H);if(!k||!X)break;k.replaceChildren(...this._rowFactory.createRow(X,H,H===B,ee,oe,P,G,this.dimensions.css.cell.width,this._widthCache,z?ae===U?R:0:-1,z?(ae===q?N:Y)-1:-1))}}};s.DomRenderer=I=d([u(7,l.IInstantiationService),u(8,n.ICharSizeService),u(9,l.IOptionsService),u(10,l.IBufferService),u(11,n.ICoreBrowserService),u(12,n.IThemeService)],I)},3787:function(y,s,a){var d=this&&this.__decorate||function(S,w,p,E){var T,O=arguments.length,I=O<3?w:E===null?E=Object.getOwnPropertyDescriptor(w,p):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(S,w,p,E);else for(var R=S.length-1;R>=0;R--)(T=S[R])&&(I=(O<3?T(I):O>3?T(w,p,I):T(w,p))||I);return O>3&&I&&Object.defineProperty(w,p,I),I},u=this&&this.__param||function(S,w){return function(p,E){w(p,E,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const c=a(2223),f=a(643),v=a(511),C=a(2585),_=a(8055),n=a(4725),o=a(4269),i=a(6171),r=a(3734);let l=s.DomRendererRowFactory=class{constructor(S,w,p,E,T,O,I){this._document=S,this._characterJoinerService=w,this._optionsService=p,this._coreBrowserService=E,this._coreService=T,this._decorationService=O,this._themeService=I,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,w,p){this._selectionStart=S,this._selectionEnd=w,this._columnSelectMode=p}createRow(S,w,p,E,T,O,I,R,N,U,q){const Y=[],z=this._characterJoinerService.getJoinedCharacters(w),L=this._themeService.colors;let A,B=S.getNoBgTrimmedLength();p&&B<O+1&&(B=O+1);let P=0,G="",ee=0,oe=0,ae=0,H=!1,k=0,X=!1,$=0;const ie=[],K=U!==-1&&q!==-1;for(let D=0;D<B;D++){S.loadCell(D,this._workCell);let M=this._workCell.getWidth();if(M===0)continue;let F=!1,j=D,W=this._workCell;if(z.length>0&&D===z[0][0]){F=!0;const fe=z.shift();W=new o.JoinedCellData(this._workCell,S.translateToString(!0,fe[0],fe[1]),fe[1]-fe[0]),j=fe[1]-1,M=W.getWidth()}const V=this._isCellInSelection(D,w),te=p&&D===O,Q=K&&D>=U&&D<=q;let Z=!1;this._decorationService.forEachDecorationAtCell(D,w,void 0,fe=>{Z=!0});let J=W.getChars()||f.WHITESPACE_CELL_CHAR;if(J===" "&&(W.isUnderline()||W.isOverline())&&(J=" "),$=M*R-N.get(J,W.isBold(),W.isItalic()),A){if(P&&(V&&X||!V&&!X&&W.bg===ee)&&(V&&X&&L.selectionForeground||W.fg===oe)&&W.extended.ext===ae&&Q===H&&$===k&&!te&&!F&&!Z){W.isInvisible()?G+=f.WHITESPACE_CELL_CHAR:G+=J,P++;continue}P&&(A.textContent=G),A=this._document.createElement("span"),P=0,G=""}else A=this._document.createElement("span");if(ee=W.bg,oe=W.fg,ae=W.extended.ext,H=Q,k=$,X=V,F&&O>=D&&O<=j&&(O=D),!this._coreService.isCursorHidden&&te&&this._coreService.isCursorInitialized){if(ie.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&ie.push("xterm-cursor-blink"),ie.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":ie.push("xterm-cursor-outline");break;case"block":ie.push("xterm-cursor-block");break;case"bar":ie.push("xterm-cursor-bar");break;case"underline":ie.push("xterm-cursor-underline")}}if(W.isBold()&&ie.push("xterm-bold"),W.isItalic()&&ie.push("xterm-italic"),W.isDim()&&ie.push("xterm-dim"),G=W.isInvisible()?f.WHITESPACE_CELL_CHAR:W.getChars()||f.WHITESPACE_CELL_CHAR,W.isUnderline()&&(ie.push("xterm-underline-".concat(W.extended.underlineStyle)),G===" "&&(G=" "),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())A.style.textDecorationColor="rgb(".concat(r.AttributeData.toColorRGB(W.getUnderlineColor()).join(","),")");else{let fe=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&fe<8&&(fe+=8),A.style.textDecorationColor=L.ansi[fe].css}W.isOverline()&&(ie.push("xterm-overline"),G===" "&&(G=" ")),W.isStrikethrough()&&ie.push("xterm-strikethrough"),Q&&(A.style.textDecoration="underline");let ne=W.getFgColor(),se=W.getFgColorMode(),re=W.getBgColor(),ce=W.getBgColorMode();const de=!!W.isInverse();if(de){const fe=ne;ne=re,re=fe;const xe=se;se=ce,ce=xe}let ue,_e,Se,be=!1;switch(this._decorationService.forEachDecorationAtCell(D,w,void 0,fe=>{fe.options.layer!=="top"&&be||(fe.backgroundColorRGB&&(ce=50331648,re=fe.backgroundColorRGB.rgba>>8&16777215,ue=fe.backgroundColorRGB),fe.foregroundColorRGB&&(se=50331648,ne=fe.foregroundColorRGB.rgba>>8&16777215,_e=fe.foregroundColorRGB),be=fe.options.layer==="top")}),!be&&V&&(ue=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,re=ue.rgba>>8&16777215,ce=50331648,be=!0,L.selectionForeground&&(se=50331648,ne=L.selectionForeground.rgba>>8&16777215,_e=L.selectionForeground)),be&&ie.push("xterm-decoration-top"),ce){case 16777216:case 33554432:Se=L.ansi[re],ie.push("xterm-bg-".concat(re));break;case 50331648:Se=_.channels.toColor(re>>16,re>>8&255,255&re),this._addStyle(A,"background-color:#".concat(m((re>>>0).toString(16),"0",6)));break;default:de?(Se=L.foreground,ie.push("xterm-bg-".concat(c.INVERTED_DEFAULT_COLOR))):Se=L.background}switch(ue||W.isDim()&&(ue=_.color.multiplyOpacity(Se,.5)),se){case 16777216:case 33554432:W.isBold()&&ne<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ne+=8),this._applyMinimumContrast(A,Se,L.ansi[ne],W,ue,void 0)||ie.push("xterm-fg-".concat(ne));break;case 50331648:const fe=_.channels.toColor(ne>>16&255,ne>>8&255,255&ne);this._applyMinimumContrast(A,Se,fe,W,ue,_e)||this._addStyle(A,"color:#".concat(m(ne.toString(16),"0",6)));break;default:this._applyMinimumContrast(A,Se,L.foreground,W,ue,_e)||de&&ie.push("xterm-fg-".concat(c.INVERTED_DEFAULT_COLOR))}ie.length&&(A.className=ie.join(" "),ie.length=0),te||F||Z?A.textContent=G:P++,$!==this.defaultSpacing&&(A.style.letterSpacing="".concat($,"px")),Y.push(A),D=j}return A&&P&&(A.textContent=G),Y}_applyMinimumContrast(S,w,p,E,T,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.treatGlyphAsBackgroundColor)(E.getCode()))return!1;const I=this._getContrastCache(E);let R;if(T||O||(R=I.getColor(w.rgba,p.rgba)),R===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);R=_.color.ensureContrastRatio(T||w,O||p,N),I.setColor((T||w).rgba,(O||p).rgba,R!=null?R:null)}return!!R&&(this._addStyle(S,"color:".concat(R.css)),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,w){S.setAttribute("style","".concat(S.getAttribute("style")||"").concat(w,";"))}_isCellInSelection(S,w){const p=this._selectionStart,E=this._selectionEnd;return!(!p||!E)&&(this._columnSelectMode?p[0]<=E[0]?S>=p[0]&&w>=p[1]&&S<E[0]&&w<=E[1]:S<p[0]&&w>=p[1]&&S>=E[0]&&w<=E[1]:w>p[1]&&w<E[1]||p[1]===E[1]&&w===p[1]&&S>=p[0]&&S<E[0]||p[1]<E[1]&&w===E[1]&&S<E[0]||p[1]<E[1]&&w===p[1]&&S>=p[0])}};function m(S,w,p){for(;S.length<p;)S=w+S;return S}s.DomRendererRowFactory=l=d([u(1,n.ICharacterJoinerService),u(2,C.IOptionsService),u(3,n.ICoreBrowserService),u(4,C.ICoreService),u(5,C.IDecorationService),u(6,n.IThemeService)],l)},2550:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a,d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=a.createElement("span");u.classList.add("xterm-char-measure-element");const c=a.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";const f=a.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontStyle="italic";const v=a.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[u,c,f,v],this._container.appendChild(u),this._container.appendChild(c),this._container.appendChild(f),this._container.appendChild(v),d.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,d,u,c){a===this._font&&d===this._fontSize&&u===this._weight&&c===this._weightBold||(this._font=a,this._fontSize=d,this._weight=u,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize="".concat(this._fontSize,"px"),this._measureElements[0].style.fontWeight="".concat(u),this._measureElements[1].style.fontWeight="".concat(c),this._measureElements[2].style.fontWeight="".concat(u),this._measureElements[3].style.fontWeight="".concat(c),this.clear())}get(a,d,u){let c=0;if(!d&&!u&&a.length===1&&(c=a.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];const C=this._measure(a,0);return C>0&&(this._flat[c]=C),C}let f=a;d&&(f+="B"),u&&(f+="I");let v=this._holey.get(f);if(v===void 0){let C=0;d&&(C|=1),u&&(C|=2),v=this._measure(a,C),v>0&&this._holey.set(f,v)}return v}_measure(a,d){const u=this._measureElements[d];return u.textContent=a.repeat(32),u.offsetWidth/32}}},2223:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(y,s)=>{function a(u){return 57508<=u&&u<=57558}function d(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},s.isEmoji=d,s.allowRescaling=function(u,c,f,v){return c===1&&f>Math.ceil(1.5*v)&&u!==void 0&&u>255&&!d(u)&&!a(u)&&!function(C){return 57344<=C&&C<=63743}(u)},s.treatGlyphAsBackgroundColor=function(u){return a(u)||function(c){return 9472<=c&&c<=9631}(u)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(u,c,f=0){return(u-(2*Math.round(c)-f))%(2*Math.round(c))}},6052:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,c,f,v=!1){if(this.selectionStart=c,this.selectionEnd=f,!c||!f||c[0]===f[0]&&c[1]===f[1])return void this.clear();const C=u.buffers.active.ydisp,_=c[1]-C,n=f[1]-C,o=Math.max(_,0),i=Math.min(n,u.rows-1);o>=u.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=v,this.viewportStartRow=_,this.viewportEndRow=n,this.viewportCappedStartRow=o,this.viewportCappedEndRow=i,this.startCol=c[0],this.endCol=f[0])}isCellSelected(u,c,f){return!!this.hasSelection&&(f-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&f>=this.viewportCappedStartRow&&c<this.endCol&&f<=this.viewportCappedEndRow:c<this.startCol&&f>=this.viewportCappedStartRow&&c>=this.endCol&&f<=this.viewportCappedEndRow:f>this.viewportStartRow&&f<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&f===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportStartRow&&c>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},456:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,d=this.selectionEnd;return!(!a||!d)&&(a[1]>d[1]||a[1]===d[1]&&a[0]>d[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(y,s,a){var d=this&&this.__decorate||function(i,r,l,m){var S,w=arguments.length,p=w<3?r:m===null?m=Object.getOwnPropertyDescriptor(r,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(i,r,l,m);else for(var E=i.length-1;E>=0;E--)(S=i[E])&&(p=(w<3?S(p):w>3?S(r,l,p):S(r,l))||p);return w>3&&p&&Object.defineProperty(r,l,p),p},u=this&&this.__param||function(i,r){return function(l,m){r(l,m,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const c=a(2585),f=a(8460),v=a(844);let C=s.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(i,r,l){super(),this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=this.register(new f.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new o(this._optionsService))}catch(m){this._measureStrategy=this.register(new n(i,r,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const i=this._measureStrategy.measure();i.width===this.width&&i.height===this.height||(this.width=i.width,this.height=i.height,this._onCharSizeChange.fire())}};s.CharSizeService=C=d([u(2,c.IOptionsService)],C);class _ extends v.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(r,l){r!==void 0&&r>0&&l!==void 0&&l>0&&(this._result.width=r,this._result.height=l)}}class n extends _{constructor(r,l,m){super(),this._document=r,this._parentElement=l,this._optionsService=m,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize="".concat(this._optionsService.rawOptions.fontSize,"px"),this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class o extends _{constructor(r){super(),this._optionsService=r,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const l=this._ctx.measureText("W");if(!("width"in l&&"fontBoundingBoxAscent"in l&&"fontBoundingBoxDescent"in l))throw new Error("Required font metrics not supported")}measure(){this._ctx.font="".concat(this._optionsService.rawOptions.fontSize,"px ").concat(this._optionsService.rawOptions.fontFamily);const r=this._ctx.measureText("W");return this._validateAndSet(r.width,r.fontBoundingBoxAscent+r.fontBoundingBoxDescent),this._result}}},4269:function(y,s,a){var d=this&&this.__decorate||function(o,i,r,l){var m,S=arguments.length,w=S<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,r):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,i,r,l);else for(var p=o.length-1;p>=0;p--)(m=o[p])&&(w=(S<3?m(w):S>3?m(i,r,w):m(i,r))||w);return S>3&&w&&Object.defineProperty(i,r,w),w},u=this&&this.__param||function(o,i){return function(r,l){i(r,l,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const c=a(3734),f=a(643),v=a(511),C=a(2585);class _ extends c.AttributeData{constructor(i,r,l){super(),this.content=0,this.combinedData="",this.fg=i.fg,this.bg=i.bg,this.combinedData=r,this._width=l}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(i){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=_;let n=s.CharacterJoinerService=class Fr{constructor(i){this._bufferService=i,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(i){const r={id:this._nextCharacterJoinerId++,handler:i};return this._characterJoiners.push(r),r.id}deregister(i){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===i)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(i){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(i);if(!r||r.length===0)return[];const l=[],m=r.translateToString(!0);let S=0,w=0,p=0,E=r.getFg(0),T=r.getBg(0);for(let O=0;O<r.getTrimmedLength();O++)if(r.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==T){if(O-S>1){const I=this._getJoinedRanges(m,p,w,r,S);for(let R=0;R<I.length;R++)l.push(I[R])}S=O,p=w,E=this._workCell.fg,T=this._workCell.bg}w+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const O=this._getJoinedRanges(m,p,w,r,S);for(let I=0;I<O.length;I++)l.push(O[I])}return l}_getJoinedRanges(i,r,l,m,S){const w=i.substring(r,l);let p=[];try{p=this._characterJoiners[0].handler(w)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const T=this._characterJoiners[E].handler(w);for(let O=0;O<T.length;O++)Fr._mergeRanges(p,T[O])}catch(T){console.error(T)}return this._stringRangesToCellRanges(p,m,S),p}_stringRangesToCellRanges(i,r,l){let m=0,S=!1,w=0,p=i[m];if(p){for(let E=l;E<this._bufferService.cols;E++){const T=r.getWidth(E),O=r.getString(E).length||f.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!S&&p[0]<=w&&(p[0]=E,S=!0),p[1]<=w){if(p[1]=E,p=i[++m],!p)break;p[0]<=w?(p[0]=E,S=!0):S=!1}w+=O}}p&&(p[1]=this._bufferService.cols)}}static _mergeRanges(i,r){let l=!1;for(let m=0;m<i.length;m++){const S=i[m];if(l){if(r[1]<=S[0])return i[m-1][1]=r[1],i;if(r[1]<=S[1])return i[m-1][1]=Math.max(r[1],S[1]),i.splice(m,1),i;i.splice(m,1),m--}else{if(r[1]<=S[0])return i.splice(m,0,r),i;if(r[1]<=S[1])return S[0]=Math.min(r[0],S[0]),i;r[0]<S[1]&&(S[0]=Math.min(r[0],S[0]),l=!0)}}return l?i[i.length-1][1]=r[1]:i.push(r),i}};s.CharacterJoinerService=n=d([u(0,C.IBufferService)],n)},5114:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;const d=a(844),u=a(8460),c=a(3656);class f extends d.Disposable{constructor(_,n,o){super(),this._textarea=_,this._window=n,this.mainDocument=o,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new v(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(i=>this._screenDprMonitor.setWindow(i))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(_){this._window!==_&&(this._window=_,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=f;class v extends d.Disposable{constructor(_){super(),this._parentWindow=_,this._windowResizeListener=this.register(new d.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,d.toDisposable)(()=>this.clearListener()))}setWindow(_){this._parentWindow=_,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)==null||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia("screen and (resolution: ".concat(this._parentWindow.devicePixelRatio,"dppx)")),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;const d=a(844);class u extends d.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,d.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(f){return this.linkProviders.push(f),{dispose:()=>{const v=this.linkProviders.indexOf(f);v!==-1&&this.linkProviders.splice(v,1)}}}}s.LinkProviderService=u},8934:function(y,s,a){var d=this&&this.__decorate||function(C,_,n,o){var i,r=arguments.length,l=r<3?_:o===null?o=Object.getOwnPropertyDescriptor(_,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(C,_,n,o);else for(var m=C.length-1;m>=0;m--)(i=C[m])&&(l=(r<3?i(l):r>3?i(_,n,l):i(_,n))||l);return r>3&&l&&Object.defineProperty(_,n,l),l},u=this&&this.__param||function(C,_){return function(n,o){_(n,o,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const c=a(4725),f=a(9806);let v=s.MouseService=class{constructor(C,_){this._renderService=C,this._charSizeService=_}getCoords(C,_,n,o,i){return(0,f.getCoords)(window,C,_,n,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,i)}getMouseReportCoords(C,_){const n=(0,f.getCoordsRelativeToElement)(window,C,_);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};s.MouseService=v=d([u(0,c.IRenderService),u(1,c.ICharSizeService)],v)},3230:function(y,s,a){var d=this&&this.__decorate||function(i,r,l,m){var S,w=arguments.length,p=w<3?r:m===null?m=Object.getOwnPropertyDescriptor(r,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(i,r,l,m);else for(var E=i.length-1;E>=0;E--)(S=i[E])&&(p=(w<3?S(p):w>3?S(r,l,p):S(r,l))||p);return w>3&&p&&Object.defineProperty(r,l,p),p},u=this&&this.__param||function(i,r){return function(l,m){r(l,m,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const c=a(6193),f=a(4725),v=a(8460),C=a(844),_=a(7226),n=a(2585);let o=s.RenderService=class extends C.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(i,r,l,m,S,w,p,E){super(),this._rowCount=i,this._charSizeService=m,this._renderer=this.register(new C.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._observerDisposable=this.register(new C.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer((T,O)=>this._renderRows(T,O),p),this.register(this._renderDebouncer),this.register(p.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(l.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(l.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(l.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(p.window,r),this.register(p.onWindowChange(T=>this._registerIntersectionObserver(T,r)))}_registerIntersectionObserver(i,r){if("IntersectionObserver"in i){const l=new i.IntersectionObserver(m=>this._handleIntersectionChange(m[m.length-1]),{threshold:0});l.observe(r),this._observerDisposable.value=(0,C.toDisposable)(()=>l.disconnect())}}_handleIntersectionChange(i){this._isPaused=i.isIntersecting===void 0?i.intersectionRatio===0:!i.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(i,r,l=!1){this._isPaused?this._needsFullRefresh=!0:(l||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(i,r,this._rowCount))}_renderRows(i,r){this._renderer.value&&(i=Math.min(i,this._rowCount-1),r=Math.min(r,this._rowCount-1),this._renderer.value.renderRows(i,r),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:i,end:r}),this._onRender.fire({start:i,end:r}),this._isNextRenderRedrawOnly=!0)}resize(i,r){this._rowCount=r,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(i){this._renderer.value=i,this._renderer.value&&(this._renderer.value.onRequestRedraw(r=>this.refreshRows(r.start,r.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(i){return this._renderDebouncer.addRefreshCallback(i)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var i,r;this._renderer.value&&((r=(i=this._renderer.value).clearTextureAtlas)==null||r.call(i),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(i,r){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var l;return(l=this._renderer.value)==null?void 0:l.handleResize(i,r)}):this._renderer.value.handleResize(i,r),this._fullRefresh())}handleCharSizeChanged(){var i;(i=this._renderer.value)==null||i.handleCharSizeChanged()}handleBlur(){var i;(i=this._renderer.value)==null||i.handleBlur()}handleFocus(){var i;(i=this._renderer.value)==null||i.handleFocus()}handleSelectionChanged(i,r,l){var m;this._selectionState.start=i,this._selectionState.end=r,this._selectionState.columnSelectMode=l,(m=this._renderer.value)==null||m.handleSelectionChanged(i,r,l)}handleCursorMove(){var i;(i=this._renderer.value)==null||i.handleCursorMove()}clear(){var i;(i=this._renderer.value)==null||i.clear()}};s.RenderService=o=d([u(2,n.IOptionsService),u(3,f.ICharSizeService),u(4,n.IDecorationService),u(5,n.IBufferService),u(6,f.ICoreBrowserService),u(7,f.IThemeService)],o)},9312:function(y,s,a){var d=this&&this.__decorate||function(p,E,T,O){var I,R=arguments.length,N=R<3?E:O===null?O=Object.getOwnPropertyDescriptor(E,T):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(p,E,T,O);else for(var U=p.length-1;U>=0;U--)(I=p[U])&&(N=(R<3?I(N):R>3?I(E,T,N):I(E,T))||N);return R>3&&N&&Object.defineProperty(E,T,N),N},u=this&&this.__param||function(p,E){return function(T,O){E(T,O,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const c=a(9806),f=a(9504),v=a(456),C=a(4725),_=a(8460),n=a(844),o=a(6114),i=a(4841),r=a(511),l=a(2585),m=" ",S=new RegExp(m,"g");let w=s.SelectionService=class extends n.Disposable{constructor(p,E,T,O,I,R,N,U,q){super(),this._element=p,this._screenElement=E,this._linkifier=T,this._bufferService=O,this._coreService=I,this._mouseService=R,this._optionsService=N,this._renderService=U,this._coreBrowserService=q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new r.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Y=>this._handleTrim(Y)),this.register(this._bufferService.buffers.onBufferActivate(Y=>this._handleBufferActivate(Y))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const p=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!p||!E||p[0]===E[0]&&p[1]===E[1])}get selectionText(){const p=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!p||!E)return"";const T=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(p[0]===E[0])return"";const I=p[0]<E[0]?p[0]:E[0],R=p[0]<E[0]?E[0]:p[0];for(let N=p[1];N<=E[1];N++){const U=T.translateBufferLineToString(N,!0,I,R);O.push(U)}}else{const I=p[1]===E[1]?E[0]:void 0;O.push(T.translateBufferLineToString(p[1],!0,p[0],I));for(let R=p[1]+1;R<=E[1]-1;R++){const N=T.lines.get(R),U=T.translateBufferLineToString(R,!0);N!=null&&N.isWrapped?O[O.length-1]+=U:O.push(U)}if(p[1]!==E[1]){const R=T.lines.get(E[1]),N=T.translateBufferLineToString(E[1],!0,0,E[0]);R&&R.isWrapped?O[O.length-1]+=N:O.push(N)}}return O.map(I=>I.replace(S," ")).join(o.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(p){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&p&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(p){const E=this._getMouseBufferCoords(p),T=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(T&&O&&E)&&this._areCoordsInSelection(E,T,O)}isCellInSelection(p,E){const T=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!T||!O)&&this._areCoordsInSelection([p,E],T,O)}_areCoordsInSelection(p,E,T){return p[1]>E[1]&&p[1]<T[1]||E[1]===T[1]&&p[1]===E[1]&&p[0]>=E[0]&&p[0]<T[0]||E[1]<T[1]&&p[1]===T[1]&&p[0]<T[0]||E[1]<T[1]&&p[1]===E[1]&&p[0]>=E[0]}_selectWordAtCursor(p,E){var I,R;const T=(R=(I=this._linkifier.currentLink)==null?void 0:I.link)==null?void 0:R.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(p);return!!O&&(this._selectWordAt(O,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(p,E){this._model.clearSelection(),p=Math.max(p,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,p],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(p){this._model.handleTrim(p)&&this.refresh()}_getMouseBufferCoords(p){const E=this._mouseService.getCoords(p,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(p){let E=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,p,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=T?0:(E>T&&(E-=T),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(p){return o.isMac?p.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:p.shiftKey}handleMouseDown(p){if(this._mouseDownTimeStamp=p.timeStamp,(p.button!==2||!this.hasSelection)&&p.button===0){if(!this._enabled){if(!this.shouldForceSelection(p))return;p.stopPropagation()}p.preventDefault(),this._dragScrollAmount=0,this._enabled&&p.shiftKey?this._handleIncrementalClick(p):p.detail===1?this._handleSingleClick(p):p.detail===2?this._handleDoubleClick(p):p.detail===3&&this._handleTripleClick(p),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(p){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(p))}_handleSingleClick(p){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(p)?3:0,this._model.selectionStart=this._getMouseBufferCoords(p),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(p){this._selectWordAtCursor(p,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(p){const E=this._getMouseBufferCoords(p);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(p){return p.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(p){if(p.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(p),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(p),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const O=T.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const p=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(p.ydisp+this._bufferService.rows,p.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=p.ydisp),this.refresh()}}_handleMouseUp(p){const E=p.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&p.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(p,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const O=(0,f.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const p=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,T=!(!p||!E||p[0]===E[0]&&p[1]===E[1]);T?p&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&p[0]===this._oldSelectionStart[0]&&p[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(p,E,T)):this._oldHasSelection&&this._fireOnSelectionChange(p,E,T)}_fireOnSelectionChange(p,E,T){this._oldSelectionStart=p,this._oldSelectionEnd=E,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(p){this.clearSelection(),this._trimListener.dispose(),this._trimListener=p.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(p,E){let T=E;for(let O=0;E>=O;O++){const I=p.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:I>1&&E!==O&&(T+=I-1)}return T}setSelection(p,E,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[p,E],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(p){this._isClickInSelection(p)||(this._selectWordAtCursor(p,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(p,E,T=!0,O=!0){if(p[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,R=I.lines.get(p[1]);if(!R)return;const N=I.translateBufferLineToString(p[1],!1);let U=this._convertViewportColToCharacterIndex(R,p[0]),q=U;const Y=p[0]-U;let z=0,L=0,A=0,B=0;if(N.charAt(U)===" "){for(;U>0&&N.charAt(U-1)===" ";)U--;for(;q<N.length&&N.charAt(q+1)===" ";)q++}else{let ee=p[0],oe=p[0];R.getWidth(ee)===0&&(z++,ee--),R.getWidth(oe)===2&&(L++,oe++);const ae=R.getString(oe).length;for(ae>1&&(B+=ae-1,q+=ae-1);ee>0&&U>0&&!this._isCharWordSeparator(R.loadCell(ee-1,this._workCell));){R.loadCell(ee-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(z++,ee--):H>1&&(A+=H-1,U-=H-1),U--,ee--}for(;oe<R.length&&q+1<N.length&&!this._isCharWordSeparator(R.loadCell(oe+1,this._workCell));){R.loadCell(oe+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,oe++):H>1&&(B+=H-1,q+=H-1),q++,oe++}}q++;let P=U+Y-z+A,G=Math.min(this._bufferService.cols,q-U+z+L-A-B);if(E||N.slice(U,q).trim()!==""){if(T&&P===0&&R.getCodePoint(0)!==32){const ee=I.lines.get(p[1]-1);if(ee&&R.isWrapped&&ee.getCodePoint(this._bufferService.cols-1)!==32){const oe=this._getWordAt([this._bufferService.cols-1,p[1]-1],!1,!0,!1);if(oe){const ae=this._bufferService.cols-oe.start;P-=ae,G+=ae}}}if(O&&P+G===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){const ee=I.lines.get(p[1]+1);if(ee!=null&&ee.isWrapped&&ee.getCodePoint(0)!==32){const oe=this._getWordAt([0,p[1]+1],!1,!1,!0);oe&&(G+=oe.length)}}return{start:P,length:G}}}_selectWordAt(p,E){const T=this._getWordAt(p,E);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,p[1]--;this._model.selectionStart=[T.start,p[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(p){const E=this._getWordAt(p,!0);if(E){let T=p[1];for(;E.start<0;)E.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,T]}}_isCharWordSeparator(p){return p.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(p.getChars())>=0}_selectLineAt(p){const E=this._bufferService.buffer.getWrappedRangeForLine(p),T={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,i.getRangeLength)(T,this._bufferService.cols)}};s.SelectionService=w=d([u(3,l.IBufferService),u(4,l.ICoreService),u(5,C.IMouseService),u(6,l.IOptionsService),u(7,C.IRenderService),u(8,C.ICoreBrowserService)],w)},4725:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const d=a(8343);s.ICharSizeService=(0,d.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),s.IMouseService=(0,d.createDecorator)("MouseService"),s.IRenderService=(0,d.createDecorator)("RenderService"),s.ISelectionService=(0,d.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,d.createDecorator)("ThemeService"),s.ILinkProviderService=(0,d.createDecorator)("LinkProviderService")},6731:function(y,s,a){var d=this&&this.__decorate||function(w,p,E,T){var O,I=arguments.length,R=I<3?p:T===null?T=Object.getOwnPropertyDescriptor(p,E):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,p,E,T);else for(var N=w.length-1;N>=0;N--)(O=w[N])&&(R=(I<3?O(R):I>3?O(p,E,R):O(p,E))||R);return I>3&&R&&Object.defineProperty(p,E,R),R},u=this&&this.__param||function(w,p){return function(E,T){p(E,T,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const c=a(7239),f=a(8055),v=a(8460),C=a(844),_=a(2585),n=f.css.toColor("#ffffff"),o=f.css.toColor("#000000"),i=f.css.toColor("#ffffff"),r=f.css.toColor("#000000"),l={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],p=[0,95,135,175,215,255];for(let E=0;E<216;E++){const T=p[E/36%6|0],O=p[E/6%6|0],I=p[E%6];w.push({css:f.channels.toCss(T,O,I),rgba:f.channels.toRgba(T,O,I)})}for(let E=0;E<24;E++){const T=8+10*E;w.push({css:f.channels.toCss(T,T,T),rgba:f.channels.toRgba(T,T,T)})}return w})());let m=s.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:o,cursor:i,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:l,selectionBackgroundOpaque:f.color.blend(o,l),selectionInactiveBackgroundTransparent:l,selectionInactiveBackgroundOpaque:f.color.blend(o,l),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){const p=this._colors;if(p.foreground=S(w.foreground,n),p.background=S(w.background,o),p.cursor=S(w.cursor,i),p.cursorAccent=S(w.cursorAccent,r),p.selectionBackgroundTransparent=S(w.selectionBackground,l),p.selectionBackgroundOpaque=f.color.blend(p.background,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundTransparent=S(w.selectionInactiveBackground,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundOpaque=f.color.blend(p.background,p.selectionInactiveBackgroundTransparent),p.selectionForeground=w.selectionForeground?S(w.selectionForeground,f.NULL_COLOR):void 0,p.selectionForeground===f.NULL_COLOR&&(p.selectionForeground=void 0),f.color.isOpaque(p.selectionBackgroundTransparent)&&(p.selectionBackgroundTransparent=f.color.opacity(p.selectionBackgroundTransparent,.3)),f.color.isOpaque(p.selectionInactiveBackgroundTransparent)&&(p.selectionInactiveBackgroundTransparent=f.color.opacity(p.selectionInactiveBackgroundTransparent,.3)),p.ansi=s.DEFAULT_ANSI_COLORS.slice(),p.ansi[0]=S(w.black,s.DEFAULT_ANSI_COLORS[0]),p.ansi[1]=S(w.red,s.DEFAULT_ANSI_COLORS[1]),p.ansi[2]=S(w.green,s.DEFAULT_ANSI_COLORS[2]),p.ansi[3]=S(w.yellow,s.DEFAULT_ANSI_COLORS[3]),p.ansi[4]=S(w.blue,s.DEFAULT_ANSI_COLORS[4]),p.ansi[5]=S(w.magenta,s.DEFAULT_ANSI_COLORS[5]),p.ansi[6]=S(w.cyan,s.DEFAULT_ANSI_COLORS[6]),p.ansi[7]=S(w.white,s.DEFAULT_ANSI_COLORS[7]),p.ansi[8]=S(w.brightBlack,s.DEFAULT_ANSI_COLORS[8]),p.ansi[9]=S(w.brightRed,s.DEFAULT_ANSI_COLORS[9]),p.ansi[10]=S(w.brightGreen,s.DEFAULT_ANSI_COLORS[10]),p.ansi[11]=S(w.brightYellow,s.DEFAULT_ANSI_COLORS[11]),p.ansi[12]=S(w.brightBlue,s.DEFAULT_ANSI_COLORS[12]),p.ansi[13]=S(w.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),p.ansi[14]=S(w.brightCyan,s.DEFAULT_ANSI_COLORS[14]),p.ansi[15]=S(w.brightWhite,s.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const E=Math.min(p.ansi.length-16,w.extendedAnsi.length);for(let T=0;T<E;T++)p.ansi[T+16]=S(w.extendedAnsi[T],s.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let p=0;p<this._restoreColors.ansi.length;++p)this._colors.ansi[p]=this._restoreColors.ansi[p]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(w,p){if(w!==void 0)try{return f.css.toColor(w)}catch(E){}return p}s.ThemeService=m=d([u(0,_.IOptionsService)],m)},6349:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const d=a(8460),u=a(844);class c extends u.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const C=new Array(v);for(let _=0;_<Math.min(v,this.length);_++)C[_]=this._array[this._getCyclicIndex(_)];this._array=C,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let C=this._length;C<v;C++)this._array[C]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,C){this._array[this._getCyclicIndex(v)]=C}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,C,..._){if(C){for(let n=v;n<this._length-C;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+C)];this._length-=C,this.onDeleteEmitter.fire({index:v,amount:C})}for(let n=this._length-1;n>=v;n--)this._array[this._getCyclicIndex(n+_.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<_.length;n++)this._array[this._getCyclicIndex(v+n)]=_[n];if(_.length&&this.onInsertEmitter.fire({index:v,amount:_.length}),this._length+_.length>this._maxLength){const n=this._length+_.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=_.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,C,_){if(!(C<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let o=C-1;o>=0;o--)this.set(v+o+_,this.get(v+o));const n=v+C+_-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<C;n++)this.set(v+n+_,this.get(v+n))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}s.CircularList=c},1439:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(d,u=5){if(typeof d!="object")return d;const c=Array.isArray(d)?[]:{};for(const f in d)c[f]=u<=1?d[f]:d[f]&&a(d[f],u-1);return c}},8055:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let a=0,d=0,u=0,c=0;var f,v,C,_,n;function o(r){const l=r.toString(16);return l.length<2?"0"+l:l}function i(r,l){return r<l?(l+.05)/(r+.05):(r+.05)/(l+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(l,m,S,w){return w!==void 0?"#".concat(o(l)).concat(o(m)).concat(o(S)).concat(o(w)):"#".concat(o(l)).concat(o(m)).concat(o(S))},r.toRgba=function(l,m,S,w=255){return(l<<24|m<<16|S<<8|w)>>>0},r.toColor=function(l,m,S,w){return{css:r.toCss(l,m,S,w),rgba:r.toRgba(l,m,S,w)}}}(f||(s.channels=f={})),function(r){function l(m,S){return c=Math.round(255*S),[a,d,u]=n.toChannels(m.rgba),{css:f.toCss(a,d,u,c),rgba:f.toRgba(a,d,u,c)}}r.blend=function(m,S){if(c=(255&S.rgba)/255,c===1)return{css:S.css,rgba:S.rgba};const w=S.rgba>>24&255,p=S.rgba>>16&255,E=S.rgba>>8&255,T=m.rgba>>24&255,O=m.rgba>>16&255,I=m.rgba>>8&255;return a=T+Math.round((w-T)*c),d=O+Math.round((p-O)*c),u=I+Math.round((E-I)*c),{css:f.toCss(a,d,u),rgba:f.toRgba(a,d,u)}},r.isOpaque=function(m){return(255&m.rgba)==255},r.ensureContrastRatio=function(m,S,w){const p=n.ensureContrastRatio(m.rgba,S.rgba,w);if(p)return f.toColor(p>>24&255,p>>16&255,p>>8&255)},r.opaque=function(m){const S=(255|m.rgba)>>>0;return[a,d,u]=n.toChannels(S),{css:f.toCss(a,d,u),rgba:S}},r.opacity=l,r.multiplyOpacity=function(m,S){return c=255&m.rgba,l(m,c*S/255)},r.toColorRGB=function(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]}}(v||(s.color=v={})),function(r){let l,m;try{const S=document.createElement("canvas");S.width=1,S.height=1;const w=S.getContext("2d",{willReadFrequently:!0});w&&(l=w,l.globalCompositeOperation="copy",m=l.createLinearGradient(0,0,1,1))}catch(S){}r.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return a=parseInt(S.slice(1,2).repeat(2),16),d=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),f.toColor(a,d,u);case 5:return a=parseInt(S.slice(1,2).repeat(2),16),d=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),c=parseInt(S.slice(4,5).repeat(2),16),f.toColor(a,d,u,c);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const w=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return a=parseInt(w[1]),d=parseInt(w[2]),u=parseInt(w[3]),c=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),f.toColor(a,d,u,c);if(!l||!m)throw new Error("css.toColor: Unsupported css format");if(l.fillStyle=m,l.fillStyle=S,typeof l.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(l.fillRect(0,0,1,1),[a,d,u,c]=l.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(a,d,u,c),css:S}}}(C||(s.css=C={})),function(r){function l(m,S,w){const p=m/255,E=S/255,T=w/255;return .2126*(p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}r.relativeLuminance=function(m){return l(m>>16&255,m>>8&255,255&m)},r.relativeLuminance2=l}(_||(s.rgb=_={})),function(r){function l(S,w,p){const E=S>>24&255,T=S>>16&255,O=S>>8&255;let I=w>>24&255,R=w>>16&255,N=w>>8&255,U=i(_.relativeLuminance2(I,R,N),_.relativeLuminance2(E,T,O));for(;U<p&&(I>0||R>0||N>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),N-=Math.max(0,Math.ceil(.1*N)),U=i(_.relativeLuminance2(I,R,N),_.relativeLuminance2(E,T,O));return(I<<24|R<<16|N<<8|255)>>>0}function m(S,w,p){const E=S>>24&255,T=S>>16&255,O=S>>8&255;let I=w>>24&255,R=w>>16&255,N=w>>8&255,U=i(_.relativeLuminance2(I,R,N),_.relativeLuminance2(E,T,O));for(;U<p&&(I<255||R<255||N<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),N=Math.min(255,N+Math.ceil(.1*(255-N))),U=i(_.relativeLuminance2(I,R,N),_.relativeLuminance2(E,T,O));return(I<<24|R<<16|N<<8|255)>>>0}r.blend=function(S,w){if(c=(255&w)/255,c===1)return w;const p=w>>24&255,E=w>>16&255,T=w>>8&255,O=S>>24&255,I=S>>16&255,R=S>>8&255;return a=O+Math.round((p-O)*c),d=I+Math.round((E-I)*c),u=R+Math.round((T-R)*c),f.toRgba(a,d,u)},r.ensureContrastRatio=function(S,w,p){const E=_.relativeLuminance(S>>8),T=_.relativeLuminance(w>>8);if(i(E,T)<p){if(T<E){const R=l(S,w,p),N=i(E,_.relativeLuminance(R>>8));if(N<p){const U=m(S,w,p);return N>i(E,_.relativeLuminance(U>>8))?R:U}return R}const O=m(S,w,p),I=i(E,_.relativeLuminance(O>>8));if(I<p){const R=l(S,w,p);return I>i(E,_.relativeLuminance(R>>8))?O:R}return O}},r.reduceLuminance=l,r.increaseLuminance=m,r.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(n||(s.rgba=n={})),s.toPaddedHex=o,s.contrastRatio=i},8969:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const d=a(844),u=a(2585),c=a(4348),f=a(7866),v=a(744),C=a(7302),_=a(6975),n=a(8460),o=a(1753),i=a(1480),r=a(7994),l=a(9282),m=a(5435),S=a(5981),w=a(2660);let p=!1;class E extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(O=>{var I;(I=this._onScrollApi)==null||I.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const I in O)this.optionsService.options[I]=O[I]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new C.OptionsService(O)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(f.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(i.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new m.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((I,R)=>this._inputHandler.parse(I,R))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,I){this._writeBuffer.write(O,I)}writeSync(O,I){this._logService.logLevel<=u.LogLevelEnum.WARN&&!p&&(this._logService.warn("writeSync is unreliable and will be removed soon."),p=!0),this._writeBuffer.writeSync(O,I)}input(O,I=!0){this.coreService.triggerDataEvent(O,I)}resize(O,I){isNaN(O)||isNaN(I)||(O=Math.max(O,v.MINIMUM_COLS),I=Math.max(I,v.MINIMUM_ROWS),this._bufferService.resize(O,I))}scroll(O,I=!1){this._bufferService.scroll(O,I)}scrollLines(O,I,R){this._bufferService.scrollLines(O,I,R)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const I=O-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(O,I){return this._inputHandler.registerEscHandler(O,I)}registerDcsHandler(O,I){return this._inputHandler.registerDcsHandler(O,I)}registerCsiHandler(O,I){return this._inputHandler.registerCsiHandler(O,I)}registerOscHandler(O,I){return this._inputHandler.registerOscHandler(O,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?O=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(l.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,l.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const I of O)I.dispose()})}}}s.CoreTerminal=E},8460:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){const u=[];for(let c=0;c<this._listeners.length;c++)u.push(this._listeners[c]);for(let c=0;c<u.length;c++)u[c].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(u=>d.fire(u))},s.runAndSubscribe=function(a,d){return d(void 0),a(u=>d(u))}},5435:function(y,s,a){var d=this&&this.__decorate||function(z,L,A,B){var P,G=arguments.length,ee=G<3?L:B===null?B=Object.getOwnPropertyDescriptor(L,A):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(z,L,A,B);else for(var oe=z.length-1;oe>=0;oe--)(P=z[oe])&&(ee=(G<3?P(ee):G>3?P(L,A,ee):P(L,A))||ee);return G>3&&ee&&Object.defineProperty(L,A,ee),ee},u=this&&this.__param||function(z,L){return function(A,B){L(A,B,z)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const c=a(2584),f=a(7116),v=a(2015),C=a(844),_=a(482),n=a(8437),o=a(8460),i=a(643),r=a(511),l=a(3734),m=a(2585),S=a(1480),w=a(6242),p=a(6351),E=a(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function I(z,L){if(z>24)return L.setWinLines||!1;switch(z){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var R;(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(s.WindowsOptionsReportType=R={}));let N=0;class U extends C.Disposable{getAttrData(){return this._curAttrData}constructor(L,A,B,P,G,ee,oe,ae,H=new v.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=A,this._coreService=B,this._logService=P,this._optionsService=G,this._oscLinkService=ee,this._coreMouseService=oe,this._unicodeService=ae,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new q(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,X)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:X.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,X,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:X,data:$})}),this._parser.setDcsHandlerFallback((k,X,$)=>{X==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:X,payload:$})}),this._parser.setPrintHandler((k,X,$)=>this.print(k,X,$)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new w.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new w.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new w.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new w.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new w.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new w.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new w.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new w.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new w.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new w.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new w.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in f.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new p.DcsHandler((k,X)=>this.requestStatusString(k,X)))}_preserveStack(L,A,B,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=B,this._parseStack.position=P}_logSlowResolvingAsync(L){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([L,new Promise((A,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,A){let B,P=this._activeBuffer.x,G=this._activeBuffer.y,ee=0;const oe=this._parseStack.paused;if(oe){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(B),B;P=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>O&&(ee=this._parseStack.position+O)}if(this._logService.logLevel<=m.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?' "'.concat(L,'"'):' "'.concat(Array.prototype.map.call(L,k=>String.fromCharCode(k)).join(""),'"')),typeof L=="string"?L.split("").map(k=>k.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(L.length,O))),oe||this._dirtyRowTracker.clearRange(),L.length>O)for(let k=ee;k<L.length;k+=O){const X=k+O<L.length?k+O:L.length,$=typeof L=="string"?this._stringDecoder.decode(L.substring(k,X),this._parseBuffer):this._utf8Decoder.decode(L.subarray(k,X),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,$))return this._preserveStack(P,G,$,k),this._logSlowResolvingAsync(B),B}else if(!oe){const k=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,k))return this._preserveStack(P,G,k,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===P&&this._activeBuffer.y===G||this._onCursorMove.fire();const ae=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(ae,this._bufferService.rows-1))}print(L,A,B){let P,G;const ee=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,ae=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,X=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-A>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodepoint(this._activeBuffer.x-1,0,1,X);let ie=this._parser.precedingJoinState;for(let K=A;K<B;++K){if(P=L[K],P<127&&ee){const j=ee[String.fromCharCode(P)];j&&(P=j.charCodeAt(0))}const D=this._unicodeService.charProperties(P,ie);G=S.UnicodeService.extractWidth(D);const M=S.UnicodeService.extractShouldJoin(D),F=M?S.UnicodeService.extractWidth(ie):0;if(ie=D,oe&&this._onA11yChar.fire((0,_.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+G-F>ae){if(H){const j=$;let W=this._activeBuffer.x-F;for(this._activeBuffer.x=F,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),F>0&&$ instanceof n.BufferLine&&$.copyCellsFrom(j,W,0,F,!1);W<ae;)j.setCellFromCodepoint(W++,0,1,X)}else if(this._activeBuffer.x=ae-1,G===2)continue}if(M&&this._activeBuffer.x){const j=$.getWidth(this._activeBuffer.x-1)?1:2;$.addCodepointToCell(this._activeBuffer.x-j,P,G);for(let W=G-F;--W>=0;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,X)}else if(k&&($.insertCells(this._activeBuffer.x,G-F,this._activeBuffer.getNullCell(X)),$.getWidth(ae-1)===2&&$.setCellFromCodepoint(ae-1,i.NULL_CELL_CODE,i.NULL_CELL_WIDTH,X)),$.setCellFromCodepoint(this._activeBuffer.x++,P,G,X),G>0)for(;--G;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,X)}this._parser.precedingJoinState=ie,this._activeBuffer.x<ae&&B-A>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodepoint(this._activeBuffer.x,0,1,X),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,A){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,A):this._parser.registerCsiHandler(L,B=>!I(B.params[0],this._optionsService.rawOptions.windowOptions)||A(B))}registerDcsHandler(L,A){return this._parser.registerDcsHandler(L,new p.DcsHandler(A))}registerEscHandler(L,A){return this._parser.registerEscHandler(L,A)}registerOscHandler(L,A){return this._parser.registerOscHandler(L,new w.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=L,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+A)}cursorUp(L){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const A=L.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=L.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=L.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const A=L.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,A,B,P=!1,G=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);ee.replaceCells(A,B,this._activeBuffer.getNullCell(this._eraseAttrData()),G),P&&(ee.isWrapped=!1)}_resetBufferLine(L,A=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),B.isWrapped=!1)}eraseInDisplay(L,A=!1){let B;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);B<this._bufferService.rows;B++)this._resetBufferLine(B,A);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,A);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(L,A=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let A=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;A--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let A=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;A--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let A=L.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let A=L.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);P.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);P.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);P.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);P.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const A=this._parser.precedingJoinState;if(!A)return!0;const B=L.params[0]||1,P=S.UnicodeService.extractWidth(A),G=this._activeBuffer.x-P,ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(G),oe=new Uint32Array(ee.length*B);let ae=0;for(let k=0;k<ee.length;){const X=ee.codePointAt(k)||0;oe[ae++]=X,k+=X>65535?2:1}let H=ae;for(let k=1;k<B;++k)oe.copyWithin(H,0,ae),H+=ae;return this.print(oe,0,H),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,A){const B=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:G}=this._coreMouseService,ee=this._coreService,{buffers:oe,cols:ae}=this._bufferService,{active:H,alt:k}=oe,X=this._optionsService.rawOptions,$=M=>M?1:2,ie=L.params[0];return K=ie,D=A?ie===2?4:ie===4?$(ee.modes.insertMode):ie===12?3:ie===20?$(X.convertEol):0:ie===1?$(B.applicationCursorKeys):ie===3?X.windowOptions.setWinLines?ae===80?2:ae===132?1:0:0:ie===6?$(B.origin):ie===7?$(B.wraparound):ie===8?3:ie===9?$(P==="X10"):ie===12?$(X.cursorBlink):ie===25?$(!ee.isCursorHidden):ie===45?$(B.reverseWraparound):ie===66?$(B.applicationKeypad):ie===67?4:ie===1e3?$(P==="VT200"):ie===1002?$(P==="DRAG"):ie===1003?$(P==="ANY"):ie===1004?$(B.sendFocus):ie===1005?4:ie===1006?$(G==="SGR"):ie===1015?4:ie===1016?$(G==="SGR_PIXELS"):ie===1048?1:ie===47||ie===1047||ie===1049?$(H===k):ie===2004?$(B.bracketedPasteMode):0,ee.triggerDataEvent("".concat(c.C0.ESC,"[").concat(A?"":"?").concat(K,";").concat(D,"$y")),!0;var K,D}_updateAttrColor(L,A,B,P,G){return A===2?(L|=50331648,L&=-16777216,L|=l.AttributeData.fromColorRGB([B,P,G])):A===5&&(L&=-50331904,L|=33554432|255&B),L}_extractColor(L,A,B){const P=[0,0,-1,0,0,0];let G=0,ee=0;do{if(P[ee+G]=L.params[A+ee],L.hasSubParams(A+ee)){const oe=L.getSubParams(A+ee);let ae=0;do P[1]===5&&(G=1),P[ee+ae+1+G]=oe[ae];while(++ae<oe.length&&ae+ee+1+G<P.length);break}if(P[1]===5&&ee+G>=2||P[1]===2&&ee+G>=5)break;P[1]&&(G=1)}while(++ee+A<L.length&&ee+G<P.length);for(let oe=2;oe<P.length;++oe)P[oe]===-1&&(P[oe]=0);switch(P[0]){case 38:B.fg=this._updateAttrColor(B.fg,P[1],P[3],P[4],P[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,P[1],P[3],P[4],P[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,P[1],P[3],P[4],P[5])}return ee}_processUnderline(L,A){A.extended=A.extended.clone(),(!~L||L>5)&&(L=1),A.extended.underlineStyle=L,A.fg|=268435456,L===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(L){L.fg=n.DEFAULT_ATTR_DATA.fg,L.bg=n.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=L.length;let B;const P=this._curAttrData;for(let G=0;G<A;G++)B=L.params[G],B>=30&&B<=37?(P.fg&=-50331904,P.fg|=16777216|B-30):B>=40&&B<=47?(P.bg&=-50331904,P.bg|=16777216|B-40):B>=90&&B<=97?(P.fg&=-50331904,P.fg|=16777224|B-90):B>=100&&B<=107?(P.bg&=-50331904,P.bg|=16777224|B-100):B===0?this._processSGR0(P):B===1?P.fg|=134217728:B===3?P.bg|=67108864:B===4?(P.fg|=268435456,this._processUnderline(L.hasSubParams(G)?L.getSubParams(G)[0]:1,P)):B===5?P.fg|=536870912:B===7?P.fg|=67108864:B===8?P.fg|=1073741824:B===9?P.fg|=2147483648:B===2?P.bg|=134217728:B===21?this._processUnderline(2,P):B===22?(P.fg&=-134217729,P.bg&=-134217729):B===23?P.bg&=-67108865:B===24?(P.fg&=-268435457,this._processUnderline(0,P)):B===25?P.fg&=-536870913:B===27?P.fg&=-67108865:B===28?P.fg&=-1073741825:B===29?P.fg&=2147483647:B===39?(P.fg&=-67108864,P.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):B===49?(P.bg&=-67108864,P.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?G+=this._extractColor(L,G,P):B===53?P.bg|=1073741824:B===55?P.bg&=-1073741825:B===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):B===100?(P.fg&=-67108864,P.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent("".concat(c.C0.ESC,"[0n"));break;case 6:const A=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent("".concat(c.C0.ESC,"[").concat(A,";").concat(B,"R"))}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const A=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent("".concat(c.C0.ESC,"[?").concat(A,";").concat(B,"R"))}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const A=L.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=A%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(L){const A=L.params[0]||1;let B;return(L.length<2||(B=L.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(L){if(!I(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent("".concat(c.C0.ESC,"[8;").concat(this._bufferService.rows,";").concat(this._bufferService.cols,"t"));break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const A=[],B=L.split(";");for(;B.length>1;){const P=B.shift(),G=B.shift();if(/^\d+$/.exec(P)){const ee=parseInt(P);if(Y(ee))if(G==="?")A.push({type:0,index:ee});else{const oe=(0,E.parseColor)(G);oe&&A.push({type:1,index:ee,color:oe})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(L){const A=L.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(L,A){this._getCurrentLinkId()&&this._finishHyperlink();const B=L.split(":");let P;const G=B.findIndex(ee=>ee.startsWith("id="));return G!==-1&&(P=B[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,A){const B=L.split(";");for(let P=0;P<B.length&&!(A>=this._specialColors.length);++P,++A)if(B[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const G=(0,E.parseColor)(B[P]);G&&this._onColor.fire([{type:1,index:this._specialColors[A],color:G}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const A=[],B=L.split(";");for(let P=0;P<B.length;++P)if(/^\d+$/.exec(B[P])){const G=parseInt(B[P]);Y(G)&&A.push({type:2,index:G})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(T[L[0]],f.CHARSETS[L[1]]||f.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new r.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const B=this._activeBuffer.ybase+this._activeBuffer.y+A,P=this._activeBuffer.lines.get(B);P&&(P.fill(L),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,A){const B=this._bufferService.buffer,P=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent("".concat(c.C0.ESC).concat(G).concat(c.C0.ESC,"\\")),!0))(L==='"q'?"P1$r".concat(this._curAttrData.isProtected()?1:0,'"q'):L==='"p'?'P1$r61;1"p':L==="r"?"P1$r".concat(B.scrollTop+1,";").concat(B.scrollBottom+1,"r"):L==="m"?"P1$r0m":L===" q"?"P1$r".concat({block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)," q"):"P0$r")}markRangeDirty(L,A){this._dirtyRowTracker.markRangeDirty(L,A)}}s.InputHandler=U;let q=class{constructor(z){this._bufferService=z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(z){z<this.start?this.start=z:z>this.end&&(this.end=z)}markRangeDirty(z,L){z>L&&(N=z,z=L,L=N),z<this.start&&(this.start=z),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(z){return 0<=z&&z<256}q=d([u(0,m.IBufferService)],q)},844:(y,s)=>{function a(d){for(const u of d)u.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const u=this._disposables.indexOf(d);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var u;this._isDisposed||d===this._value||((u=this._value)==null||u.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)==null||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},1505:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(u,c,f){this._data[u]||(this._data[u]={}),this._data[u][c]=f}get(u,c){return this._data[u]?this._data[u][c]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,u,c,f,v){this._data.get(d,u)||this._data.set(d,u,new a),this._data.get(d,u).set(c,f,v)}get(d,u,c,f){var v;return(v=this._data.get(d,u))==null?void 0:v.get(c,f)}clear(){this._data.clear()}}},6114:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;const a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const u=a.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(a=this._search(this._getKey(d)),this._array.splice(a,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const u=this._getKey(d);if(u===void 0||(a=this._search(u),a===-1)||this._getKey(this._array[a])!==u)return!1;do if(this._array[a]===d)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===u);return!1}*getKeyIterator(d){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===d)}forEachByKey(d,u){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do u(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===d)}values(){return[...this._array].values()}_search(d){let u=0,c=this._array.length-1;for(;c>=u;){let f=u+c>>1;const v=this._getKey(this._array[f]);if(v>d)c=f-1;else{if(!(v<d)){for(;f>0&&this._getKey(this._array[f-1])===d;)f--;return f}u=f+1}}return u}}},7226:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=a(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let C=0,_=0,n=v.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),_=Math.max(C,_),o=v.timeRemaining(),1.5*_>o)return n-C<-20&&console.warn("task queue exceeded allotted deadline by ".concat(Math.abs(Math.round(n-C)),"ms")),void this._start();n=o}this.clear()}}class c extends u{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const C=Date.now()+v;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}s.PriorityTaskQueue=c,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(f){return requestIdleCallback(f)}_cancelCallback(f){cancelIdleCallback(f)}}:c,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(f){this._queue.clear(),this._queue.enqueue(f)}flush(){this._queue.flush()}}},9282:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const d=a(643);s.updateWindowsModeWrappedState=function(u){const c=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),f=c==null?void 0:c.get(u.cols-1),v=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);v&&f&&(v.isWrapped=f[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&f[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){const c=new a;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){const c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,f=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=f}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},9092:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const d=a(6349),u=a(7226),c=a(3734),f=a(8437),v=a(4634),C=a(511),_=a(643),n=a(4863),o=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(i,r,l){this._hasScrollback=i,this._optionsService=r,this._bufferService=l,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(i){return i?(this._nullCell.fg=i.fg,this._nullCell.bg=i.bg,this._nullCell.extended=i.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(i){return i?(this._whitespaceCell.fg=i.fg,this._whitespaceCell.bg=i.bg,this._whitespaceCell.extended=i.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(i,r){return new f.BufferLine(this._bufferService.cols,this.getNullCell(i),r)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows}_getCorrectBufferLength(i){if(!this._hasScrollback)return i;const r=i+this._optionsService.rawOptions.scrollback;return r>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:r}fillViewportRows(i){if(this.lines.length===0){i===void 0&&(i=f.DEFAULT_ATTR_DATA);let r=this._rows;for(;r--;)this.lines.push(this.getBlankLine(i))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(i,r){const l=this.getNullCell(f.DEFAULT_ATTR_DATA);let m=0;const S=this._getCorrectBufferLength(r);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<i)for(let p=0;p<this.lines.length;p++)m+=+this.lines.get(p).resize(i,l);let w=0;if(this._rows<r)for(let p=this._rows;p<r;p++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new f.BufferLine(i,l)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(i,l)));else for(let p=this._rows;p>r;p--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const p=this.lines.length-S;p>0&&(this.lines.trimStart(p),this.ybase=Math.max(this.ybase-p,0),this.ydisp=Math.max(this.ydisp-p,0),this.savedY=Math.max(this.savedY-p,0)),this.lines.maxLength=S}this.x=Math.min(this.x,i-1),this.y=Math.min(this.y,r-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,i-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(i,r),this._cols>i))for(let w=0;w<this.lines.length;w++)m+=+this.lines.get(w).resize(i,l);this._cols=i,this._rows=r,this._memoryCleanupQueue.clear(),m>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let i=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,i=!1);let r=0;for(;this._memoryCleanupPosition<this.lines.length;)if(r+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),r>100)return!0;return i}get _isReflowEnabled(){const i=this._optionsService.rawOptions.windowsPty;return i&&i.buildNumber?this._hasScrollback&&i.backend==="conpty"&&i.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(i,r){this._cols!==i&&(i>this._cols?this._reflowLarger(i,r):this._reflowSmaller(i,r))}_reflowLarger(i,r){const l=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,i,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(l.length>0){const m=(0,v.reflowLargerCreateNewLayout)(this.lines,l);(0,v.reflowLargerApplyNewLayout)(this.lines,m.layout),this._reflowLargerAdjustViewport(i,r,m.countRemoved)}}_reflowLargerAdjustViewport(i,r,l){const m=this.getNullCell(f.DEFAULT_ATTR_DATA);let S=l;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new f.BufferLine(i,m))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-l,0)}_reflowSmaller(i,r){const l=this.getNullCell(f.DEFAULT_ATTR_DATA),m=[];let S=0;for(let w=this.lines.length-1;w>=0;w--){let p=this.lines.get(w);if(!p||!p.isWrapped&&p.getTrimmedLength()<=i)continue;const E=[p];for(;p.isWrapped&&w>0;)p=this.lines.get(--w),E.unshift(p);const T=this.ybase+this.y;if(T>=w&&T<w+E.length)continue;const O=E[E.length-1].getTrimmedLength(),I=(0,v.reflowSmallerGetNewLineLengths)(E,this._cols,i),R=I.length-E.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);const U=[];for(let B=0;B<R;B++){const P=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);U.push(P)}U.length>0&&(m.push({start:w+E.length+S,newLines:U}),S+=U.length),E.push(...U);let q=I.length-1,Y=I[q];Y===0&&(q--,Y=I[q]);let z=E.length-R-1,L=O;for(;z>=0;){const B=Math.min(L,Y);if(E[q]===void 0)break;if(E[q].copyCellsFrom(E[z],L-B,Y-B,B,!0),Y-=B,Y===0&&(q--,Y=I[q]),L-=B,L===0){z--;const P=Math.max(z,0);L=(0,v.getWrappedLineTrimmedLength)(E,P,this._cols)}}for(let B=0;B<E.length;B++)I[B]<i&&E[B].setCell(I[B],l);let A=R-N;for(;A-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+r-1)}if(m.length>0){const w=[],p=[];for(let q=0;q<this.lines.length;q++)p.push(this.lines.get(q));const E=this.lines.length;let T=E-1,O=0,I=m[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let R=0;for(let q=Math.min(this.lines.maxLength-1,E+S-1);q>=0;q--)if(I&&I.start>T+R){for(let Y=I.newLines.length-1;Y>=0;Y--)this.lines.set(q--,I.newLines[Y]);q++,w.push({index:T+1,amount:I.newLines.length}),R+=I.newLines.length,I=m[++O]}else this.lines.set(q,p[T--]);let N=0;for(let q=w.length-1;q>=0;q--)w[q].index+=N,this.lines.onInsertEmitter.fire(w[q]),N+=w[q].amount;const U=Math.max(0,E+S-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}}translateBufferLineToString(i,r,l=0,m){const S=this.lines.get(i);return S?S.translateToString(r,l,m):""}getWrappedRangeForLine(i){let r=i,l=i;for(;r>0&&this.lines.get(r).isWrapped;)r--;for(;l+1<this.lines.length&&this.lines.get(l+1).isWrapped;)l++;return{first:r,last:l}}setupTabStops(i){for(i!=null?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this._cols;i+=this._optionsService.rawOptions.tabStopWidth)this.tabs[i]=!0}prevStop(i){for(i==null&&(i=this.x);!this.tabs[--i]&&i>0;);return i>=this._cols?this._cols-1:i<0?0:i}nextStop(i){for(i==null&&(i=this.x);!this.tabs[++i]&&i<this._cols;);return i>=this._cols?this._cols-1:i<0?0:i}clearMarkers(i){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].line===i&&(this.markers[r].dispose(),this.markers.splice(r--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].dispose(),this.markers.splice(i--,1);this._isClearing=!1}addMarker(i){const r=new n.Marker(i);return this.markers.push(r),r.register(this.lines.onTrim(l=>{r.line-=l,r.line<0&&r.dispose()})),r.register(this.lines.onInsert(l=>{r.line>=l.index&&(r.line+=l.amount)})),r.register(this.lines.onDelete(l=>{r.line>=l.index&&r.line<l.index+l.amount&&r.dispose(),r.line>l.index&&(r.line-=l.amount)})),r.register(r.onDispose(()=>this._removeMarker(r))),r}_removeMarker(i){this._isClearing||this.markers.splice(this.markers.indexOf(i),1)}}},8437:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const d=a(3734),u=a(511),c=a(643),f=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let v=0;class C{constructor(n,o,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const r=o||u.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let l=0;l<n;++l)this.setCell(l,r);this.length=n}get(n){const o=this._data[3*n+0],i=2097151&o;return[this._data[3*n+1],2097152&o?this._combined[n]:i?(0,f.stringFromCodePoint)(i):"",o>>22,2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):i]}set(n,o){this._data[3*n+1]=o[c.CHAR_DATA_ATTR_INDEX],o[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=o[1],this._data[3*n+0]=2097152|n|o[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=o[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const o=this._data[3*n+0];return 2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&o}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const o=this._data[3*n+0];return 2097152&o?this._combined[n]:2097151&o?(0,f.stringFromCodePoint)(2097151&o):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,o){return v=3*n,o.content=this._data[v+0],o.fg=this._data[v+1],o.bg=this._data[v+2],2097152&o.content&&(o.combinedData=this._combined[n]),268435456&o.bg&&(o.extended=this._extendedAttrs[n]),o}setCell(n,o){2097152&o.content&&(this._combined[n]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=o.content,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg}setCellFromCodepoint(n,o,i,r){268435456&r.bg&&(this._extendedAttrs[n]=r.extended),this._data[3*n+0]=o|i<<22,this._data[3*n+1]=r.fg,this._data[3*n+2]=r.bg}addCodepointToCell(n,o,i){let r=this._data[3*n+0];2097152&r?this._combined[n]+=(0,f.stringFromCodePoint)(o):2097151&r?(this._combined[n]=(0,f.stringFromCodePoint)(2097151&r)+(0,f.stringFromCodePoint)(o),r&=-2097152,r|=2097152):r=o|4194304,i&&(r&=-12582913,r|=i<<22),this._data[3*n+0]=r}insertCells(n,o,i){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,i),o<this.length-n){const r=new u.CellData;for(let l=this.length-n-o-1;l>=0;--l)this.setCell(n+o+l,this.loadCell(n+l,r));for(let l=0;l<o;++l)this.setCell(n+l,i)}else for(let r=n;r<this.length;++r)this.setCell(r,i);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(n,o,i){if(n%=this.length,o<this.length-n){const r=new u.CellData;for(let l=0;l<this.length-n-o;++l)this.setCell(n+l,this.loadCell(n+o+l,r));for(let l=this.length-o;l<this.length;++l)this.setCell(l,i)}else for(let r=n;r<this.length;++r)this.setCell(r,i);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,i),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,i)}replaceCells(n,o,i,r=!1){if(r)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,i),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodepoint(o,0,1,i);n<o&&n<this.length;)this.isProtected(n)||this.setCell(n,i),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,i),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o,0,1,i);n<o&&n<this.length;)this.setCell(n++,i)}resize(n,o){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const r=new Uint32Array(i);r.set(this._data),this._data=r}for(let r=this.length;r<n;++r)this.setCell(r,o)}else{this._data=this._data.subarray(0,i);const r=Object.keys(this._combined);for(let m=0;m<r.length;m++){const S=parseInt(r[m],10);S>=n&&delete this._combined[S]}const l=Object.keys(this._extendedAttrs);for(let m=0;m<l.length;m++){const S=parseInt(l[m],10);S>=n&&delete this._extendedAttrs[S]}}return this.length=n,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,o=!1){if(o)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,n);else{this._combined={},this._extendedAttrs={};for(let i=0;i<this.length;++i)this.setCell(i,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const o in n._combined)this._combined[o]=n._combined[o];this._extendedAttrs={};for(const o in n._extendedAttrs)this._extendedAttrs[o]=n._extendedAttrs[o];this.isWrapped=n.isWrapped}clone(){const n=new C(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const o in this._combined)n._combined[o]=this._combined[o];for(const o in this._extendedAttrs)n._extendedAttrs[o]=this._extendedAttrs[o];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,o,i,r,l){const m=n._data;if(l)for(let w=r-1;w>=0;w--){for(let p=0;p<3;p++)this._data[3*(i+w)+p]=m[3*(o+w)+p];268435456&m[3*(o+w)+2]&&(this._extendedAttrs[i+w]=n._extendedAttrs[o+w])}else for(let w=0;w<r;w++){for(let p=0;p<3;p++)this._data[3*(i+w)+p]=m[3*(o+w)+p];268435456&m[3*(o+w)+2]&&(this._extendedAttrs[i+w]=n._extendedAttrs[o+w])}const S=Object.keys(n._combined);for(let w=0;w<S.length;w++){const p=parseInt(S[w],10);p>=o&&(this._combined[p-o+i]=n._combined[p])}}translateToString(n,o,i,r){o=o!=null?o:0,i=i!=null?i:this.length,n&&(i=Math.min(i,this.getTrimmedLength())),r&&(r.length=0);let l="";for(;o<i;){const m=this._data[3*o+0],S=2097151&m,w=2097152&m?this._combined[o]:S?(0,f.stringFromCodePoint)(S):c.WHITESPACE_CELL_CHAR;if(l+=w,r)for(let p=0;p<w.length;++p)r.push(o);o+=m>>22||1}return r&&r.push(o),l}}s.BufferLine=C},4841:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,d){if(a.start.y>a.end.y)throw new Error("Buffer range end (".concat(a.end.x,", ").concat(a.end.y,") cannot be before start (").concat(a.start.x,", ").concat(a.start.y,")"));return d*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(y,s)=>{function a(d,u,c){if(u===d.length-1)return d[u].getTrimmedLength();const f=!d[u].hasContent(c-1)&&d[u].getWidth(c-1)===1,v=d[u+1].getWidth(0)===2;return f&&v?c-1:c}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(d,u,c,f,v){const C=[];for(let _=0;_<d.length-1;_++){let n=_,o=d.get(++n);if(!o.isWrapped)continue;const i=[d.get(_)];for(;n<d.length&&o.isWrapped;)i.push(o),o=d.get(++n);if(f>=_&&f<n){_+=i.length-1;continue}let r=0,l=a(i,r,u),m=1,S=0;for(;m<i.length;){const p=a(i,m,u),E=p-S,T=c-l,O=Math.min(E,T);i[r].copyCellsFrom(i[m],S,l,O,!1),l+=O,l===c&&(r++,l=0),S+=O,S===p&&(m++,S=0),l===0&&r!==0&&i[r-1].getWidth(c-1)===2&&(i[r].copyCellsFrom(i[r-1],c-1,l++,1,!1),i[r-1].setCell(c-1,v))}i[r].replaceCells(l,c,v);let w=0;for(let p=i.length-1;p>0&&(p>r||i[p].getTrimmedLength()===0);p--)w++;w>0&&(C.push(_+i.length-w),C.push(w)),_+=i.length-1}return C},s.reflowLargerCreateNewLayout=function(d,u){const c=[];let f=0,v=u[f],C=0;for(let _=0;_<d.length;_++)if(v===_){const n=u[++f];d.onDeleteEmitter.fire({index:_-C,amount:n}),_+=n-1,C+=n,v=u[++f]}else c.push(_);return{layout:c,countRemoved:C}},s.reflowLargerApplyNewLayout=function(d,u){const c=[];for(let f=0;f<u.length;f++)c.push(d.get(u[f]));for(let f=0;f<c.length;f++)d.set(f,c[f]);d.length=u.length},s.reflowSmallerGetNewLineLengths=function(d,u,c){const f=[],v=d.map((o,i)=>a(d,i,u)).reduce((o,i)=>o+i);let C=0,_=0,n=0;for(;n<v;){if(v-n<c){f.push(v-n);break}C+=c;const o=a(d,_,u);C>o&&(C-=o,_++);const i=d[_].getWidth(C-1)===2;i&&C--;const r=i?c-1:c;f.push(r),n+=r}return f},s.getWrappedLineTrimmedLength=a},5295:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const d=a(8460),u=a(844),c=a(9092);class f extends u.Disposable{constructor(C,_){super(),this._optionsService=C,this._bufferService=_,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,_){this._normal.resize(C,_),this._alt.resize(C,_),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}s.BufferSet=f},511:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=a(482),u=a(643),c=a(3734);class f extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const _=new f;return _.setFromCharData(C),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(C[u.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(C[u.CHAR_DATA_CHAR_INDEX].length===2){const n=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const o=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(n-55296)+o-56320+65536|C[u.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[u.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=C[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=f},643:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const d=a(8460),u=a(844);class c{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}s.Marker=c,c._nextId=1},7116:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.CHARSETS.A={"#":"£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},s.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},s.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},s.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},s.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},s.CHARSETS.H=s.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(y,s)=>{var a,d,u;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF="\n",c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL=""}(a||(s.C0=a={})),function(c){c.PAD="",c.HOP="",c.BPH="",c.NBH="",c.IND="",c.NEL="",c.SSA="",c.ESA="",c.HTS="",c.HTJ="",c.VTS="",c.PLD="",c.PLU="",c.RI="",c.SS2="",c.SS3="",c.DCS="",c.PU1="",c.PU2="",c.STS="",c.CCH="",c.MW="",c.SPA="",c.EPA="",c.SOS="",c.SGCI="",c.SCI="",c.CSI="",c.ST="",c.OSC="",c.PM="",c.APC=""}(d||(s.C1=d={})),function(c){c.ST="".concat(a.ESC,"\\")}(u||(s.C1_ESCAPED=u={}))},7399:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const d=a(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(c,f,v,C){const _={type:0,cancel:!1,key:void 0},n=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?_.key=f?d.C0.ESC+"OA":d.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?_.key=f?d.C0.ESC+"OD":d.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?_.key=f?d.C0.ESC+"OC":d.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(_.key=f?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:_.key=c.ctrlKey?"\b":d.C0.DEL,c.altKey&&(_.key=d.C0.ESC+_.key);break;case 9:if(c.shiftKey){_.key=d.C0.ESC+"[Z";break}_.key=d.C0.HT,_.cancel=!0;break;case 13:_.key=c.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,_.cancel=!0;break;case 27:_.key=d.C0.ESC,c.altKey&&(_.key=d.C0.ESC+d.C0.ESC),_.cancel=!0;break;case 37:if(c.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"D",_.key===d.C0.ESC+"[1;3D"&&(_.key=d.C0.ESC+(v?"b":"[1;5D"))):_.key=f?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(c.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"C",_.key===d.C0.ESC+"[1;3C"&&(_.key=d.C0.ESC+(v?"f":"[1;5C"))):_.key=f?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(c.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"A",v||_.key!==d.C0.ESC+"[1;3A"||(_.key=d.C0.ESC+"[1;5A")):_.key=f?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(c.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"B",v||_.key!==d.C0.ESC+"[1;3B"||(_.key=d.C0.ESC+"[1;5B")):_.key=f?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(_.key=d.C0.ESC+"[2~");break;case 46:_.key=n?d.C0.ESC+"[3;"+(n+1)+"~":d.C0.ESC+"[3~";break;case 36:_.key=n?d.C0.ESC+"[1;"+(n+1)+"H":f?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:_.key=n?d.C0.ESC+"[1;"+(n+1)+"F":f?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:c.shiftKey?_.type=2:c.ctrlKey?_.key=d.C0.ESC+"[5;"+(n+1)+"~":_.key=d.C0.ESC+"[5~";break;case 34:c.shiftKey?_.type=3:c.ctrlKey?_.key=d.C0.ESC+"[6;"+(n+1)+"~":_.key=d.C0.ESC+"[6~";break;case 112:_.key=n?d.C0.ESC+"[1;"+(n+1)+"P":d.C0.ESC+"OP";break;case 113:_.key=n?d.C0.ESC+"[1;"+(n+1)+"Q":d.C0.ESC+"OQ";break;case 114:_.key=n?d.C0.ESC+"[1;"+(n+1)+"R":d.C0.ESC+"OR";break;case 115:_.key=n?d.C0.ESC+"[1;"+(n+1)+"S":d.C0.ESC+"OS";break;case 116:_.key=n?d.C0.ESC+"[15;"+(n+1)+"~":d.C0.ESC+"[15~";break;case 117:_.key=n?d.C0.ESC+"[17;"+(n+1)+"~":d.C0.ESC+"[17~";break;case 118:_.key=n?d.C0.ESC+"[18;"+(n+1)+"~":d.C0.ESC+"[18~";break;case 119:_.key=n?d.C0.ESC+"[19;"+(n+1)+"~":d.C0.ESC+"[19~";break;case 120:_.key=n?d.C0.ESC+"[20;"+(n+1)+"~":d.C0.ESC+"[20~";break;case 121:_.key=n?d.C0.ESC+"[21;"+(n+1)+"~":d.C0.ESC+"[21~";break;case 122:_.key=n?d.C0.ESC+"[23;"+(n+1)+"~":d.C0.ESC+"[23~";break;case 123:_.key=n?d.C0.ESC+"[24;"+(n+1)+"~":d.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(v&&!C||!c.altKey||c.metaKey)!v||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?_.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(_.key=d.C0.US),c.key==="@"&&(_.key=d.C0.NUL)):c.keyCode===65&&(_.type=1);else{const o=u[c.keyCode],i=o==null?void 0:o[c.shiftKey?1:0];if(i)_.key=d.C0.ESC+i;else if(c.keyCode>=65&&c.keyCode<=90){const r=c.ctrlKey?c.keyCode-64:c.keyCode+32;let l=String.fromCharCode(r);c.shiftKey&&(l=l.toUpperCase()),_.key=d.C0.ESC+l}else if(c.keyCode===32)_.key=d.C0.ESC+(c.ctrlKey?d.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let r=c.code.slice(3,4);c.shiftKey||(r=r.toLowerCase()),_.key=d.C0.ESC+r,_.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?_.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?_.key=d.C0.NUL:c.keyCode>=51&&c.keyCode<=55?_.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?_.key=d.C0.DEL:c.keyCode===219?_.key=d.C0.ESC:c.keyCode===220?_.key=d.C0.FS:c.keyCode===221&&(_.key=d.C0.GS)}return _}},482:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,u=a.length){let c="";for(let f=d;f<u;++f){let v=a[f];v>65535?(v-=65536,c+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):c+=String.fromCharCode(v)}return c},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){const u=a.length;if(!u)return 0;let c=0,f=0;if(this._interim){const v=a.charCodeAt(f++);56320<=v&&v<=57343?d[c++]=1024*(this._interim-55296)+v-56320+65536:(d[c++]=this._interim,d[c++]=v),this._interim=0}for(let v=f;v<u;++v){const C=a.charCodeAt(v);if(55296<=C&&C<=56319){if(++v>=u)return this._interim=C,c;const _=a.charCodeAt(v);56320<=_&&_<=57343?d[c++]=1024*(C-55296)+_-56320+65536:(d[c++]=C,d[c++]=_)}else C!==65279&&(d[c++]=C)}return c}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){const u=a.length;if(!u)return 0;let c,f,v,C,_=0,n=0,o=0;if(this.interim[0]){let l=!1,m=this.interim[0];m&=(224&m)==192?31:(240&m)==224?15:7;let S,w=0;for(;(S=63&this.interim[++w])&&w<4;)m<<=6,m|=S;const p=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=p-w;for(;o<E;){if(o>=u)return 0;if(S=a[o++],(192&S)!=128){o--,l=!0;break}this.interim[w++]=S,m<<=6,m|=63&S}l||(p===2?m<128?o--:d[_++]=m:p===3?m<2048||m>=55296&&m<=57343||m===65279||(d[_++]=m):m<65536||m>1114111||(d[_++]=m)),this.interim.fill(0)}const i=u-4;let r=o;for(;r<u;){for(;!(!(r<i)||128&(c=a[r])||128&(f=a[r+1])||128&(v=a[r+2])||128&(C=a[r+3]));)d[_++]=c,d[_++]=f,d[_++]=v,d[_++]=C,r+=4;if(c=a[r++],c<128)d[_++]=c;else if((224&c)==192){if(r>=u)return this.interim[0]=c,_;if(f=a[r++],(192&f)!=128){r--;continue}if(n=(31&c)<<6|63&f,n<128){r--;continue}d[_++]=n}else if((240&c)==224){if(r>=u)return this.interim[0]=c,_;if(f=a[r++],(192&f)!=128){r--;continue}if(r>=u)return this.interim[0]=c,this.interim[1]=f,_;if(v=a[r++],(192&v)!=128){r--;continue}if(n=(15&c)<<12|(63&f)<<6|63&v,n<2048||n>=55296&&n<=57343||n===65279)continue;d[_++]=n}else if((248&c)==240){if(r>=u)return this.interim[0]=c,_;if(f=a[r++],(192&f)!=128){r--;continue}if(r>=u)return this.interim[0]=c,this.interim[1]=f,_;if(v=a[r++],(192&v)!=128){r--;continue}if(r>=u)return this.interim[0]=c,this.interim[1]=f,this.interim[2]=v,_;if(C=a[r++],(192&C)!=128){r--;continue}if(n=(7&c)<<18|(63&f)<<12|(63&v)<<6|63&C,n<65536||n>1114111)continue;d[_++]=n}}return _}}},225:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const d=a(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;s.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let v=0;v<u.length;++v)f.fill(0,u[v][0],u[v][1]+1)}}wcwidth(v){return v<32?0:v<127?1:v<65536?f[v]:function(C,_){let n,o=0,i=_.length-1;if(C<_[0][0]||C>_[i][1])return!1;for(;i>=o;)if(n=o+i>>1,C>_[n][1])o=n+1;else{if(!(C<_[n][0]))return!0;i=n-1}return!1}(v,c)?0:v>=131072&&v<=196605||v>=196608&&v<=262141?2:1}charProperties(v,C){let _=this.wcwidth(v),n=_===0&&C!==0;if(n){const o=d.UnicodeService.extractWidth(C);o===0?n=!1:o>_&&(_=o)}return d.UnicodeService.createPropertyValue(0,_,n)}}},5981:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const d=a(8460),u=a(844);class c extends u.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(C)}_innerWrite(v=0,C=!0){const _=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],o=this._action(n,C);if(o){const r=l=>Date.now()-_>=12?setTimeout(()=>this._innerWrite(0,l)):this._innerWrite(_,l);return void o.catch(l=>(queueMicrotask(()=>{throw l}),Promise.resolve(!1))).then(r)}const i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=c},5941:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function u(c,f){const v=c.toString(16),C=v.length<2?"0"+v:v;switch(f){case 4:return v[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}s.parseColor=function(c){if(!c)return;let f=c.toLowerCase();if(f.indexOf("rgb:")===0){f=f.slice(4);const v=a.exec(f);if(v){const C=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/C*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/C*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/C*255)]}}else if(f.indexOf("#")===0&&(f=f.slice(1),d.exec(f)&&[3,6,9,12].includes(f.length))){const v=f.length/3,C=[0,0,0];for(let _=0;_<3;++_){const n=parseInt(f.slice(v*_,v*_+v),16);C[_]=v===1?n<<4:v===2?n:v===3?n>>4:n>>8}return C}},s.toRgbString=function(c,f=16){const[v,C,_]=c;return"rgb:".concat(u(v,f),"/").concat(u(C,f),"/").concat(u(_,f))}},5770:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const d=a(482),u=a(8742),c=a(5770),f=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}registerHandler(C,_){this._handlers[C]===void 0&&(this._handlers[C]=[]);const n=this._handlers[C];return n.push(_),{dispose:()=>{const o=n.indexOf(_);o!==-1&&n.splice(o,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0}hook(C,_){if(this.reset(),this._ident=C,this._active=this._handlers[C]||f,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(C,_,n){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(C,_,n);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(C,_,n))}unhook(C,_=!0){if(this._active.length){let n=!1,o=this._active.length-1,i=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,n=_,i=this._stack.fallThrough,this._stack.paused=!1),!i&&n===!1){for(;o>=0&&(n=this._active[o].unhook(C),n!==!0);o--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,n;o--}for(;o>=0;o--)if(n=this._active[o].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",C);this._active=f,this._ident=0}};const v=new u.Params;v.addParam(0),s.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=v,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():v,this._data="",this._hitLimit=!1}put(C,_,n){this._hitLimit||(this._data+=(0,d.utf32ToString)(C,_,n),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let _=!1;if(this._hitLimit)_=!1;else if(C&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then(n=>(this._params=v,this._data="",this._hitLimit=!1,n));return this._params=v,this._data="",this._hitLimit=!1,_}}},2015:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const d=a(844),u=a(8742),c=a(6242),f=a(6351);class v{constructor(o){this.table=new Uint8Array(o)}setDefault(o,i){this.table.fill(o<<4|i)}add(o,i,r,l){this.table[i<<8|o]=r<<4|l}addMany(o,i,r,l){for(let m=0;m<o.length;m++)this.table[i<<8|o[m]]=r<<4|l}}s.TransitionTable=v;const C=160;s.VT500_TRANSITION_TABLE=function(){const n=new v(4095),o=Array.apply(null,Array(256)).map((w,p)=>p),i=(w,p)=>o.slice(w,p),r=i(32,127),l=i(0,24);l.push(25),l.push.apply(l,i(28,32));const m=i(0,14);let S;for(S in n.setDefault(1,0),n.addMany(r,0,2,0),m)n.addMany([24,26,153,154],S,3,0),n.addMany(i(128,144),S,3,0),n.addMany(i(144,152),S,3,0),n.add(156,S,0,0),n.add(27,S,11,1),n.add(157,S,4,8),n.addMany([152,158,159],S,0,7),n.add(155,S,11,3),n.add(144,S,11,9);return n.addMany(l,0,3,0),n.addMany(l,1,3,1),n.add(127,1,0,1),n.addMany(l,8,0,8),n.addMany(l,3,3,3),n.add(127,3,0,3),n.addMany(l,4,3,4),n.add(127,4,0,4),n.addMany(l,6,3,6),n.addMany(l,5,3,5),n.add(127,5,0,5),n.addMany(l,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(r,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(i(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(r,7,0,7),n.addMany(l,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(i(64,127),3,7,0),n.addMany(i(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(i(48,60),4,8,4),n.addMany(i(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(i(32,64),6,0,6),n.add(127,6,0,6),n.addMany(i(64,127),6,0,0),n.addMany(i(32,48),3,9,5),n.addMany(i(32,48),5,9,5),n.addMany(i(48,64),5,0,6),n.addMany(i(64,127),5,7,0),n.addMany(i(32,48),4,9,5),n.addMany(i(32,48),1,9,2),n.addMany(i(32,48),2,9,2),n.addMany(i(48,127),2,10,0),n.addMany(i(48,80),1,10,0),n.addMany(i(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(i(96,127),1,10,0),n.add(80,1,11,9),n.addMany(l,9,0,9),n.add(127,9,0,9),n.addMany(i(28,32),9,0,9),n.addMany(i(32,48),9,9,12),n.addMany(i(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(l,11,0,11),n.addMany(i(32,128),11,0,11),n.addMany(i(28,32),11,0,11),n.addMany(l,10,0,10),n.add(127,10,0,10),n.addMany(i(28,32),10,0,10),n.addMany(i(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(i(32,48),10,9,12),n.addMany(l,12,0,12),n.add(127,12,0,12),n.addMany(i(28,32),12,0,12),n.addMany(i(32,48),12,9,12),n.addMany(i(48,64),12,0,11),n.addMany(i(64,127),12,12,13),n.addMany(i(64,127),10,12,13),n.addMany(i(64,127),9,12,13),n.addMany(l,13,13,13),n.addMany(r,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(C,0,2,0),n.add(C,8,5,8),n.add(C,6,0,6),n.add(C,11,0,11),n.add(C,13,13,13),n}();class _ extends d.Disposable{constructor(o=s.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,r,l)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,r)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new f.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,i=[64,126]){let r=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=o.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let m=0;m<o.intermediates.length;++m){const S=o.intermediates.charCodeAt(m);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=S}}if(o.final.length!==1)throw new Error("final must be a single byte");const l=o.final.charCodeAt(0);if(i[0]>l||l>i[1])throw new Error("final must be in range ".concat(i[0]," .. ").concat(i[1]));return r<<=8,r|=l,r}identToString(o){const i=[];for(;o;)i.push(String.fromCharCode(255&o)),o>>=8;return i.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,i){const r=this._identifier(o,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const l=this._escHandlers[r];return l.push(i),{dispose:()=>{const m=l.indexOf(i);m!==-1&&l.splice(m,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,i){this._executeHandlers[o.charCodeAt(0)]=i}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,i){const r=this._identifier(o);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const l=this._csiHandlers[r];return l.push(i),{dispose:()=>{const m=l.indexOf(i);m!==-1&&l.splice(m,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,i){return this._dcsParser.registerHandler(this._identifier(o),i)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,i){return this._oscParser.registerHandler(o,i)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,i,r,l,m){this._parseStack.state=o,this._parseStack.handlers=i,this._parseStack.handlerPos=r,this._parseStack.transition=l,this._parseStack.chunkPos=m}parse(o,i,r){let l,m=0,S=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const p=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&E>-1){for(;E>=0&&(l=p[E](this._params),l!==!0);E--)if(l instanceof Promise)return this._parseStack.handlerPos=E,l}this._parseStack.handlers=[];break;case 4:if(r===!1&&E>-1){for(;E>=0&&(l=p[E](),l!==!0);E--)if(l instanceof Promise)return this._parseStack.handlerPos=E,l}this._parseStack.handlers=[];break;case 6:if(m=o[this._parseStack.chunkPos],l=this._dcsParser.unhook(m!==24&&m!==26,r),l)return l;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(m=o[this._parseStack.chunkPos],l=this._oscParser.end(m!==24&&m!==26,r),l)return l;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let p=w;p<i;++p){switch(m=o[p],S=this._transitions.table[this.currentState<<8|(m<160?m:C)],S>>4){case 2:for(let R=p+1;;++R){if(R>=i||(m=o[R])<32||m>126&&m<C){this._printHandler(o,p,R),p=R-1;break}if(++R>=i||(m=o[R])<32||m>126&&m<C){this._printHandler(o,p,R),p=R-1;break}if(++R>=i||(m=o[R])<32||m>126&&m<C){this._printHandler(o,p,R),p=R-1;break}if(++R>=i||(m=o[R])<32||m>126&&m<C){this._printHandler(o,p,R),p=R-1;break}}break;case 3:this._executeHandlers[m]?this._executeHandlers[m]():this._executeHandlerFb(m),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:p,code:m,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|m];let T=E?E.length-1:-1;for(;T>=0&&(l=E[T](this._params),l!==!0);T--)if(l instanceof Promise)return this._preserveStack(3,E,T,S,p),l;T<0&&this._csiHandlerFb(this._collect<<8|m,this._params),this.precedingJoinState=0;break;case 8:do switch(m){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(m-48)}while(++p<i&&(m=o[p])>47&&m<60);p--;break;case 9:this._collect<<=8,this._collect|=m;break;case 10:const O=this._escHandlers[this._collect<<8|m];let I=O?O.length-1:-1;for(;I>=0&&(l=O[I](),l!==!0);I--)if(l instanceof Promise)return this._preserveStack(4,O,I,S,p),l;I<0&&this._escHandlerFb(this._collect<<8|m),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|m,this._params);break;case 13:for(let R=p+1;;++R)if(R>=i||(m=o[R])===24||m===26||m===27||m>127&&m<C){this._dcsParser.put(o,p,R),p=R-1;break}break;case 14:if(l=this._dcsParser.unhook(m!==24&&m!==26),l)return this._preserveStack(6,[],0,S,p),l;m===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let R=p+1;;R++)if(R>=i||(m=o[R])<32||m>127&&m<C){this._oscParser.put(o,p,R),p=R-1;break}break;case 6:if(l=this._oscParser.end(m!==24&&m!==26),l)return this._preserveStack(5,[],0,S,p),l;m===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}s.EscapeSequenceParser=_},6242:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const d=a(5770),u=a(482),c=[];s.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(f,v){this._handlers[f]===void 0&&(this._handlers[f]=[]);const C=this._handlers[f];return C.push(v),{dispose:()=>{const _=C.indexOf(v);_!==-1&&C.splice(_,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].start();else this._handlerFb(this._id,"START")}_put(f,v,C){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(f,v,C);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(f,v,C))}start(){this.reset(),this._state=1}put(f,v,C){if(this._state!==3){if(this._state===1)for(;v<C;){const _=f[v++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&C-v>0&&this._put(f,v,C)}}end(f,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,_=this._active.length-1,n=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,C=v,n=this._stack.fallThrough,this._stack.paused=!1),!n&&C===!1){for(;_>=0&&(C=this._active[_].end(f),C!==!0);_--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,C;_--}for(;_>=0;_--)if(C=this._active[_].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",f);this._active=c,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(f){this._handler=f,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(f,v,C){this._hitLimit||(this._data+=(0,u.utf32ToString)(f,v,C),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(f){let v=!1;if(this._hitLimit)v=!1;else if(f&&(v=this._handler(this._data),v instanceof Promise))return v.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,v}}},8742:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const a=2147483647;class d{static fromArray(c){const f=new d;if(!c.length)return f;for(let v=Array.isArray(c[0])?1:0;v<c.length;++v){const C=c[v];if(Array.isArray(C))for(let _=0;_<C.length;++_)f.addSubParam(C[_]);else f.addParam(C)}return f}constructor(c=32,f=32){if(this.maxLength=c,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const c=new d(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){const c=[];for(let f=0;f<this.length;++f){c.push(this.params[f]);const v=this._subParamsIdx[f]>>8,C=255&this._subParamsIdx[f];C-v>0&&c.push(Array.prototype.slice.call(this._subParams,v,C))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>a?a:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>a?a:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){const f=this._subParamsIdx[c]>>8,v=255&this._subParamsIdx[c];return v-f>0?this._subParams.subarray(f,v):null}getSubParamsAll(){const c={};for(let f=0;f<this.length;++f){const v=this._subParamsIdx[f]>>8,C=255&this._subParamsIdx[f];C-v>0&&(c[f]=this._subParams.slice(v,C))}return c}addDigit(c){let f;if(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,C=v[f-1];v[f-1]=~C?Math.min(10*C+c,a):c}}s.Params=d},5741:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,d){const u={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(u),d.dispose=()=>this._wrappedAddonDispose(u),d.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let d=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===a){d=u;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(d,1)}}},8771:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const d=a(3785),u=a(511);s.BufferApiView=class{constructor(c,f){this._buffer=c,this.type=f}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){const f=this._buffer.lines.get(c);if(f)return new d.BufferLineApiView(f)}getNullCell(){return new u.CellData}}},3785:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const d=a(511);s.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,c){if(!(u<0||u>=this._line.length))return c?(this._line.loadCell(u,c),c):this._line.loadCell(u,new d.CellData)}translateToString(u,c,f){return this._line.translateToString(u,c,f)}}},8285:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const d=a(8771),u=a(8460),c=a(844);class f extends c.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=f},7975:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,d){return this._core.registerCsiHandler(a,u=>d(u.toArray()))}addCsiHandler(a,d){return this.registerCsiHandler(a,d)}registerDcsHandler(a,d){return this._core.registerDcsHandler(a,(u,c)=>d(u,c.toArray()))}addDcsHandler(a,d){return this.registerDcsHandler(a,d)}registerEscHandler(a,d){return this._core.registerEscHandler(a,d)}addEscHandler(a,d){return this.registerEscHandler(a,d)}registerOscHandler(a,d){return this._core.registerOscHandler(a,d)}addOscHandler(a,d){return this.registerOscHandler(a,d)}}},7090:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(y,s,a){var d=this&&this.__decorate||function(n,o,i,r){var l,m=arguments.length,S=m<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,o,i,r);else for(var w=n.length-1;w>=0;w--)(l=n[w])&&(S=(m<3?l(S):m>3?l(o,i,S):l(o,i))||S);return m>3&&S&&Object.defineProperty(o,i,S),S},u=this&&this.__param||function(n,o){return function(i,r){o(i,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const c=a(8460),f=a(844),v=a(5295),C=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let _=s.BufferService=class extends f.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(n,this))}resize(n,o){this.cols=n,this.rows=o,this.buffers.resize(n,o),this._onResize.fire({cols:n,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,o=!1){const i=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===n.fg&&r.getBg(0)===n.bg||(r=i.getBlankLine(n,o),this._cachedBlankLine=r),r.isWrapped=o;const l=i.ybase+i.scrollTop,m=i.ybase+i.scrollBottom;if(i.scrollTop===0){const S=i.lines.isFull;m===i.lines.length-1?S?i.lines.recycle().copyFrom(r):i.lines.push(r.clone()):i.lines.splice(m+1,0,r.clone()),S?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const S=m-l+1;i.lines.shiftElements(l+1,S-1,-1),i.lines.set(m,r.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(n,o,i){const r=this.buffer;if(n<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else n+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const l=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+n,r.ybase),0),l!==r.ydisp&&(o||this._onScroll.fire(r.ydisp))}};s.BufferService=_=d([u(0,C.IOptionsService)],_)},7994:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,d){this._charsets[a]=d,this.glevel===a&&(this.charset=d)}}},1753:function(y,s,a){var d=this&&this.__decorate||function(r,l,m,S){var w,p=arguments.length,E=p<3?l:S===null?S=Object.getOwnPropertyDescriptor(l,m):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(r,l,m,S);else for(var T=r.length-1;T>=0;T--)(w=r[T])&&(E=(p<3?w(E):p>3?w(l,m,E):w(l,m))||E);return p>3&&E&&Object.defineProperty(l,m,E),E},u=this&&this.__param||function(r,l){return function(m,S){l(m,S,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const c=a(2585),f=a(8460),v=a(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function _(r,l){let m=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(m|=64,m|=r.action):(m|=3&r.button,4&r.button&&(m|=64),8&r.button&&(m|=128),r.action===32?m|=32:r.action!==0||l||(m|=3)),m}const n=String.fromCharCode,o={DEFAULT:r=>{const l=[_(r,!1)+32,r.col+32,r.row+32];return l[0]>255||l[1]>255||l[2]>255?"":"\x1B[M".concat(n(l[0])).concat(n(l[1])).concat(n(l[2]))},SGR:r=>{const l=r.action===0&&r.button!==4?"m":"M";return"\x1B[<".concat(_(r,!0),";").concat(r.col,";").concat(r.row).concat(l)},SGR_PIXELS:r=>{const l=r.action===0&&r.button!==4?"m":"M";return"\x1B[<".concat(_(r,!0),";").concat(r.x,";").concat(r.y).concat(l)}};let i=s.CoreMouseService=class extends v.Disposable{constructor(r,l){super(),this._bufferService=r,this._coreService=l,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new f.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const m of Object.keys(C))this.addProtocol(m,C[m]);for(const m of Object.keys(o))this.addEncoding(m,o[m]);this.reset()}addProtocol(r,l){this._protocols[r]=l}addEncoding(r,l){this._encodings[r]=l}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error('unknown protocol "'.concat(r,'"'));this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error('unknown encoding "'.concat(r,'"'));this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const l=this._encodings[this._activeEncoding](r);return l&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(l):this._coreService.triggerDataEvent(l,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,l,m){if(m){if(r.x!==l.x||r.y!==l.y)return!1}else if(r.col!==l.col||r.row!==l.row)return!1;return r.button===l.button&&r.action===l.action&&r.ctrl===l.ctrl&&r.alt===l.alt&&r.shift===l.shift}};s.CoreMouseService=i=d([u(0,c.IBufferService),u(1,c.ICoreService)],i)},6975:function(y,s,a){var d=this&&this.__decorate||function(i,r,l,m){var S,w=arguments.length,p=w<3?r:m===null?m=Object.getOwnPropertyDescriptor(r,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(i,r,l,m);else for(var E=i.length-1;E>=0;E--)(S=i[E])&&(p=(w<3?S(p):w>3?S(r,l,p):S(r,l))||p);return w>3&&p&&Object.defineProperty(r,l,p),p},u=this&&this.__param||function(i,r){return function(l,m){r(l,m,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const c=a(1439),f=a(8460),v=a(844),C=a(2585),_=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=s.CoreService=class extends v.Disposable{constructor(i,r,l){super(),this._bufferService=i,this._logService=r,this._optionsService=l,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new f.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new f.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(_),this.decPrivateModes=(0,c.clone)(n)}reset(){this.modes=(0,c.clone)(_),this.decPrivateModes=(0,c.clone)(n)}triggerDataEvent(i,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const l=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&l.ybase!==l.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug('sending data "'.concat(i,'"'),()=>i.split("").map(m=>m.charCodeAt(0))),this._onData.fire(i)}triggerBinaryEvent(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'.concat(i,'"'),()=>i.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(i))}};s.CoreService=o=d([u(0,C.IBufferService),u(1,C.ILogService),u(2,C.IOptionsService)],o)},9074:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const d=a(8055),u=a(8460),c=a(844),f=a(6106);let v=0,C=0;class _ extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new f.SortedList(i=>i==null?void 0:i.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(i){if(i.marker.isDisposed)return;const r=new n(i);if(r){const l=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),l.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const i of this._decorations.values())i.dispose();this._decorations.clear()}*getDecorationsAtCell(i,r,l){var w,p,E;let m=0,S=0;for(const T of this._decorations.getKeyIterator(r))m=(w=T.options.x)!=null?w:0,S=m+((p=T.options.width)!=null?p:1),i>=m&&i<S&&(!l||((E=T.options.layer)!=null?E:"bottom")===l)&&(yield T)}forEachDecorationAtCell(i,r,l,m){this._decorations.forEachByKey(r,S=>{var w,p,E;v=(w=S.options.x)!=null?w:0,C=v+((p=S.options.width)!=null?p:1),i>=v&&i<C&&(!l||((E=S.options.layer)!=null?E:"bottom")===l)&&m(S)})}}s.DecorationService=_;class n extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(i){super(),this.options=i,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=i.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const d=a(2585),u=a(8343);class c{constructor(...v){this._entries=new Map;for(const[C,_]of v)this.set(C,_)}set(v,C){const _=this._entries.get(v);return this._entries.set(v,C),_}forEach(v){for(const[C,_]of this._entries.entries())v(C,_)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}s.ServiceCollection=c,s.InstantiationService=class{constructor(){this._services=new c,this._services.set(d.IInstantiationService,this)}setService(f,v){this._services.set(f,v)}getService(f){return this._services.get(f)}createInstance(f,...v){const C=(0,u.getServiceDependencies)(f).sort((o,i)=>o.index-i.index),_=[];for(const o of C){const i=this._services.get(o.id);if(!i)throw new Error("[createInstance] ".concat(f.name," depends on UNKNOWN service ").concat(o.id,"."));_.push(i)}const n=C.length>0?C[0].index:v.length;if(v.length!==n)throw new Error("[createInstance] First service dependency of ".concat(f.name," at position ").concat(n+1," conflicts with ").concat(v.length," static arguments"));return new f(...v,..._)}}},7866:function(y,s,a){var d=this&&this.__decorate||function(n,o,i,r){var l,m=arguments.length,S=m<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,o,i,r);else for(var w=n.length-1;w>=0;w--)(l=n[w])&&(S=(m<3?l(S):m>3?l(o,i,S):l(o,i))||S);return m>3&&S&&Object.defineProperty(o,i,S),S},u=this&&this.__param||function(n,o){return function(i,r){o(i,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const c=a(844),f=a(2585),v={trace:f.LogLevelEnum.TRACE,debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF};let C,_=s.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let o=0;o<n.length;o++)typeof n[o]=="function"&&(n[o]=n[o]())}_log(n,o,i){this._evalLazyOptionalParams(i),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...i)}trace(n,...o){var i,r;this._logLevel<=f.LogLevelEnum.TRACE&&this._log((r=(i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))!=null?r:console.log,n,o)}debug(n,...o){var i,r;this._logLevel<=f.LogLevelEnum.DEBUG&&this._log((r=(i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))!=null?r:console.log,n,o)}info(n,...o){var i,r;this._logLevel<=f.LogLevelEnum.INFO&&this._log((r=(i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))!=null?r:console.info,n,o)}warn(n,...o){var i,r;this._logLevel<=f.LogLevelEnum.WARN&&this._log((r=(i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))!=null?r:console.warn,n,o)}error(n,...o){var i,r;this._logLevel<=f.LogLevelEnum.ERROR&&this._log((r=(i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))!=null?r:console.error,n,o)}};s.LogService=_=d([u(0,f.IOptionsService)],_),s.setTraceLogger=function(n){C=n},s.traceCall=function(n,o,i){if(typeof i.value!="function")throw new Error("not supported");const r=i.value;i.value=function(...l){if(C.logLevel!==f.LogLevelEnum.TRACE)return r.apply(this,l);C.trace("GlyphRenderer#".concat(r.name,"(").concat(l.map(S=>JSON.stringify(S)).join(", "),")"));const m=r.apply(this,l);return C.trace("GlyphRenderer#".concat(r.name," return"),m),m}}},7302:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const d=a(8460),u=a(844),c=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const f=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends u.Disposable{constructor(_){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...s.DEFAULT_OPTIONS};for(const o in _)if(o in n)try{const i=_[o];n[o]=this._sanitizeAndValidateOption(o,i)}catch(i){console.error(i)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(_,n){return this.onOptionChange(o=>{o===_&&n(this.rawOptions[_])})}onMultipleOptionChange(_,n){return this.onOptionChange(o=>{_.indexOf(o)!==-1&&n()})}_setupOptions(){const _=o=>{if(!(o in s.DEFAULT_OPTIONS))throw new Error('No option with key "'.concat(o,'"'));return this.rawOptions[o]},n=(o,i)=>{if(!(o in s.DEFAULT_OPTIONS))throw new Error('No option with key "'.concat(o,'"'));i=this._sanitizeAndValidateOption(o,i),this.rawOptions[o]!==i&&(this.rawOptions[o]=i,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const i={get:_.bind(this,o),set:n.bind(this,o)};Object.defineProperty(this.options,o,i)}}_sanitizeAndValidateOption(_,n){switch(_){case"cursorStyle":if(n||(n=s.DEFAULT_OPTIONS[_]),!function(o){return o==="block"||o==="underline"||o==="bar"}(n))throw new Error('"'.concat(n,'" is not a valid value for ').concat(_));break;case"wordSeparator":n||(n=s.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=f.includes(n)?n:s.DEFAULT_OPTIONS[_];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error("".concat(_," cannot be less than 1, value: ").concat(n));break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error("".concat(_," cannot be less than 0, value: ").concat(n));break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error("".concat(_," cannot be less than or equal to 0, value: ").concat(n));break;case"rows":case"cols":if(!n&&n!==0)throw new Error("".concat(_," must be numeric, value: ").concat(n));break;case"windowsPty":n=n!=null?n:{}}return n}}s.OptionsService=v},2660:function(y,s,a){var d=this&&this.__decorate||function(v,C,_,n){var o,i=arguments.length,r=i<3?C:n===null?n=Object.getOwnPropertyDescriptor(C,_):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(v,C,_,n);else for(var l=v.length-1;l>=0;l--)(o=v[l])&&(r=(i<3?o(r):i>3?o(C,_,r):o(C,_))||r);return i>3&&r&&Object.defineProperty(C,_,r),r},u=this&&this.__param||function(v,C){return function(_,n){C(_,n,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const c=a(2585);let f=s.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const C=this._bufferService.buffer;if(v.id===void 0){const l=C.addMarker(C.ybase+C.y),m={data:v,id:this._nextId++,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(m,l)),this._dataByLinkId.set(m.id,m),m.id}const _=v,n=this._getEntryIdKey(_),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,C.ybase+C.y),o.id;const i=C.addMarker(C.ybase+C.y),r={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(r,i)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(v,C){const _=this._dataByLinkId.get(v);if(_&&_.lines.every(n=>n.line!==C)){const n=this._bufferService.buffer.addMarker(C);_.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(_,n))}}getLinkData(v){var C;return(C=this._dataByLinkId.get(v))==null?void 0:C.data}_getEntryIdKey(v){return"".concat(v.id,";;").concat(v.uri)}_removeMarkerFromLink(v,C){const _=v.lines.indexOf(C);_!==-1&&(v.lines.splice(_,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};s.OscLinkService=f=d([u(0,c.IBufferService)],f)},8343:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[d]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);const c=function(f,v,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,n,o){n[a]===n?n[d].push({id:_,index:o}):(n[d]=[{id:_,index:o}],n[a]=n)})(c,f,C)};return c.toString=()=>u,s.serviceRegistry.set(u,c),c}},2585:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const d=a(8343);var u;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const d=a(8460),u=a(225);class c{static extractShouldJoin(v){return(1&v)!=0}static extractWidth(v){return v>>1&3}static extractCharKind(v){return v>>3}static createPropertyValue(v,C,_=!1){return(16777215&v)<<3|(3&C)<<1|(_?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const v=new u.UnicodeV6;this.register(v),this._active=v.version,this._activeProvider=v}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(v){if(!this._providers[v])throw new Error('unknown Unicode version "'.concat(v,'"'));this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)}register(v){this._providers[v.version]=v}wcwidth(v){return this._activeProvider.wcwidth(v)}getStringCellWidth(v){let C=0,_=0;const n=v.length;for(let o=0;o<n;++o){let i=v.charCodeAt(o);if(55296<=i&&i<=56319){if(++o>=n)return C+this.wcwidth(i);const m=v.charCodeAt(o);56320<=m&&m<=57343?i=1024*(i-55296)+m-56320+65536:C+=this.wcwidth(m)}const r=this.charProperties(i,_);let l=c.extractWidth(r);c.extractShouldJoin(r)&&(l-=c.extractWidth(_)),C+=l,_=r}return C}charProperties(v,C){return this._activeProvider.charProperties(v,C)}}s.UnicodeService=c}},g={};function b(y){var s=g[y];if(s!==void 0)return s.exports;var a=g[y]={exports:{}};return h[y].call(a.exports,a,a.exports,b),a.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.Terminal=void 0;const s=b(9042),a=b(3236),d=b(844),u=b(5741),c=b(8285),f=b(7975),v=b(7090),C=["cols","rows"];class _ extends d.Disposable{constructor(o){super(),this._core=this.register(new a.Terminal(o)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const i=l=>this._core.options[l],r=(l,m)=>{this._checkReadonlyOptions(l),this._core.options[l]=m};for(const l in this._core.options){const m={get:i.bind(this,l),set:r.bind(this,l)};Object.defineProperty(this._publicOptions,l,m)}}_checkReadonlyOptions(o){if(C.includes(o))throw new Error('Option "'.concat(o,'" can only be set in the constructor'))}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new f.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const i in o)this._publicOptions[i]=o[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(o,i=!0){this._core.input(o,i)}resize(o,i){this._verifyIntegers(o,i),this._core.resize(o,i)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}attachCustomWheelEventHandler(o){this._core.attachCustomWheelEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){var i,r,l;return this._checkProposedApi(),this._verifyPositiveIntegers((i=o.x)!=null?i:0,(r=o.width)!=null?r:0,(l=o.height)!=null?l:0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,i,r){this._verifyIntegers(o,i,r),this._core.select(o,i,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,i){this._verifyIntegers(o,i),this._core.selectLines(o,i)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,i){this._core.write(o,i)}writeln(o,i){this._core.write(o),this._core.write("\r\n",i)}paste(o){this._core.paste(o)}refresh(o,i){this._verifyIntegers(o,i),this._core.refresh(o,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return s}_verifyIntegers(...o){for(const i of o)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const i of o)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}y.Terminal=_})(),x})())}(Si)),Si.exports}var pa=_a(),bi={exports:{}},Ps;function va(){return Ps||(Ps=1,function(e,t){(function(h,g){e.exports=g()})(self,()=>(()=>{var h={};return(()=>{var g=h;Object.defineProperty(g,"__esModule",{value:!0}),g.FitAddon=void 0,g.FitAddon=class{activate(b){this._terminal=b}dispose(){}fit(){const b=this.proposeDimensions();if(!b||!this._terminal||isNaN(b.cols)||isNaN(b.rows))return;const x=this._terminal._core;this._terminal.rows===b.rows&&this._terminal.cols===b.cols||(x._renderService.clear(),this._terminal.resize(b.cols,b.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const b=this._terminal._core,x=b._renderService.dimensions;if(x.css.cell.width===0||x.css.cell.height===0)return;const y=this._terminal.options.scrollback===0?0:b.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),d=Math.max(0,parseInt(s.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),c=a-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),f=d-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-y;return{cols:Math.max(2,Math.floor(f/x.css.cell.width)),rows:Math.max(1,Math.floor(c/x.css.cell.height))}}}})(),h})())}(bi)),bi.exports}var ga=va(),Ci={exports:{}},Is;function ma(){return Is||(Is=1,function(e,t){(function(h,g){e.exports=g()})(self,()=>(()=>{var h={6:(y,s)=>{function a(u){try{const c=new URL(u),f=c.password&&c.username?"".concat(c.protocol,"//").concat(c.username,":").concat(c.password,"@").concat(c.host):c.username?"".concat(c.protocol,"//").concat(c.username,"@").concat(c.host):"".concat(c.protocol,"//").concat(c.host);return u.toLocaleLowerCase().startsWith(f.toLocaleLowerCase())}catch(c){return!1}}Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(u,c,f,v={}){this._terminal=u,this._regex=c,this._handler=f,this._options=v}provideLinks(u,c){const f=d.computeLink(u,this._regex,this._terminal,this._handler);c(this._addCallbacks(f))}_addCallbacks(u){return u.map(c=>(c.leave=this._options.leave,c.hover=(f,v)=>{if(this._options.hover){const{range:C}=c;this._options.hover(f,v,C)}},c))}};class d{static computeLink(c,f,v,C){const _=new RegExp(f.source,(f.flags||"")+"g"),[n,o]=d._getWindowedLineStrings(c-1,v),i=n.join("");let r;const l=[];for(;r=_.exec(i);){const m=r[0];if(!a(m))continue;const[S,w]=d._mapStrIdx(v,o,0,r.index),[p,E]=d._mapStrIdx(v,S,w,m.length);if(S===-1||w===-1||p===-1||E===-1)continue;const T={start:{x:w+1,y:S+1},end:{x:E,y:p+1}};l.push({range:T,text:m,activate:C})}return l}static _getWindowedLineStrings(c,f){let v,C=c,_=c,n=0,o="";const i=[];if(v=f.buffer.active.getLine(c)){const r=v.translateToString(!0);if(v.isWrapped&&r[0]!==" "){for(n=0;(v=f.buffer.active.getLine(--C))&&n<2048&&(o=v.translateToString(!0),n+=o.length,i.push(o),v.isWrapped&&o.indexOf(" ")===-1););i.reverse()}for(i.push(r),n=0;(v=f.buffer.active.getLine(++_))&&v.isWrapped&&n<2048&&(o=v.translateToString(!0),n+=o.length,i.push(o),o.indexOf(" ")===-1););}return[i,C]}static _mapStrIdx(c,f,v,C){const _=c.buffer.active,n=_.getNullCell();let o=v;for(;C;){const i=_.getLine(f);if(!i)return[-1,-1];for(let r=o;r<i.length;++r){i.getCell(r,n);const l=n.getChars();if(n.getWidth()&&(C-=l.length||1,r===i.length-1&&l==="")){const m=_.getLine(f+1);m&&m.isWrapped&&(m.getCell(0,n),n.getWidth()===2&&(C+=1))}if(C<0)return[f,r]}f++,o=0}return[f,o]}}s.LinkComputer=d}},g={};function b(y){var s=g[y];if(s!==void 0)return s.exports;var a=g[y]={exports:{}};return h[y](a,a.exports,b),a.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.WebLinksAddon=void 0;const s=b(6),a=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function d(u,c){const f=window.open();if(f){try{f.opener=null}catch(v){}f.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}y.WebLinksAddon=class{constructor(u=d,c={}){this._handler=u,this._options=c}activate(u){this._terminal=u;const c=this._options,f=c.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,f,this._handler,c))}dispose(){var u;(u=this._linkProvider)==null||u.dispose()}}})(),x})())}(Ci)),Ci.exports}var Sa=ma(),wi={exports:{}},Hs;function ba(){return Hs||(Hs=1,function(e,t){(function(h,g){e.exports=g()})(self,()=>(()=>{var h={};return(()=>{var g=h;function b(x,y,s){return x.addEventListener(y,s),{dispose:()=>{s&&x.removeEventListener(y,s)}}}Object.defineProperty(g,"__esModule",{value:!0}),g.AttachAddon=void 0,g.AttachAddon=class{constructor(x,y){this._disposables=[],this._socket=x,this._socket.binaryType="arraybuffer",this._bidirectional=!(y&&y.bidirectional===!1)}activate(x){this._disposables.push(b(this._socket,"message",y=>{const s=y.data;x.write(typeof s=="string"?s:new Uint8Array(s))})),this._bidirectional&&(this._disposables.push(x.onData(y=>this._sendData(y))),this._disposables.push(x.onBinary(y=>this._sendBinary(y)))),this._disposables.push(b(this._socket,"close",()=>this.dispose())),this._disposables.push(b(this._socket,"error",()=>this.dispose()))}dispose(){for(const x of this._disposables)x.dispose()}_sendData(x){this._checkOpenSocket()&&this._socket.send(x)}_sendBinary(x){if(!this._checkOpenSocket())return;const y=new Uint8Array(x.length);for(let s=0;s<x.length;++s)y[s]=255&x.charCodeAt(s);this._socket.send(y)}_checkOpenSocket(){switch(this._socket.readyState){case WebSocket.OPEN:return!0;case WebSocket.CONNECTING:throw new Error("Attach addon was loaded before socket was open");case WebSocket.CLOSING:return console.warn("Attach addon socket is closing"),!1;case WebSocket.CLOSED:throw new Error("Attach addon socket is closed");default:throw new Error("Unexpected socket state")}}}})(),h})())}(wi)),wi.exports}var Ca=ba();const wa={foreground:"#F8F8F8",background:"#2D2E2C",selection:"#5DA5D533",black:"#1E1E1D",brightBlack:"#262625",red:"#CE5C5C",brightRed:"#FF7272",green:"#5BCC5B",brightGreen:"#72FF72",yellow:"#CCCC5B",brightYellow:"#FFFF72",blue:"#5D5DD3",brightBlue:"#7279FF",magenta:"#BC5ED1",brightMagenta:"#E572FF",cyan:"#5DA5D5",brightCyan:"#72F0FF",white:"#F8F8F8",brightWhite:"#FFFFFF"};let ot="";function ya(e){e.onData(t=>{La(t),t.charCodeAt(0)===127?Ea(e):t==="\r"?(e.write("\r\n"),ot=""):(ot+=t,e.write(t))})}function Ea(e){if(ot.length>0){const t=ot.charAt(ot.length-1),h=xa(t)?2:1;console.log(h),h===2?e.write("\b \b\b "):e.write("\b "),ot=ot.slice(0,-1)}}function xa(e){return e.charCodeAt(0)>255}async function La(e){console.log(e)}const Oi=new ga.FitAddon,Ge=new pa.Terminal({fontFamily:'"Cascadia Code", Menlo, monospace',theme:wa,cursorBlink:!0,cursorStyle:"bar"});function ka(){Da(),!Ge._initialized&&(Ge._initialized=!0,Ge.writeln("\x1B[32mHello, Welcome To QCOM!🎊\x1B[0m"),ya(Ge))}function Da(){Ge.loadAddon(Oi),Ge.loadAddon(new Sa.WebLinksAddon);const e=new WebSocket("ws://127.0.0.1:8765"),t=new Ca.AttachAddon(e);Ge.loadAddon(t),Ge.open(document.getElementById("xterm-inner")),setTimeout(()=>{Oi.fit()},60),document.querySelector(".xterm").addEventListener("wheel",Ra)}function Ra(e){Ge.buffer.active.baseY>0&&e.preventDefault()}const Aa={id:"xterm-body",class:"rounded px-3 py-2 bg-[#2d2e2c] pr-1 h-full min-h-[300px]"},Ta={__name:"MyXterm",setup(e){const t=()=>{Oi.fit()};return fr(()=>{ka(),window.addEventListener("resize",t)}),Yi(()=>{window.removeEventListener("resize",t)}),(h,g)=>(Tr(),ko("div",Aa,g[0]||(g[0]=[es("div",{id:"xterm-inner",class:"h-full"},null,-1)])))}},Ba=(e,t)=>{const h=e.__vccOpts||e;for(const[g,b]of t)h[g]=b;return h},Ma={__name:"App",setup(e){return(t,h)=>(Tr(),Do(Ta,{class:"term"}))}},Oa=Ba(Ma,[["__scopeId","data-v-26e853c9"]]);Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){for(;this.firstChild;)this.removeChild(this.firstChild);this.append(...e)});da(Oa).mount("#app");export{Pa as __vite_legacy_guard};
